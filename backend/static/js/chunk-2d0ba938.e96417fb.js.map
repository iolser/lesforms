{"version":3,"sources":["webpack:///./src/views/ViewAllResponses.vue","webpack:///./src/views/ViewAllResponses.vue?609b"],"names":["id","class","style","rowspan","value","unselectable","api_data","title","event","form","sections","section","sectionIndex","key","colspan","displayed_sections","questions","length","section_name","question","questionIndex","authorSearch","type","placeholder","eventSearch","statusSearch","filter","filteredResponses","response","responseIndex","author","href","answerer","Date","created_at","toLocaleString","timeSince","updated_at","editor","eventName","loading_status","answerStatuses","statuses","color","changeStatus","status","name","content","answer","answerIndex","field_type","includes","undefined","Object","prototype","toString","call","option","optionIndex","components","data","form_responses","user","interval","created","get","concat","this","$route","params","then","initializeData","queryString","query","initializeAnswers","getStatuses","methods","setTimeout","patchStatus","bind","options","method","url","headers","transformResponse","catch","error","console","log","i","splice","allFalse","result","x","String","render"],"mappings":"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","file":"js/chunk-2d0ba938.e96417fb.js","sourcesContent":["<template>\r\n  <div\r\n    v-if=\"api_data\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">{{ api_data.title }}</span><br><span class=\"subtitle\">Respostas</span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Autor da Resposta\r\n          </th>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Estado\r\n          </th>\r\n          <th\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            :colspan=\"displayed_sections[sectionIndex] == true ? section.questions.length : 1\"\r\n            class=\"section-first section-last\"\r\n          >\r\n            {{ section.section_name }}\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\" \r\n            v-show=\"displayed_sections[sectionIndex] == true\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <th\r\n              v-for=\"(question, questionIndex) in section.questions\"\r\n              :key=\"questionIndex\"\r\n              :class=\"{ 'section-first' : questionIndex === 0, 'section-last' : questionIndex === section.questions.length-1}\"\r\n            >\r\n              {{ question.question }}\r\n            </th>\r\n          </div>\r\n        </tr>\r\n        <tr>\r\n          <th\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            class=\"p-0\"\r\n            :class=\"displayed_sections[sectionIndex] ? 'section-first section-last' : ''\"\r\n            :colspan=\"displayed_sections[sectionIndex] ? section.questions.length : 1\"\r\n            :rowspan=\"displayed_sections[sectionIndex] == true ? 1 : 2\"\r\n          >\r\n            <div \r\n              class=\"button is-info is-fullwidth\"\r\n              :class=\"displayed_sections[sectionIndex] ? 'is-light' : 'is-small mt-1px'\"\r\n              @click=\"displayed_sections[sectionIndex] = !displayed_sections[sectionIndex];\"\r\n            >\r\n              {{ displayed_sections[sectionIndex] ? 'Esconder secção' : 'Ver secção' }}\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"authorSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por autor\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <div\r\n              v-show=\"displayed_sections[sectionIndex]\"\r\n              style=\"display: contents;\"\r\n            >\r\n              <th \r\n                v-for=\"(question, questionIndex) in section.questions\"\r\n                :key=\"questionIndex\"\r\n                class=\"p-0 field\"\r\n                :class=\"{ 'section-first' : questionIndex === 0, 'section-last' : questionIndex === section.questions.length-1}\"\r\n              >\r\n                <div class=\"field\">\r\n                  <div class=\"control has-icons-left\">\r\n                    <input\r\n                      v-model=\"question.filter\"\r\n                      type=\"text\"\r\n                      class=\"input is-info is-small m-0\"\r\n                      :placeholder=\"'Pesquisar por ' + question.question\"\r\n                      @input=\"filter\"\r\n                    >\r\n                    <span class=\"icon is-small is-left\">\r\n                      <i class=\"fas fa-search\" />\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </th>\r\n            </div>\r\n          </div>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td class=\"author\">\r\n            <span\r\n              v-if=\"response.author\"\r\n              :href=\"'/profile/'+response.answerer\"\r\n            >{{ response.author }}</span>\r\n            <template v-else>\r\n              Anónimo\r\n            </template><span\r\n              :title=\"new Date(response.created_at).toLocaleString()\"\r\n            >, há {{ timeSince(response.created_at) }}</span><span\r\n              v-if=\"response.created_at != response.updated_at\"\r\n              :class=\"response.created_at != response.updated_at ? 'edited' : ''\"\r\n              :title=\"'Editado por ' + (!response.editor ? 'Anónimo' : response.editor) + ' há ' + timeSince(response.updated_at) + ' (' + new Date(response.updated_at).toLocaleString() + ')'\"\r\n            >*</span><br>\r\n            <a\r\n              :href=\"'/forms/respond/' + response.id + '?event=' + response.event\"\r\n            >Editar Resposta</a>\r\n          </td>\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td style=\"vertical-align: middle;\">\r\n            <div \r\n              class=\"select is-rounded is-fullwidth\" \r\n              :class=\"{'is-loading' : loading_status[response.id] === 'loading', 'is-danger connection-error' : loading_status[response.id] === 'error'}\"\r\n            >\r\n              <select\r\n                v-model=\"answerStatuses[response.id]\"\r\n                style=\"border-width: 2.5px;\"\r\n                :style=\"{borderColor: loading_status[response.id] !== 'error' ? statuses[answerStatuses[response.id]].color : ''}\"\r\n                @change=\"changeStatus(response.id, answerStatuses[response.id])\"\r\n              >\r\n                <option \r\n                  v-if=\"loading_status[response.id] === 'error'\" \r\n                  value=\"error\" \r\n                  unselectable\r\n                >\r\n                  Erro de conexão\r\n                </option>\r\n                <option\r\n                  v-for=\"(status, key) in statuses\"\r\n                  :key=\"key\"\r\n                  :value=\"key\"\r\n                >\r\n                  {{ status.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </td>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in response.content.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <div\r\n              v-show=\"displayed_sections[sectionIndex]\"\r\n              style=\"display:contents;\"\r\n            >\r\n              <template \r\n                v-for=\"(answer, answerIndex) in section\">\r\n                <td\r\n                  v-if=\"!answer.field_type.includes('exposition')\"\r\n                  :key=\"answerIndex\"\r\n                  :style=\"answer.answer === undefined ? 'background-color: rgba(0, 0, 0, 0.25);' : ''\"\r\n                  :class=\"{ 'section-first' : answerIndex === 0, 'section-last' : answerIndex === section.length-1}\"\r\n                >\r\n                  <template v-if=\"answer.answer !== undefined\">\r\n                    <template v-if=\"Object.prototype.toString.call( answer.answer ) === '[object Array]'\">\r\n                      <li\r\n                        v-for=\"(option, optionIndex) in answer.answer\"\r\n                        :key=\"optionIndex\"\r\n                      >\r\n                        {{ option }}\r\n                      </li>\r\n                    </template>\r\n                    <template v-else>\r\n                      {{ answer.answer }}\r\n                    </template>\r\n                  </template>\r\n                  <template v-else>\r\n                    Sem resposta\r\n                  </template>\r\n                </td>\r\n              </template>\r\n            </div>\r\n            <td\r\n              v-show=\"displayed_sections[sectionIndex] == false\"\r\n              class=\"has-background-grey-lighter\"\r\n            />\r\n          </div>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { decodeSections, getCookie, removeExpositionSections, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      api_data: undefined,\r\n      form_responses: [],\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: {},\r\n      authorSearch: \"\",\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {}\r\n    };\r\n  },\r\n  created() {\r\n    const form = API.get(\"form/\".concat(this.$route.params.id))\r\n      .then((response) => \r\n        this.initializeData(response)\r\n      )\r\n    var queryString = \"formAnswer/?form=\".concat(this.$route.params.id);\r\n    if (this.$route.query.event !== undefined) {\r\n      queryString = queryString.concat(\"&event=\").concat(this.$route.query.event)\r\n      // API.get(\"event/\".concat(this.$route.query.event))\r\n      //  .then(response => this.event = response.data.name)\r\n      //  .catch((error) => console.log(error.response));\r\n    }\r\n    if (this.$route.query.user !== undefined) {\r\n      queryString = queryString.concat(\"&user=\").concat(this.$route.query.user)\r\n      // API.get(\"user/\".concat(this.$route.query.user))\r\n      //  .then(response => this.user = response.data.username);\r\n    }\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n        await form;\r\n        this.initializeAnswers(response)\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n    //this.interval = setInterval(() => this.getStatuses(), 10000);\r\n  },\r\n  methods: {\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    initializeData(response) {\r\n      this.api_data = removeExpositionSections(response.data);\r\n      for (var i = 0; i < this.api_data.form.sections.length; /*do nothing*/) {\r\n        if (this.api_data.form.sections[i].questions.length > 0)\r\n          this.displayed_sections[i++] = true;\r\n        else\r\n          this.api_data.form.sections.splice(i, 1);\r\n      }\r\n    },\r\n    initializeAnswers(response) {\r\n      this.form_responses = decodeSections(response.data, this.api_data);\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.authorSearch != \"\")\r\n        result = result.filter(x => stringIn(x.author === undefined ? \"Anónimo\" : x.author, this.authorSearch));\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      for (var sectionIndex = 0; sectionIndex < this.api_data.form.sections.length; sectionIndex++) {\r\n        if (this.displayed_sections[sectionIndex]) {\r\n          var section = this.api_data.form.sections[sectionIndex];\r\n          for (var questionIndex = 0; questionIndex < section.questions.length; questionIndex++) {\r\n            var question = section.questions[questionIndex]\r\n            if (question.filter && question.filter != \"\")\r\n              result = result.filter(x => stringIn(String(x.content.sections[sectionIndex][questionIndex].answer), question.filter));\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>","import { render } from \"./ViewAllResponses.vue?vue&type=template&id=577606f0\"\nimport script from \"./ViewAllResponses.vue?vue&type=script&lang=js\"\nexport * from \"./ViewAllResponses.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}