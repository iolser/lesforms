(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ac67b5a"],{"91ba":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=o("7a23"),c=Object(n["withScopeId"])("data-v-0d9e649c");Object(n["pushScopeId"])("data-v-0d9e649c");var s={key:0,class:"box"},a={ref:"formtitle",class:"title"},i=Object(n["createVNode"])("hr",null,null,-1),r={class:"steps has-content-centered mb-0"},d={class:"steps-marker"},u={class:"steps-content"},l={class:"steps-marker"},m=Object(n["createVNode"])("div",{class:"steps-content"},[Object(n["createVNode"])("p",null," Concluída ")],-1),p={key:0,class:"box"},b={key:0},f={key:0,class:"mt-4 mb-4",style:{width:"100%",height:"1px","background-color":"#ddd"}};Object(n["popScopeId"])();var j=c((function(e,t,o,c,j,O){var h=Object(n["resolveComponent"])("Submit");return j.api_data&&j.event&&j.form?(Object(n["openBlock"])(),Object(n["createBlock"])("div",s,[Object(n["createVNode"])("h1",a,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(j.api_data.title),1),j.event?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])(" ("+Object(n["toDisplayString"])(j.event.name)+") ",1)],64)):Object(n["createCommentVNode"])("",!0)],512),i,Object(n["createVNode"])("form",{id:"form-area",class:"flex column",method:"post",onSubmit:t[3]||(t[3]=Object(n["withModifiers"])((function(){return O.submit&&O.submit.apply(O,arguments)}),["prevent"]))},[Object(n["createVNode"])("ul",r,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.api_data.form.sections,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:e.id,class:["steps-segment is-primary",{"is-active":j.section==t,"has-gaps":j.section<=t}]},[Object(n["createVNode"])("span",d,[j.api_data.form.hide_section_numbers?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t+1),1)],64))]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])("p",{class:{"has-text-weight-bold":j.section==t}},Object(n["toDisplayString"])(e.section_name),3)])],2)})),128)),Object(n["createVNode"])("li",{class:["steps-segment is-primary",{"is-active":j.section==j.api_data.form.sections.length}]},[Object(n["createVNode"])("span",l,[j.api_data.form.hide_section_numbers?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(j.api_data.form.sections.length+1),1)],64))]),m],2)]),j.section<j.api_data.form.sections.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",p,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(j.api_data.form.sections[j.section].questions,(function(t,o){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.id,set:e.qid="s"+j.section+"_q"+o},[Object(n["createVNode"])("label",{class:["label",{required:t.required}],for:e.qid},[j.api_data.form.hide_question_numbers||j.api_data.form.sections[j.section].hide_question_numbers?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("span",b,Object(n["toDisplayString"])(o+1)+". ",1)),Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.question),1)],10,["for"]),(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(t.properties.field_type),{question:t,"question-index":o,"section-index":j.section,value:j.form.content.sections[j.section][o].answer,qid:e.qid,onUpdate:O.updateAnswer},null,8,["question","question-index","section-index","value","qid","onUpdate"])),o<j.api_data.form.sections[j.section].questions.length-1?(Object(n["openBlock"])(),Object(n["createBlock"])("hr",f)):Object(n["createCommentVNode"])("",!0)],8,["set"])})),128))])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:1,innerHTML:j.api_data.submit_message},null,8,["innerHTML"])),Object(n["createVNode"])(h,{error:j.response&&void 0===j.response.id,"error-message":"Houve um erro na submissão do formulário.","success-duration":"3000","success-message":j.success,loading:j.loading,"submit-text":j.section<j.api_data.form.sections.length-1?"Seguinte":"Submeter","cancel-text":j.section>0?"Anterior":"Sair","cancel-confirmation":0==j.section?"Deseja sair? <b>A sua resposta não será guardada.</br>":void 0,"cancel-conf-button":"Sair",hide:j.section==j.api_data.form.sections.length,onLeave:t[1]||(t[1]=function(e){return O.leave()}),onDismissed:t[2]||(t[2]=function(e){j.response=void 0,j.success=void 0})},null,8,["error","success-message","loading","submit-text","cancel-text","cancel-confirmation","hide"]),Object(n["createCommentVNode"])("",!0)],32)])):Object(n["createCommentVNode"])("",!0)})),O=o("1da1"),h=(o("96cf"),o("d3b7"),o("3ca3"),o("ddb0"),o("99af"),o("3f6f")),v=o("c427"),k=o("69d9"),g=o("1995"),_={name:"CreateResponse",components:Object.assign({},{Submit:g["a"]},h),data:function(){return{api_data:void 0,form:void 0,response:void 0,event:void 0,section:0,success:void 0,loading:!1}},created:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([v["a"].get("form/".concat(e.$route.params.id)).then((function(t){return e.api_data=t.data})),v["a"].get("event/".concat(e.$route.query.event)).then((function(t){return e.event=t.data}))]);case 2:if(null===(o=e.$route.query)||void 0===o||!o.edit){t.next=7;break}return t.next=5,v["a"].get("formAnswer/".concat(e.$route.query.edit)).then((function(t){return e.form=t.data}));case 5:t.next=8;break;case 7:e.form={content:{sections:[]},form:e.api_data.id,event:e.event.id};case 8:e.initializeData();case 9:case"end":return t.stop()}}),t)})))()},methods:{leave:function(){var e=this;this.section>0?(this.section--,this.$nextTick((function(){return e.$refs["formtitle"].scrollIntoView({behavior:"smooth"})}))):location.href="/forms"},submit:function(){var e=this;if(this.section<this.api_data.form.sections.length-1)this.section++,this.$nextTick((function(){return e.$refs["formtitle"].scrollIntoView({behavior:"smooth"})}));else{var t,o,n;this.loading=!0,void 0===this.form.id?(t="post",o="/formAnswer/",n="A resposta foi enviada com sucesso."):(t="put",o="/formAnswer/".concat(this.form.id).concat("/"),n="A resposta foi editada com sucesso.");var c={method:t,url:o,headers:{"X-CSRFToken":Object(k["b"])("csrftoken")},data:this.form,transformResponse:[function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=void 0;try{e.response=JSON.parse(o),e.form=e.response,e.success=n,e.section++}catch(c){e.response=o}return t.abrupt("return",e.response);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()]};Object(v["a"])(c)}},updateAnswer:function(e){this.form.content.sections[e.sectionIndex][e.questionIndex]["answer"]=e["answer"]},initializeData:function(){for(var e in this.api_data.form.sections)for(var t in this.form.content.sections[e]=[],this.api_data.form.sections[e].questions)this.form.content.sections[e][t]={field_type:this.api_data.form.sections[e].questions[t].properties["field_type"]}}}};o("a3cf");_.render=j,_.__scopeId="data-v-0d9e649c";t["default"]=_},"95ed":function(e,t,o){},a3cf:function(e,t,o){"use strict";o("95ed")}}]);
//# sourceMappingURL=chunk-1ac67b5a.3c1c07ce.js.map