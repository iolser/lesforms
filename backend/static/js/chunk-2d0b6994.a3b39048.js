(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6994"],{"1e9c":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("d3b7");var a=c("7a23"),o={key:0,id:"responses",class:"table-container box"},n={class:"table is-striped is-hoverable is-fullwidth",style:{border:"1px solid #dbdbdb"}},r={class:"mb-0 p-2"},s={class:"title"},i=Object(a["createVNode"])("br",null,null,-1),l={class:"subtitle"},d=Object(a["createTextVNode"])("Respostas "),b=Object(a["createVNode"])("th",{style:{"text-align":"center","vertical-align":"middle"}}," Resposta ",-1),u={key:0,style:{"text-align":"center","vertical-align":"middle"}},j=Object(a["createVNode"])("th",{style:{"text-align":"center","vertical-align":"middle"}}," Estado ",-1),O={class:"p-0"},p={class:"field"},m={class:"control has-icons-left"},h=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),k={key:0,class:"p-0"},f={class:"field"},V={class:"control has-icons-left"},N=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),v={class:"p-0"},g={class:"field"},y={class:"control has-icons-left"},B=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),S={key:0},_={class:"author"},w=Object(a["createTextVNode"])(" Anónimo "),x=Object(a["createVNode"])("br",null,null,-1),C={key:0},D={key:1,style:{"vertical-align":"middle"},align:"center"},F={key:0,class:"is-danger connection-error"},T={key:1,class:"flex column vca p-0"},q={class:"mr-2"},R=Object(a["createVNode"])("span",{class:"icon flex row vca",style:{"margin-top":"2px"}},[Object(a["createVNode"])("i",{class:"fas fa-eye"})],-1),A={class:"modal-card"},L={class:"modal-card-head"},z={class:"modal-card-title"},P={class:"modal-card-body"},$={class:"title"},E=Object(a["createVNode"])("hr",{class:"mt-0"},null,-1),I={class:"subtitle is-bold mb-2"},M=Object(a["createVNode"])("b",null," Resposta: ",-1),U=Object(a["createTextVNode"])(" Sem resposta "),J={class:"modal-card-foot flex row ca"},H={key:2},X={key:1},G={style:{height:"50px"}},K=Object(a["createVNode"])("td",null,null,-1),Q={key:0},W=Object(a["createVNode"])("td",null,null,-1),Y={style:{height:"50px"}},Z=Object(a["createVNode"])("td",null,null,-1),ee={key:0},te=Object(a["createVNode"])("td",null,null,-1),ce={style:{height:"50px"}},ae=Object(a["createVNode"])("td",null,null,-1),oe={key:0},ne=Object(a["createVNode"])("td",null,null,-1),re={style:{height:"50px"}},se=Object(a["createVNode"])("td",null,null,-1),ie={key:0},le=Object(a["createVNode"])("td",null,null,-1);function de(e,t,c,de,be,ue){return be.api_data?(Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("table",n,[Object(a["createVNode"])("caption",r,[Object(a["createVNode"])("span",s,Object(a["toDisplayString"])(be.api_data.title),1),i,Object(a["createVNode"])("span",l,[d,be.event?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(" para "+Object(a["toDisplayString"])(be.event),1)],64)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[b,be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("th",u," Evento ")),j]),Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",O,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",m,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return be.authorSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por autor"},null,512),[[a["vModelText"],be.authorSearch]]),h])])]),be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("th",k,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",V,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return be.eventSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por evento"},null,512),[[a["vModelText"],be.eventSearch]]),N])])])),Object(a["createVNode"])("th",v,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",y,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return be.statusSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por estado (Validada / Presente)"},null,512),[[a["vModelText"],be.statusSearch]]),B])])])])]),be.form_responses?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",S,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(ue.filteredResponses(),(function(e,t){var c;return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t},[Object(a["createVNode"])("td",_,[e.author?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,href:"/profile/"+e.answerer},Object(a["toDisplayString"])(e.author),9,["href"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[w],64)),Object(a["createVNode"])("span",{title:new Date(e.created_at).toLocaleString()},", há "+Object(a["toDisplayString"])(ue.timeSince(e.created_at)),9,["title"]),e.created_at!=e.updated_at?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:2,class:e.created_at!=e.updated_at?"edited":"",title:"Editado por "+(e.editor?e.editor:"Anónimo")+" há "+ue.timeSince(e.updated_at)+" ("+new Date(e.updated_at).toLocaleString()+")"},"*",10,["title"])):Object(a["createCommentVNode"])("",!0),x,Object(a["createVNode"])("a",{href:"/forms/respond/"+e.form+"/?event="+e.event+"&edit="+e.id},"Editar Resposta",8,["href"])]),be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",C,Object(a["toDisplayString"])(e.eventName),1)),be.statuses?(Object(a["openBlock"])(),Object(a["createBlock"])("td",D,["error"===be.loading_status[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("span",F," Houve um erro de conexão. Por favor recarregue a página. ")):(Object(a["openBlock"])(),Object(a["createBlock"])("div",T,[Object(a["createVNode"])("a",{class:"mb-2 is-size-5 flex row vca",onClick:function(t){return be.modal_open[e.id]=!0}},[Object(a["createVNode"])("span",q,Object(a["toDisplayString"])(null===(c=be.statuses)||void 0===c?void 0:c[be.answerStatuses[e.id]].name),1),R],8,["onClick"]),Object(a["createVNode"])("div",{class:["modal",{"is-active":be.modal_open[e.id]}]},[Object(a["createVNode"])("div",{class:"modal-background",onClick:function(t){return be.modal_open[e.id]=void 0}},null,8,["onClick"]),Object(a["createVNode"])("div",A,[Object(a["createVNode"])("header",L,[Object(a["createVNode"])("p",z," Resposta de "+Object(a["toDisplayString"])(e.author),1),Object(a["createVNode"])("button",{class:"delete","aria-label":"close",onClick:function(t){return be.modal_open[e.id]=void 0}},null,8,["onClick"])]),Object(a["createVNode"])("section",P,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.content.sections,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,style:{display:"contents"}},[Object(a["createVNode"])("span",$,[be.api_data.form.hide_section_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t+1)+". ",1)],64)),Object(a["createTextVNode"])(Object(a["toDisplayString"])(be.api_data.form.sections[t].section_name),1)]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:c,class:"flex column"},["text_exposition"!=e.field_type?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[E,Object(a["createVNode"])("span",I,[be.api_data.form.hide_section_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t+1)+".",1)],64)),be.api_data.form.hide_question_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c+1)+".",1)],64)),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(be.api_data.form.sections[t].questions[c].question),1)]),Object(a["createVNode"])("span",null,[M,void 0!==e.answer?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},["[object Array]"===Object.prototype.toString.call(e.answer)?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(e.answer,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},Object(a["toDisplayString"])(e),1)})),128)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.answer),1)],64))],64)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[U],64))])],64)):Object(a["createCommentVNode"])("",!0)])})),128))])})),128))]),Object(a["createVNode"])("footer",J,[1==be.answerStatuses[e.id]||2==be.answerStatuses[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,class:[{"is-loading":"loading"===be.loading_status[e.id]},"button is-danger"],type:"button",onClick:function(t){be.answerStatuses[e.id]=3,ue.changeStatus(e.id,be.answerStatuses[e.id])}}," Invalidar Inscrição ",10,["onClick"])):Object(a["createCommentVNode"])("",!0),1==be.answerStatuses[e.id]||3==be.answerStatuses[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:1,class:[{"is-loading":"loading"===be.loading_status[e.id]},"button is-success"],type:"button",onClick:function(t){be.answerStatuses[e.id]=2,ue.changeStatus(e.id,be.answerStatuses[e.id])}}," Validar Inscrição ",10,["onClick"])):Object(a["createCommentVNode"])("",!0)])])],2)]))])):(Object(a["openBlock"])(),Object(a["createBlock"])("td",H," A carregar... "))])})),128))])):(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",X,[Object(a["createVNode"])("tr",G,[K,be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",Q)),W]),Object(a["createVNode"])("tr",Y,[Z,be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",ee)),te]),Object(a["createVNode"])("tr",ce,[ae,be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",oe)),ne]),Object(a["createVNode"])("tr",re,[se,be.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",ie)),le])]))])])):Object(a["createCommentVNode"])("",!0)}var be=c("1da1"),ue=(c("96cf"),c("99af"),c("a434"),c("4de4"),c("3f6f")),je=c("c427"),Oe=c("69d9"),pe={name:"ViewAllResponses",components:ue,data:function(){return{api_data:void 0,form_responses:void 0,displayed_sections:[],event:void 0,user:void 0,statuses:void 0,authorSearch:"",eventSearch:"",statusSearch:"",answerStatuses:[],interval:void 0,loading_status:{},modal_open:{}}},created:function(){var e=this,t=je["a"].get("form/".concat(this.$route.params.id)).then((function(t){return e.initializeData(t)})),c="formAnswer/?form=".concat(this.$route.params.id);void 0!==this.$route.query.event&&(c=c.concat("&event=").concat(this.$route.query.event),je["a"].get("event/".concat(this.$route.query.event)).then((function(t){return e.event=t.data.name}))),je["a"].get(c).then(function(){var c=Object(be["a"])(regeneratorRuntime.mark((function c(a){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,t;case 2:e.initializeAnswers(a);case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()),je["a"].get("answerStatus/").then((function(t){e.statuses=t.data})),this.getStatuses()},methods:{getStatuses:function(){var e=this;je["a"].get("formAnswerStatus/").then((function(t){e.answerStatuses=t.data}))},changeStatus:function(e,t){this.loading_status[e]="loading",setTimeout(this.patchStatus.bind(this,e,t),0)},patchStatus:function(e,t){var c=this,a={method:"patch",url:"/formAnswerStatus/"+e+"/",headers:{"X-CSRFToken":Object(Oe["b"])("csrftoken")},data:{status:t},transformResponse:[function(e){return c.response=e,e}]};Object(je["a"])(a).then((function(){return c.loading_status[e]=void 0})).catch((function(t){console.log(t),c.loading_status[e]="error",c.answerStatuses[e]="error"}))},initializeData:function(e){this.api_data=e.data;for(var t=0;t<this.api_data.form.sections.length;)this.api_data.form.sections[t].questions.length>0?this.displayed_sections[t++]=!0:this.api_data.form.sections.splice(t,1)},initializeAnswers:function(e){this.form_responses=Object(Oe["a"])(e.data,this.api_data)},allFalse:function(){for(var e=0;e<this.displayed_sections.length;e++)if(1==this.displayed_sections[e])return!1;return!0},filteredResponses:function(){var e=this,t=this.form_responses;""!=this.authorSearch&&(t=t.filter((function(t){return Object(Oe["e"])(void 0===t.author?"Anónimo":t.author,e.authorSearch)}))),""!=this.eventSearch&&(t=t.filter((function(t){return!!t.eventName&&Object(Oe["e"])(t.eventName,e.eventSearch)}))),""!=this.statusSearch&&(t=t.filter((function(t){return Object(Oe["e"])(e.statuses[e.answerStatuses[t.id]].name,e.statusSearch)})));for(var c=0;c<this.api_data.form.sections.length;c++)if(this.displayed_sections[c])for(var a=this.api_data.form.sections[c],o=0;o<a.questions.length;o++){var n=a.questions[o];n.filter&&""!=n.filter&&(t=t.filter((function(e){return Object(Oe["e"])(String(e.content.sections[c][o].answer),n.filter)})))}return t},timeSince:Oe["f"]}};pe.render=de;t["default"]=pe}}]);
//# sourceMappingURL=chunk-2d0b6994.a3b39048.js.map