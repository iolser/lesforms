{"version":3,"sources":["webpack:///./src/views/ValidateSignup.vue","webpack:///./src/views/ValidateSignup.vue?4bb6"],"names":["id","class","style","align","api_data","title","event","authorSearch","type","placeholder","eventSearch","statusSearch","form_responses","filteredResponses","response","responseIndex","key","author","href","answerer","Date","created_at","toLocaleString","timeSince","updated_at","editor","form","eventName","statuses","loading_status","modal_open","answerStatuses","name","undefined","aria-label","content","sections","section","sectionIndex","hide_section_numbers","section_name","answer","answerIndex","field_type","hide_question_numbers","questions","question","Object","prototype","toString","call","option","optionIndex","changeStatus","components","data","displayed_sections","user","interval","created","get","concat","this","$route","params","then","initializeData","queryString","query","initializeAnswers","getStatuses","methods","status","setTimeout","patchStatus","bind","options","method","url","headers","transformResponse","catch","error","console","log","i","length","splice","allFalse","result","filter","x","questionIndex","String","render"],"mappings":"sKAGIA,GAAG,YACHC,MAAM,uB,GAGJA,MAAM,6CACNC,MAAA,8B,GAESD,MAAM,Y,GACPA,MAAM,S,EAAmC,yBAAI,mB,GAAMA,MAAM,Y,+BAAW,c,EAQxE,yBAIK,MAHHC,MAAA,mDACD,cAED,G,SAGEA,MAAA,mD,EAIF,yBAIK,MAHHA,MAAA,mDACD,YAED,G,GAGID,MAAM,O,GACHA,MAAM,S,GACJA,MAAM,0B,EAOT,yBAEO,QAFDA,MAAM,yBAAuB,CACjC,yBAA2B,KAAxBA,MAAM,oB,YAOfA,MAAM,O,GAEDA,MAAM,S,GACJA,MAAM,0B,EAOT,yBAEO,QAFDA,MAAM,yBAAuB,CACjC,yBAA2B,KAAxBA,MAAM,oB,MAKbA,MAAM,O,GACHA,MAAM,S,GACJA,MAAM,0B,EAOT,yBAEO,QAFDA,MAAM,yBAAuB,CACjC,yBAA2B,KAAxBA,MAAM,oB,gBAYbA,MAAM,U,+BAKS,a,EAQR,yBAAI,mB,mBAUbC,MAAA,4BACAC,MAAM,U,SAIJF,MAAM,8B,SAMNA,MAAM,uB,GAKCA,MAAM,Q,EACX,yBAGgC,QAF9BA,MAAM,oBACNC,MAAA,sB,CACD,yBAAwB,KAArBD,MAAM,iB,MAWRA,MAAM,c,GAEEA,MAAM,mB,GACTA,MAAM,oB,GASFA,MAAM,mB,GAMLA,MAAM,S,EASR,yBAAiB,MAAbA,MAAM,QAAM,S,GACVA,MAAM,yB,EAOV,yBAEI,SAFD,eAEH,G,+BAciB,kB,GAQnBA,MAAM,+B,uBA8BpBC,MAAA,iB,EACF,yBAAM,mB,YAEN,yBAAM,mB,GAEJA,MAAA,iB,EACF,yBAAM,mB,cAEN,yBAAM,mB,IAEJA,MAAA,iB,GACF,yBAAM,mB,cAEN,yBAAM,mB,IAEJA,MAAA,iB,GACF,yBAAM,mB,cAEN,yBAAM,mB,mCA3PN,GAAAE,U,yBADR,yBAgQM,MAhQN,EAgQM,CA3PJ,yBA0PQ,QA1PR,EA0PQ,CAtPN,yBAMU,UANV,EAMU,CALR,yBAA+C,OAA/C,EAA+C,6BAAxB,GAAAA,SAASC,OAAK,GAAU,EAAI,yBAI5C,OAJ4C,EAI5C,C,EAHW,GAAAC,O,yBAAhB,yBAEW,uB,6BAFY,SAChB,6BAAG,GAAAA,OAAK,I,gDAInB,yBAqEQ,cApEN,yBAiBK,WAhBH,EAMS,GAAAA,M,iEADT,yBAKK,KALL,EAGC,aAGD,IAMF,yBAiDK,WAhDH,yBAcK,KAdL,EAcK,CAbH,yBAYM,MAZN,EAYM,CAXJ,yBAUM,MAVN,EAUM,C,4BATJ,yBAKC,S,qDAJU,GAAAC,aAAY,IACrBC,KAAK,OACLP,MAAM,6BACNQ,YAAY,uB,4BAHH,GAAAF,gBAKX,QAOG,GAAAD,M,iEADT,yBAiBK,KAjBL,EAiBK,CAbH,yBAYM,MAZN,EAYM,CAXJ,yBAUM,MAVN,EAUM,C,4BATJ,yBAKC,S,qDAJU,GAAAI,YAAW,IACpBF,KAAK,OACLP,MAAM,6BACNQ,YAAY,wB,4BAHH,GAAAC,eAKX,SAMN,yBAcK,KAdL,EAcK,CAbH,yBAYM,MAZN,EAYM,CAXJ,yBAUM,MAVN,EAUM,C,4BATJ,yBAKC,S,qDAJU,GAAAC,aAAY,IACrBH,KAAK,OACLP,MAAM,6BACNQ,YAAY,8C,4BAHH,GAAAE,gBAKX,YAQG,GAAAC,gB,yBAAb,yBAkJQ,Y,2BAjJN,yBAgJK,2CA/IiC,GAAAC,qBAAiB,SAA7CC,EAAUC,GAAa,M,gCADjC,yBAgJK,MA9IFC,IAAKD,GAAa,CAEnB,yBAiBK,KAjBL,EAiBK,CAfKD,EAASG,Q,yBADjB,yBAG6B,Q,MAD1BC,KAAI,YAAcJ,EAASK,U,6BAC1BL,EAASG,QAAM,c,yBACnB,yBAEW,uB,QAAA,yBAEsC,QAD9CZ,MAAK,IAAMe,KAAKN,EAASO,YAAYC,kBACvC,QAAK,6BAAG,GAAAC,UAAUT,EAASO,aAAU,aAC9BP,EAASO,YAAcP,EAASU,Y,yBADS,yBAIxC,Q,MAFNvB,MAAOa,EAASO,YAAcP,EAASU,WAAU,YACjDnB,MAAK,gBAAqBS,EAASW,OAAqBX,EAASW,OAAxB,WAA8B,OAAa,GAAAF,UAAUT,EAASU,YAAU,SAAeJ,KAAKN,EAASU,YAAYF,iBAAc,KAC1K,IAAC,e,uCAAO,EACT,yBAEoB,KADjBJ,KAAI,kBAAsBJ,EAASY,KAAI,WAAgBZ,EAASR,MAAK,SAAcQ,EAASd,IAC9F,kBAAe,cAEP,GAAAM,M,iEAAX,yBAEK,oCADAQ,EAASa,WAAS,IAGf,GAAAC,U,yBADR,yBAmHK,KAnHL,EAmHK,CA7G+B,UAA1B,GAAAC,eAAef,EAASd,K,yBADhC,yBAKO,OALP,EAGC,gE,yBAGD,yBAuGM,MAvGN,EAuGM,CAnGJ,yBAQI,KAPFC,MAAM,8BACL,QAAK,mBAAE,GAAA6B,WAAWhB,EAASd,KAAE,I,CAC/B,yBAA4E,OAA5E,EAA4E,uCAAtD,GAAA4B,gBAAsD,aAAtD,EAAW,GAAAG,eAAejB,EAASd,KAAKgC,MAAI,GACjE,G,eAKF,yBAyFM,OAxFJ/B,MAAK,CAAC,QAAO,aACU,GAAA6B,WAAWhB,EAASd,O,CAE3C,yBAGE,OAFAC,MAAM,mBACL,QAAK,mBAAE,GAAA6B,WAAWhB,EAASd,SAAMiC,I,oBAEpC,yBAgFM,MAhFN,EAgFM,CA7EJ,yBASS,SATT,EASS,CARP,yBAEI,IAFJ,EAA4B,gBACd,6BAAGnB,EAASG,QAAM,GAEhC,yBAIE,UAHAhB,MAAM,SACNiC,aAAW,QACV,QAAK,mBAAE,GAAAJ,WAAWhB,EAASd,SAAMiC,I,sBAGtC,yBA8CU,UA9CV,EA8CU,E,2BA7CR,yBA4CM,2CA3C8BnB,EAASqB,QAAQC,UAAQ,SAAnDC,EAASC,G,gCADnB,yBA4CM,OA1CHtB,IAAKsB,EACNpC,MAAA,sB,CAEA,yBAEO,OAFP,EAEO,CAF8B,GAAAE,SAASsB,KAAKa,qB,iEAA/B,yBACe,uB,0DAA9BD,EAAY,GAAK,KAAE,I,+DAAc,GAAAlC,SAASsB,KAAKU,SAASE,GAAcE,cAAY,M,2BAEvF,yBAmCM,2CAlC4BH,GAAO,SAA/BI,EAAQC,G,gCADlB,yBAmCM,OAjCH1B,IAAK0B,EACNzC,MAAM,e,CAE2B,mBAAjBwC,EAAOE,Y,yBAAvB,yBA6BW,uBA5BT,EACA,yBAKO,OALP,EAKO,CAJY,GAAAvC,SAASsB,KAAKa,qB,iEAA/B,yBACkC,uB,0DAA7BD,EAAY,GAAK,IAAC,I,KACN,GAAAlC,SAASsB,KAAKkB,sB,iEAA/B,yBACiC,uB,0DAA5BF,EAAW,GAAK,IAAC,I,kCAAW,IAAC,6BAAG,GAAAtC,SAASsB,KAAKU,SAASE,GAAcO,UAAUH,GAAaI,UAAQ,KAE3G,yBAoBO,aAnBL,OAGkCb,IAAlBQ,EAAOA,Q,yBAAvB,yBAYW,uBAXoD,mBAA7CM,OAAOC,UAAUC,SAASC,KAAMT,EAAOA,S,2BACrD,yBAKK,8CAJ6BA,EAAOA,QAAM,SAArCU,EAAQC,G,gCADlB,yBAKK,MAHFpC,IAAKoC,GAAW,6BAEdD,GAAM,M,gCAGb,yBAEW,uB,0DADNV,EAAOA,QAAM,I,qCAGpB,yBAEW,uB,+EAMrB,yBAmBS,SAnBT,EAmBS,CAjB2B,GAA1B,GAAAV,eAAejB,EAASd,KAAsC,GAA1B,GAAA+B,eAAejB,EAASd,K,yBADpE,yBAQS,U,MANNC,MAAK,eAA4C,YAA1B,GAAA4B,eAAef,EAASd,KAE1C,oBADNQ,KAAK,SAEJ,QAAK,YAAE,GAAAuB,eAAejB,EAASd,IAAE,EAAO,GAAAqD,aAAavC,EAASd,GAAI,GAAA+B,eAAejB,EAASd,OAC5F,wBAED,iB,uCAEkC,GAA1B,GAAA+B,eAAejB,EAASd,KAAsC,GAA1B,GAAA+B,eAAejB,EAASd,K,yBADpE,yBAQS,U,MANNC,MAAK,eAA4C,YAA1B,GAAA4B,eAAef,EAASd,KAE1C,qBADNQ,KAAK,SAEJ,QAAK,YAAE,GAAAuB,eAAejB,EAASd,IAAE,EAAO,GAAAqD,aAAavC,EAASd,GAAI,GAAA+B,eAAejB,EAASd,OAC5F,sBAED,iB,+EAMV,yBAEK,OAFM,yB,mCAKf,yBAqBQ,WApBN,yBAIK,KAJL,EAIK,CAHH,EACW,GAAAM,M,iEAAX,yBAAoB,SACpB,IAEF,yBAIK,KAJL,EAIK,CAHH,EACW,GAAAA,M,iEAAX,yBAAoB,UACpB,KAEF,yBAIK,KAJL,GAIK,CAHH,GACW,GAAAA,M,iEAAX,yBAAoB,UACpB,KAEF,yBAIK,KAJL,GAIK,CAHH,GACW,GAAAA,M,iEAAX,yBAAoB,UACpB,a,yIAWK,IACb0B,KAAM,mBACNsB,WAAA,GACAC,KAHa,WAIX,MAAO,CACLnD,cAAU6B,EACVrB,oBAAgBqB,EAChBuB,mBAAoB,GACpBlD,WAAO2B,EACPwB,UAAMxB,EACNL,cAAUK,EACV1B,aAAc,GACdG,YAAa,GACbC,aAAc,GACdoB,eAAgB,GAChB2B,cAAWzB,EACXJ,eAAiB,GACjBC,WAAa,KAGjB6B,QApBa,WAoBH,WACFjC,EAAO,QAAIkC,IAAI,QAAQC,OAAOC,KAAKC,OAAOC,OAAOhE,KACpDiE,MAAK,SAACnD,GAAD,OACJ,EAAKoD,eAAepD,MAEpBqD,EAAc,oBAAoBN,OAAOC,KAAKC,OAAOC,OAAOhE,SAChCiC,IAA5B6B,KAAKC,OAAOK,MAAM9D,QACpB6D,EAAcA,EAAYN,OAAO,WAAWA,OAAOC,KAAKC,OAAOK,MAAM9D,OACrE,QAAIsD,IAAI,SAASC,OAAOC,KAAKC,OAAOK,MAAM9D,QACxC2D,MAAK,SAAAnD,GAAO,OAAK,EAAKR,MAAQQ,EAASyC,KAAKvB,SAOhD,QAAI4B,IAAIO,GACLF,KADH,0DACQ,WAAOnD,GAAP,iGACIY,EADJ,OAEF,EAAK2C,kBAAkBvD,GAFrB,2CADR,uDAOA,QAAI8C,IAAI,iBACLK,MAAK,SAACnD,GACL,EAAKc,SAAWd,EAASyC,QAE7BO,KAAKQ,eAGPC,QAAS,CACPD,YADO,WACO,WACZ,QAAIV,IAAI,qBACPK,MAAK,SAACnD,GACL,EAAKiB,eAAiBjB,EAASyC,SAGnCF,aAPO,SAOMZ,EAAQ+B,GACnBV,KAAKjC,eAAeY,GAAU,UAC9BgC,WAAWX,KAAKY,YAAYC,KAAKb,KAAMrB,EAAQ+B,GAAS,IAE1DE,YAXO,SAWKjC,EAAQ+B,GAAQ,WACpBI,EAAU,CACdC,OAAQ,QACRC,IAAK,qBAAuBrC,EAAS,IACrCsC,QAAS,CACP,cAAe,gBAAU,cAE3BxB,KAAM,CACJ,OAAUiB,GAEZQ,kBAAmB,CACjB,SAACzB,GAEC,OADA,EAAKzC,SAAWyC,EACTA,KAIb,gBAAIqB,GACDX,MAAK,kBAAM,EAAKpC,eAAeY,QAAUR,KACzCgD,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZ,EAAKrD,eAAeY,GAAU,QAC9B,EAAKV,eAAeU,GAAU,YAGpCyB,eApCO,SAoCQpD,GACbgD,KAAK1D,SAAWU,EAASyC,KACzB,IAAK,IAAI8B,EAAI,EAAGA,EAAIvB,KAAK1D,SAASsB,KAAKU,SAASkD,QAC1CxB,KAAK1D,SAASsB,KAAKU,SAASiD,GAAGxC,UAAUyC,OAAS,EACpDxB,KAAKN,mBAAmB6B,MAAO,EAE/BvB,KAAK1D,SAASsB,KAAKU,SAASmD,OAAOF,EAAG,IAG5ChB,kBA7CO,SA6CWvD,GAChBgD,KAAKlD,eAAiB,gBAAeE,EAASyC,KAAMO,KAAK1D,WAE3DoF,SAhDO,WAiDL,IAAK,IAAIH,EAAI,EAAGA,EAAIvB,KAAKN,mBAAmB8B,OAAQD,IAClD,GAAkC,GAA9BvB,KAAKN,mBAAmB6B,GAC1B,OAAO,EACX,OAAO,GAETxE,kBAtDO,WAsDa,WACd4E,EAAS3B,KAAKlD,eACO,IAArBkD,KAAKvD,eACPkF,EAASA,EAAOC,QAAO,SAAAC,GAAA,OAAK,qBAAsB1D,IAAb0D,EAAE1E,OAAuB,UAAY0E,EAAE1E,OAAQ,EAAKV,kBACnE,IAApBuD,KAAKpD,cACP+E,EAASA,EAAOC,QAAO,SAAAC,GAAM,QAAOA,EAAEhE,WAAY,gBAASgE,EAAEhE,UAAW,EAAKjB,iBACtD,IAArBoD,KAAKnD,eACP8E,EAASA,EAAOC,QAAO,SAAAC,GAAA,OAAK,gBAAS,EAAK/D,SAAS,EAAKG,eAAe4D,EAAE3F,KAAKgC,KAAM,EAAKrB,kBAC3F,IAAK,IAAI2B,EAAe,EAAGA,EAAewB,KAAK1D,SAASsB,KAAKU,SAASkD,OAAQhD,IAC5E,GAAIwB,KAAKN,mBAAmBlB,GAE1B,IADA,IAAID,EAAUyB,KAAK1D,SAASsB,KAAKU,SAASE,GACjCsD,EAAgB,EAAGA,EAAgBvD,EAAQQ,UAAUyC,OAAQM,IAAiB,CACrF,IAAI9C,EAAWT,EAAQQ,UAAU+C,GAC7B9C,EAAS4C,QAA6B,IAAnB5C,EAAS4C,SAC9BD,EAASA,EAAOC,QAAO,SAAAC,GAAA,OAAK,gBAASE,OAAOF,EAAExD,QAAQC,SAASE,GAAcsD,GAAenD,QAASK,EAAS4C,YAItH,OAAOD,GAETlE,UAAW,UCjYf,GAAOuE,OAASA,GAED","file":"js/chunk-2d0b6994.a3b39048.js","sourcesContent":["<template>\r\n  <div\r\n    v-if=\"api_data\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">{{ api_data.title }}</span><br><span class=\"subtitle\">Respostas\r\n          <template v-if=\"event\">\r\n            para {{ event }}\r\n          </template>\r\n        </span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Resposta\r\n          </th>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Estado\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"authorSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por autor\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado (Validada / Presente)\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"form_responses\">\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td class=\"author\">\r\n            <span\r\n              v-if=\"response.author\"\r\n              :href=\"'/profile/'+response.answerer\"\r\n            >{{ response.author }}</span>\r\n            <template v-else>\r\n              Anónimo\r\n            </template><span\r\n              :title=\"new Date(response.created_at).toLocaleString()\"\r\n            >, há {{ timeSince(response.created_at) }}</span><span\r\n              v-if=\"response.created_at != response.updated_at\"\r\n              :class=\"response.created_at != response.updated_at ? 'edited' : ''\"\r\n              :title=\"'Editado por ' + (!response.editor ? 'Anónimo' : response.editor) + ' há ' + timeSince(response.updated_at) + ' (' + new Date(response.updated_at).toLocaleString() + ')'\"\r\n            >*</span><br>\r\n            <a\r\n              :href=\"'/forms/respond/' + response.form + '/?event=' + response.event + '&edit=' + response.id\"\r\n            >Editar Resposta</a>\r\n          </td>\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td\r\n            v-if=\"statuses\"\r\n            style=\"vertical-align: middle;\"\r\n            align=\"center\"\r\n          >\r\n            <span\r\n              v-if=\"loading_status[response.id] === 'error'\"\r\n              class=\"is-danger connection-error\"\r\n            >\r\n              Houve um erro de conexão. Por favor recarregue a página.\r\n            </span>\r\n            <div\r\n              v-else\r\n              class=\"flex column vca p-0\"\r\n            >\r\n              <a\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n                @click=\"modal_open[response.id] = true\"\r\n              ><span class=\"mr-2\">{{ statuses?.[answerStatuses[response.id]].name }}</span>\r\n                <span\r\n                  class=\"icon flex row vca\"\r\n                  style=\"margin-top: 2px;\"\r\n                ><i class=\"fas fa-eye\" /></span>\r\n              </a>\r\n              <div\r\n                class=\"modal\"\r\n                :class=\"{'is-active' : modal_open[response.id]}\"\r\n              >\r\n                <div\r\n                  class=\"modal-background\" \r\n                  @click=\"modal_open[response.id] = undefined\"\r\n                />\r\n                <div\r\n                  class=\"modal-card\"\r\n                >\r\n                  <header class=\"modal-card-head\">\r\n                    <p class=\"modal-card-title\">\r\n                      Resposta de {{ response.author }}\r\n                    </p>\r\n                    <button\r\n                      class=\"delete\"\r\n                      aria-label=\"close\"\r\n                      @click=\"modal_open[response.id] = undefined\"\r\n                    />\r\n                  </header>\r\n                  <section class=\"modal-card-body\">  \r\n                    <div\r\n                      v-for=\"(section, sectionIndex) in response.content.sections\"\r\n                      :key=\"sectionIndex\"\r\n                      style=\"display: contents;\"\r\n                    >\r\n                      <span class=\"title\"><template v-if=\"!api_data.form.hide_section_numbers\">\r\n                        {{ sectionIndex+1 }}. </template>{{ api_data.form.sections[sectionIndex].section_name }}\r\n                      </span>\r\n                      <div\r\n                        v-for=\"(answer, answerIndex) in section\"\r\n                        :key=\"answerIndex\"\r\n                        class=\"flex column\"\r\n                      >\r\n                        <template v-if=\"answer.field_type != 'text_exposition'\">\r\n                          <hr class=\"mt-0\">\r\n                          <span class=\"subtitle is-bold mb-2\">\r\n                            <template v-if=\"!api_data.form.hide_section_numbers\">\r\n                              {{ sectionIndex+1 }}.</template>\r\n                            <template v-if=\"!api_data.form.hide_question_numbers\">\r\n                              {{ answerIndex+1 }}.</template> {{ api_data.form.sections[sectionIndex].questions[answerIndex].question }}\r\n                          </span>\r\n                          <span>\r\n                            <b>\r\n                              Resposta: \r\n                            </b>\r\n                            <template v-if=\"answer.answer !== undefined\">\r\n                              <template v-if=\"Object.prototype.toString.call( answer.answer ) === '[object Array]'\">\r\n                                <li\r\n                                  v-for=\"(option, optionIndex) in answer.answer\"\r\n                                  :key=\"optionIndex\"\r\n                                >\r\n                                  {{ option }}\r\n                                </li>\r\n                              </template>\r\n                              <template v-else>\r\n                                {{ answer.answer }}\r\n                              </template>\r\n                            </template>\r\n                            <template v-else>\r\n                              Sem resposta\r\n                            </template>\r\n                          </span>\r\n                        </template>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                  <footer class=\"modal-card-foot flex row ca\">\r\n                    <button\r\n                      v-if=\"answerStatuses[response.id] == 1 || answerStatuses[response.id] == 2\"\r\n                      :class=\"{'is-loading' : loading_status[response.id] === 'loading'}\"\r\n                      type=\"button\"\r\n                      class=\"button is-danger\"\r\n                      @click=\"answerStatuses[response.id] = 3; changeStatus(response.id, answerStatuses[response.id])\"\r\n                    >\r\n                      Invalidar Inscrição\r\n                    </button>\r\n                    <button\r\n                      v-if=\"answerStatuses[response.id] == 1 || answerStatuses[response.id] == 3\"\r\n                      :class=\"{'is-loading' : loading_status[response.id] === 'loading'}\"\r\n                      type=\"button\"\r\n                      class=\"button is-success\"\r\n                      @click=\"answerStatuses[response.id] = 2; changeStatus(response.id, answerStatuses[response.id])\"\r\n                    >\r\n                      Validar Inscrição\r\n                    </button>\r\n                  </footer>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </td>\r\n          <td v-else>\r\n            A carregar...\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { decodeSections, getCookie, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      api_data: undefined,\r\n      form_responses: undefined,\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: undefined,\r\n      authorSearch: \"\",\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {},\r\n      modal_open : {}\r\n    };\r\n  },\r\n  created() {\r\n    const form = API.get(\"form/\".concat(this.$route.params.id))\r\n      .then((response) => \r\n        this.initializeData(response)\r\n      )\r\n    var queryString = \"formAnswer/?form=\".concat(this.$route.params.id);\r\n    if (this.$route.query.event !== undefined) {\r\n      queryString = queryString.concat(\"&event=\").concat(this.$route.query.event)\r\n      API.get(\"event/\".concat(this.$route.query.event))\r\n       .then(response => this.event = response.data.name)\r\n    }\r\n    // if (this.$route.query.user !== undefined) {\r\n    //   queryString = queryString.concat(\"&user=\").concat(this.$route.query.user)\r\n    //   API.get(\"user/\".concat(this.$route.query.user))\r\n    //    .then(response => this.user = response.data.username);\r\n    // }\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n          await form;\r\n          this.initializeAnswers(response)\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n    //this.interval = setInterval(() => this.getStatuses(), 10000);\r\n  },\r\n  methods: {\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    initializeData(response) {\r\n      this.api_data = response.data;\r\n      for (var i = 0; i < this.api_data.form.sections.length; /*do nothing*/) {\r\n        if (this.api_data.form.sections[i].questions.length > 0)\r\n          this.displayed_sections[i++] = true;\r\n        else\r\n          this.api_data.form.sections.splice(i, 1);\r\n      }\r\n    },\r\n    initializeAnswers(response) {\r\n      this.form_responses = decodeSections(response.data, this.api_data);\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.authorSearch != \"\")\r\n        result = result.filter(x => stringIn(x.author === undefined ? \"Anónimo\" : x.author, this.authorSearch));\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      for (var sectionIndex = 0; sectionIndex < this.api_data.form.sections.length; sectionIndex++) {\r\n        if (this.displayed_sections[sectionIndex]) {\r\n          var section = this.api_data.form.sections[sectionIndex];\r\n          for (var questionIndex = 0; questionIndex < section.questions.length; questionIndex++) {\r\n            var question = section.questions[questionIndex]\r\n            if (question.filter && question.filter != \"\")\r\n              result = result.filter(x => stringIn(String(x.content.sections[sectionIndex][questionIndex].answer), question.filter));\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>\r\n","import { render } from \"./ValidateSignup.vue?vue&type=template&id=0c005810\"\nimport script from \"./ValidateSignup.vue?vue&type=script&lang=js\"\nexport * from \"./ValidateSignup.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}