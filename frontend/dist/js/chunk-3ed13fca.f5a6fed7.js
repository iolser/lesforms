(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed13fca"],{"0aa7":function(e,t,n){},"0e7b":function(e,t,n){"use strict";n("0aa7")},1995:function(e,t,n){"use strict";var r=n("7a23"),o={class:"field is-grouped is-grouped-centered"},i={class:"control"},a={key:0,class:"control"},s={key:1,class:"control"},c={key:2,class:"control"};function l(e,t,n,l,u,d){var p=this,f=Object(r["resolveComponent"])("Notification");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[n.error?(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:0,class:["flex row ca snackbar ontop",n.floatBottom?"bottom":"top"]},[Object(r["createVNode"])(f,{message:n.errorMessage,duration:n.errorDuration,bottom:n.floatBottom,class:"is-danger subtitle",onDeleted:t[1]||(t[1]=function(t){return e.$emit("dismissed")})},null,8,["message","duration","bottom"])],2)):n.successMessage?(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:1,class:["flex row ca snackbar ontop",n.floatBottom?"bottom":"top"]},[Object(r["createVNode"])(f,{message:n.successMessage,bottom:n.floatBottom,duration:n.successDuration,class:"is-success is-light",onDeleted:t[2]||(t[2]=function(t){return e.$emit("dismissed")})},null,8,["message","bottom","duration"])],2)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(r["Transition"],{name:"slide-fade-bottom",mode:"out-in"},{default:Object(r["withCtx"])((function(){return[n.hide?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:0,class:["flex row ca",{"snackbar bottom":n.floatBottom}]},[Object(r["createVNode"])("div",{class:{"box has-background-link-dark":n.floatBottom}},[u.confirmingCancel?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:0,class:["level",{"has-text-light":n.floatBottom}],innerHTML:n.cancelConfirmation},null,10,["innerHTML"])):Object(r["createCommentVNode"])("",!0),u.confirmingSubmit?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:1,class:["level",{"has-text-light":n.floatBottom}],innerHTML:n.submitConfirmation},null,10,["innerHTML"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",o,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("button",{type:"button",class:["button",{"is-loading":!0===n.loading,"is-link is-light":!n.redGreen,"is-danger is-light":n.redGreen}],onClick:t[3]||(t[3]=function(e){return d.cancel()})},Object(r["toDisplayString"])(void 0===n.cancelText||u.confirmingCancel?"Cancelar":n.cancelText),3)]),u.confirmingCancel?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])("button",{type:"button",class:["button is-danger",{"is-loading":!0===n.loading}],onClick:t[4]||(t[4]=function(e){u.confirmingCancel=!1,p.$emit("leave")})},Object(r["toDisplayString"])(void 0!==n.cancelConfButton?n.cancelConfButton:"Confirmar"),3)])):u.confirmingSubmit?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("button",{type:"submit",class:["button is-success",{"is-loading":!0===n.loading}]},Object(r["toDisplayString"])(void 0!==n.submitConfButton?n.submitConfButton:"Confirmar"),3)])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",c,[Object(r["createVNode"])("button",{type:n.submitConfirmation?"button":"submit",class:["button",{"is-loading":!0===n.loading,"is-link":!n.redGreen,"is-success is-light":n.redGreen}],onClick:t[5]||(t[5]=function(e){return d.submit()})},Object(r["toDisplayString"])(void 0!==n.submitText?n.submitText:"Submeter"),11,["type"])]))])],2)],2))]})),_:1})])}var u=n("2b9d"),d={components:{Notification:u["a"]},name:"Submit",data:function(){return{confirmingCancel:!1,confirmingSubmit:!1}},props:["error","errorMessage","errorDuration","loading","successMessage","successDuration","submitText","cancelText","redGreen","hide","floatBottom","cancelConfirmation","submitConfirmation","cancelConfButton","submitConfButton"],methods:{cancel:function(){this.cancelConfirmation?this.confirmingCancel?this.confirmingCancel=!1:this.confirmingSubmit?this.confirmingSubmit=!1:this.confirmingCancel=!0:this.$emit("leave")},submit:function(){this.submitConfirmation&&(this.confirmingSubmit=!0)}},watch:{error:{immediate:!0,handler:function(){this.confirmingCancel=!1,this.confirmingSubmit=!1}},successMessage:{immediate:!0,handler:function(){this.confirmingCancel=!1,this.confirmingSubmit=!1}}}};d.render=l;t["a"]=d},"1de2":function(e,t,n){"use strict";n("451e")},"2b35":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"number",(function(){return it})),n.d(r,"selectboxes",(function(){return At})),n.d(r,"multiplechoice",(function(){return wn})),n.d(r,"longtext",(function(){return Mn})),n.d(r,"shorttext",(function(){return Bn})),n.d(r,"date",(function(){return Hn})),n.d(r,"datetime",(function(){return Xn})),n.d(r,"text_exposition",(function(){return Ry})),n.d(r,"youtube_exposition",(function(){return Fy})),n.d(r,"nif",(function(){return Gy})),n.d(r,"phone",(function(){return tw})),n.d(r,"email",(function(){return sw}));n("b0c0"),n("a434");var o=n("7a23"),i=Object(o["createVNode"])("h1",{class:"title"}," Criação de novo formulário ",-1),a=Object(o["createVNode"])("hr",null,null,-1),s={class:"level"},c={class:"level-item control has-icons-left"},l=Object(o["createVNode"])("option",{value:"",disabled:""}," Tipo de Formulário ",-1),u={class:"icon is-left"},d=Object(o["createVNode"])("i",{class:"fas fa-mouse-pointer"},null,-1),p={class:"icon is-left"},f=Object(o["createVNode"])("i",{class:"fas fa-user-plus"},null,-1),h={class:"icon is-left"},m=Object(o["createVNode"])("i",{class:"fas fa-calendar-plus"},null,-1),v={class:"icon is-left"},g=Object(o["createVNode"])("i",{class:"fas fa-star"},null,-1),b={class:"level-item flex column ca vca"},y={class:"dropdown-item",style:{"white-space":"nowrap"}},w=Object(o["createVNode"])("label",{class:"label",for:"redirect"},"Página de redireção após sucesso",-1),O={class:"dropdown-item",style:{"white-space":"nowrap"}},x=Object(o["createVNode"])("label",{class:"label",for:"redirect_delay"},"Atraso de redireção (segundos)",-1),k={key:0,class:"dropdown-divider"},S={key:1,class:"dropdown-item",style:{"white-space":"nowrap"}},j={key:2,class:"dropdown-item",style:{"white-space":"nowrap"}},N=Object(o["createVNode"])("hr",null,null,-1),C={key:0},_={class:"panel is-info is-flex-grow-1",style:{height:"fit-content"}},M={class:"panel-heading mb-2 section-handle draggable level prevent-overflow"},V={class:"level-left is-size-3"},T={class:"field level-right is-hidden-mobile"},E={class:"control level-item"},D=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),A={class:"control level-item"},I=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-chevron-down"})],-1),P=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-chevron-up"})],-1),B={class:"panel-block field is-hidden-tablet level"},R=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),L={class:"panel-block control is-flex-grow-1 fade-item"},z={class:"flex row ca mb-6"},$={key:1,class:"subtitle mb-4 ml-2"},q=Object(o["createVNode"])("hr",null,null,-1),F={class:"panel is-primary"},H=Object(o["createVNode"])("div",{class:"panel-heading"}," Mensagem de sucesso ",-1),U={class:"panel-block"};function W(e,t,n,r,W,K){var J=this,G=Object(o["resolveComponent"])("Input"),Y=Object(o["resolveComponent"])("FormInvalidator"),X=Object(o["resolveComponent"])("Switch"),Z=Object(o["resolveComponent"])("Dropdown"),Q=Object(o["resolveComponent"])("CreatorQuestions"),ee=Object(o["resolveComponent"])("draggable"),te=Object(o["resolveComponent"])("tiptap"),ne=Object(o["resolveComponent"])("Submit");return W.form?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:W.form,class:"box"},[i,Object(o["createVNode"])("form",{id:"form-area",ref:"form",onSubmit:t[22]||(t[22]=Object(o["withModifiers"])((function(e){return K.submit()}),["prevent"]))},[Object(o["createVNode"])(G,{id:"title",modelValue:W.form.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return W.form.title=e}),placeholder:"Título do formulário",class:"input is-medium",type:"text",autofocus:"",required:"",onInput:t[2]||(t[2]=function(e){return W.changes++})},null,8,["modelValue"]),a,Object(o["createVNode"])("div",s,[Object(o["createVNode"])("div",c,[Object(o["createVNode"])("div",{class:["select",{"is-danger":W.typeInvalid&&""===W.form.type}]},[Object(o["withDirectives"])(Object(o["createVNode"])("select",{id:"type","onUpdate:modelValue":t[3]||(t[3]=function(e){return W.form.type=e}),required:"",disabled:0==W.form.editable||W.form.id&&(0!=W.form.signup_uses&&W.form.signup_use!==e.undefineds||0!=(0!=W.form.feedback_uses&&void 0!==W.form.feedback_uses)),onInvalid:t[4]||(t[4]=function(e){return W.typeInvalid=!0})},[l,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(W.form_types,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:e,value:t}," Formulário de "+Object(o["toDisplayString"])(e.name),9,["value"])})),128))],40,["disabled"]),[[o["vModelSelect"],W.form.type]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",u,[d],512),[[o["vShow"],!(W.form.type>=1&&W.form.type<=3)]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",p,[f],512),[[o["vShow"],1==W.form.type]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",h,[m],512),[[o["vShow"],2==W.form.type]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",v,[g],512),[[o["vShow"],3==W.form.type]])],2)]),Object(o["createVNode"])("div",b,[Object(o["createVNode"])(Y,{valid:W.form.redirect_delay>=0,"invalid-string":"O atraso de redireção não pode ser negativo.",onInvalid:t[5]||(t[5]=function(e){W.triedSubmit=!0})},null,8,["valid","invalid-string"]),Object(o["createVNode"])(Z,{text:"Opções avançadas",valid:!(W.triedSubmit&&W.form.redirect_delay<0)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",y,[w,Object(o["createVNode"])(G,{id:"redirect",modelValue:W.form.redirect,"onUpdate:modelValue":t[6]||(t[6]=function(e){return W.form.redirect=e}),placeholder:"Página para redireção",class:"input",type:"text",onInput:t[7]||(t[7]=function(e){return W.changes++})},null,8,["modelValue"])]),Object(o["createVNode"])("div",O,[x,Object(o["createVNode"])(G,{id:"redirect_delay",modelValue:W.form.redirect_delay,"onUpdate:modelValue":t[8]||(t[8]=function(e){return W.form.redirect_delay=e}),placeholder:"Atraso de redireção",class:"input",type:"number",step:"1",min:"0",onInput:t[9]||(t[9]=function(e){return W.changes++})},null,8,["modelValue"])]),0==W.form.editable||W.form.id&&(0!=W.form.signup_uses&&void 0!==W.form.signup_uses||0!=(0!=W.form.feedback_uses&&void 0!==W.form.feedback_uses))?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("hr",k)),0==W.form.editable||W.form.id&&(0!=W.form.signup_uses&&void 0!==W.form.signup_uses||0!=(0!=W.form.feedback_uses&&void 0!==W.form.feedback_uses))?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",S,[Object(o["createVNode"])(X,{modelValue:W.form.form.hide_section_numbers,"onUpdate:modelValue":[t[10]||(t[10]=function(e){return W.form.form.hide_section_numbers=e}),t[11]||(t[11]=function(e){return W.changes++})],text:"Esconder números de secções"},null,8,["modelValue"])])),0!=W.form.editable?(Object(o["openBlock"])(),Object(o["createBlock"])("div",j,[Object(o["createVNode"])(X,{modelValue:W.form.form.hide_question_numbers,"onUpdate:modelValue":[t[12]||(t[12]=function(e){return W.form.form.hide_question_numbers=e}),t[13]||(t[13]=function(e){return W.changes++})],text:"Esconder números de perguntas"},null,8,["modelValue"])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["valid"])])]),N,0==W.form.editable||W.form.id&&(0!=W.form.signup_uses&&void 0!==W.form.signup_uses||0!=(0!=W.form.feedback_uses&&void 0!==W.form.feedback_uses))?(Object(o["openBlock"])(),Object(o["createBlock"])("div",$," Este formulário já tem respostas ou está a ser usado, pelo que as suas perguntas não podem ser editadas. ")):(Object(o["openBlock"])(),Object(o["createBlock"])("div",C,[Object(o["createVNode"])(ee,Object(o["mergeProps"])({modelValue:W.form.form.sections,"onUpdate:modelValue":t[15]||(t[15]=function(e){return W.form.form.sections=e}),"item-key":"id",group:"sections",tag:"transition-group","component-data":{name:"list",tag:"div"},move:K.move()},K.dragOptions,{handle:".section-handle",class:"draggable-section",onEnd:t[16]||(t[16]=function(e){W.changes++})}),{item:Object(o["withCtx"])((function(e){var n=e.element,r=e.index;return[Object(o["createVNode"])("div",{ref:"section_"+r,class:"container is-flex mb-5 list-item draggable-section m-0 p-0"},[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("h2",V,[W.form.form.hide_section_numbers?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r+1)+". ",1)],64)),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(""===n.section_name?"Secção ":n.section_name),1)]),Object(o["createVNode"])("div",T,[Object(o["createVNode"])("div",E,[Object(o["createVNode"])("button",{type:"button",class:"button is-danger is-medium","aria-label":"Apagar secção",onClick:function(e){W.form.form.sections.splice(r,1),W.changes++}},[D],8,["onClick"])]),Object(o["createVNode"])("div",A,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{type:"button",class:"button is-medium","aria-label":"Expandir secção",onClick:function(e){return W.form.form.hidden_elements[n.id]=void 0}},[I],8,["onClick"]),[[o["vShow"],W.form.form.hidden_elements[n.id]]]),Object(o["withDirectives"])(Object(o["createVNode"])("button",{type:"button",class:"button is-medium","aria-label":"Minimizar secção",onClick:function(e){return W.form.form.hidden_elements[n.id]=!0}},[P],8,["onClick"]),[[o["vShow"],!W.form.form.hidden_elements[n.id]]])])])]),Object(o["createVNode"])("div",B,[Object(o["createVNode"])("button",{type:"button",class:"button is-danger is-medium is-flex-grow-1","aria-label":"Apagar secção",onClick:function(e){W.form.form.sections.splice(r,1),W.changes++}},[R],8,["onClick"])]),Object(o["createVNode"])(o["Transition"],{name:"component-fade",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",L,[Object(o["createVNode"])(G,{modelValue:n.section_name,"onUpdate:modelValue":function(e){return n.section_name=e},placeholder:"Título da secção",class:"input is-medium",required:"",type:"'text'",onInput:t[14]||(t[14]=function(e){return W.changes++}),onInvalid:function(e){return W.form.form.hidden_elements[n.id]=void 0}},null,8,["modelValue","onUpdate:modelValue","onInvalid"])],512),[[o["vShow"],!W.form.form.hidden_elements[n.id]]])]})),_:2},1024),Object(o["createVNode"])(Q,{ref:"section_"+r+"_questions","question-section":n,collapsed:W.form.form.hidden_elements[n.id],"hide-question-numbers":W.form.form.hide_question_numbers,onUncollapse:function(e){return W.form.form.hidden_elements[n.id]=void 0},onUpdate:function(e){W.form.form.sections[n.id]=e,W.changes++}},null,8,["question-section","collapsed","hide-question-numbers","onUncollapse","onUpdate"])])],512)]})),_:1},16,["modelValue","move"]),Object(o["createVNode"])("div",z,[Object(o["createVNode"])("button",{type:"button",class:"button is-primary",onClick:t[17]||(t[17]=function(e){K.addSection(),W.changes++})}," Adicionar secção ")])])),q,Object(o["createVNode"])("div",F,[H,Object(o["createVNode"])("div",U,[Object(o["createVNode"])(te,{modelValue:W.form.submit_message,"onUpdate:modelValue":t[18]||(t[18]=function(e){return W.form.submit_message=e}),style:{width:"100%"},class:"mb-4",onUpdate:t[19]||(t[19]=function(e){J.form.submit_message=e,W.changes++})},null,8,["modelValue"])])]),Object(o["createVNode"])(ne,{style:{width:"fit-content"},hide:0==W.changes,"float-bottom":"true",error:W.response&&void 0===W.response.id,"error-message":"Houve um erro na submissão do formulário.","success-duration":"3000","success-message":W.success,loading:W.loading,"submit-text":"Guardar","red-green":"true","cancel-confirmation":"Pretende eliminar as suas alterações?","submit-confirmation":"Pretende guardar as suas alterações?","cancel-conf-button":"Eliminar","submit-conf-button":"Guardar",onLeave:t[20]||(t[20]=function(e){return K.cancel()}),onDismissed:t[21]||(t[21]=function(e){J.response=void 0,J.success=void 0})},null,8,["hide","error","success-message","loading"])],544)])):Object(o["createCommentVNode"])("",!0)}var K=n("1da1"),J=(n("96cf"),n("99af"),n("b76a")),G=n.n(J),Y=n("1995"),X=n("75c6"),Z=(n("caad"),n("2532"),{class:"panel is-fullwidth is-flex-grow-1"}),Q={class:"panel-heading draggable level mb-0",style:{"background-color":"#ededed",color:"#363636"}},ee={class:"level mb-0",style:{"max-width":"100%"}},te={class:"level is-hidden-mobile"},ne=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),re=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-chevron-down"})],-1),oe=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-chevron-up"})],-1),ie={class:"level is-mobile panel-block is-hidden-tablet mb-0"},ae={class:"level-left"},se=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),ce={class:"panel-block"},le={class:"level pt-5 pl-6 pr-6 pb-3"},ue={class:"select level-item m-1"},de=Object(o["createVNode"])("option",{disabled:"",value:"none"}," Texto ",-1),pe=Object(o["createVNode"])("option",{value:"shorttext"}," Texto Curto ",-1),fe=Object(o["createVNode"])("option",{value:"longtext"}," Texto Longo ",-1),he=Object(o["createVNode"])("option",{value:"email"}," Email ",-1),me={class:"select level-item m-1"},ve=Object(o["createVNode"])("option",{disabled:"",value:"none"}," Numérico ",-1),ge=Object(o["createVNode"])("option",{value:"number"}," Número ",-1),be=Object(o["createVNode"])("option",{value:"nif"}," NIF ",-1),ye=Object(o["createVNode"])("option",{value:"phone"}," Número telefónico ",-1),we={class:"select level-item m-1"},Oe=Object(o["createVNode"])("option",{disabled:"",value:"none"}," Data ",-1),xe=Object(o["createVNode"])("option",{value:"date"}," Data ",-1),ke=Object(o["createVNode"])("option",{value:"datetime"}," Data e Hora ",-1),Se={class:"select level-item m-1"},je=Object(o["createVNode"])("option",{disabled:"",value:"none"}," Seleção ",-1),Ne=Object(o["createVNode"])("option",{value:"multiplechoice"}," Escolha Múltipla ",-1),Ce=Object(o["createVNode"])("option",{value:"selectboxes"}," Caixas de Seleção ",-1),_e={class:"select level-item m-1"},Me=Object(o["createVNode"])("option",{disabled:"",value:"none"}," Exposição ",-1),Ve=Object(o["createVNode"])("option",{value:"text_exposition"}," Texto e Imagens ",-1),Te=Object(o["createVNode"])("option",{value:"youtube_exposition"}," Vídeo (YouTube) ",-1),Ee={class:"component flex row ca p-4 mb-1"},De=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-plus"})],-1);function Ae(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("Switch"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("draggable");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(o["Transition"],{name:"fade",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",null,[Object(o["withDirectives"])(Object(o["createVNode"])(l,Object(o["mergeProps"])({modelValue:i.section.questions,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.section.questions=e}),"item-key":"id",group:"options",tag:"transition-group","component-data":{name:"list",tag:"ul"},move:a.move()},a.dragOptions,{handle:".panel-heading",class:"draggable-question drag-to-safety",onEnd:t[5]||(t[5]=function(e){return a.update()})}),{item:Object(o["withCtx"])((function(r){var l=r.element,u=r.index;return[Object(o["createVNode"])("div",{ref:"question_"+u,class:"panel-block is-flex is-align-items-flex-start list-item draggable-question mr-0",style:{"min-height":"100px"}},[Object(o["createVNode"])("div",Z,[Object(o["createVNode"])("div",Q,[Object(o["createVNode"])("div",ee,[Object(o["createVNode"])("h3",{class:[{required:i.section.questions[u].required},"prevent-overflow"]},[Object(o["createVNode"])("span",null,[n.hideQuestionNumbers?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(u+1)+". ",1)],64)),Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.question),1)]),Object(o["createTextVNode"])(" ("+Object(o["toDisplayString"])(a.getFieldTypeTitle(l.properties.field_type))+") ",1)],2)]),Object(o["createVNode"])("fieldset",te,[l.properties.field_type.includes("_exposition")?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,modelValue:l.required,"onUpdate:modelValue":[function(e){return l.required=e},t[1]||(t[1]=function(e){return a.update()})],text:"Obrigatória",class:"mb-0 mr-4 subtitle"},null,8,["modelValue","onUpdate:modelValue"])),Object(o["createVNode"])("button",{type:"button",class:"button is-danger mr-2","aria-label":"Apagar pergunta",onClick:function(e){i.section.questions.splice(u,1),a.update()}},[ne],8,["onClick"]),Object(o["withDirectives"])(Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Expandir pergunta",onClick:function(e){return i.section.hidden_elements[l.id]=void 0}},[re],8,["onClick"]),[[o["vShow"],i.section.hidden_elements[l.id]]]),Object(o["withDirectives"])(Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Minimizar pergunta",onClick:function(e){return i.section.hidden_elements[l.id]=!0}},[oe],8,["onClick"]),[[o["vShow"],!i.section.hidden_elements[l.id]]])])]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])("fieldset",ie,[Object(o["createVNode"])("div",ae,[l.properties.field_type.includes("_exposition")?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,modelValue:l.required,"onUpdate:modelValue":[function(e){return l.required=e},t[2]||(t[2]=function(e){return a.update()})],text:"Obrigatória",class:"mb-0 mr-4 is-small level-item"},null,8,["modelValue","onUpdate:modelValue"]))]),Object(o["createVNode"])("button",{type:"button",class:"button is-danger mr-2 level-item","aria-label":"Apagar pergunta",onClick:function(e){i.section.questions.splice(u,1),a.update()}},[se],8,["onClick"])]),Object(o["createVNode"])("div",ce,[Object(o["createVNode"])(c,{id:"question_"+u,modelValue:l.question,"onUpdate:modelValue":function(e){return l.question=e},type:"text",placeholder:l.properties.field_type.includes("_exposition")?"Título da exposição":"Título da pergunta",class:"input",required:"",onInput:t[3]||(t[3]=function(e){return a.update()}),onInvalid:function(t){e.$emit("uncollapse"),i.section.hidden_elements[l.id]=!1}},null,8,["id","modelValue","onUpdate:modelValue","placeholder","onInvalid"])]),(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(l.properties.field_type),{class:"panel-block",question:l,qid:u,properties:l.properties,onUpdate:function(e){l.properties=e,a.update()},onUncollapse:function(t){e.$emit("uncollapse"),i.section.hidden_elements[l.id]=!1}},null,8,["question","qid","properties","onUpdate","onUncollapse"]))],512),[[o["vShow"],!i.section.hidden_elements[l.id]]])])],512)]})),_:1},16,["modelValue","move"]),[[o["vShow"],!n.collapsed]]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",null,[Object(o["createVNode"])(o["Transition"],{name:"component-fade",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",le,[Object(o["createVNode"])("div",ue,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.new_field=e}),class:"input",onChange:t[7]||(t[7]=function(e){return a.selected_field()})},[de,pe,fe,he],544),[[o["vModelSelect"],i.new_field]])]),Object(o["createVNode"])("div",me,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.new_field=e}),class:"input",onChange:t[9]||(t[9]=function(e){return a.selected_field()})},[ve,ge,be,ye],544),[[o["vModelSelect"],i.new_field]])]),Object(o["createVNode"])("div",we,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.new_field=e}),class:"input",onChange:t[11]||(t[11]=function(e){return a.selected_field()})},[Oe,xe,ke],544),[[o["vModelSelect"],i.new_field]])]),Object(o["createVNode"])("div",Se,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.new_field=e}),class:"input",onChange:t[13]||(t[13]=function(e){return a.selected_field()})},[je,Ne,Ce],544),[[o["vModelSelect"],i.new_field]])]),Object(o["createVNode"])("div",_e,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.new_field=e}),class:"input",onChange:t[15]||(t[15]=function(e){return a.selected_field()})},[Me,Ve,Te],544),[[o["vModelSelect"],i.new_field]])])],512),[[o["vShow"],i.selecting_field&&!n.collapsed]])]})),_:1}),Object(o["createVNode"])(o["Transition"],{name:"component-fade",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",Ee,[Object(o["createVNode"])("button",{type:"button",class:"button round is-large is-primary is-light","aria-label":"Adicionar pergunta",onClick:t[16]||(t[16]=function(e){return i.selecting_field=!0})},[De])],512),[[o["vShow"],!i.selecting_field&&!n.collapsed]])]})),_:1}),Object(o["createVNode"])(o["Transition"],{name:"component-fade",mode:"out-in"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",{class:"subtitle flex row ca pb-3"},Object(o["toDisplayString"])(i.section.questions.length)+" "+Object(o["toDisplayString"])(1!=i.section.questions.length?"perguntas":"pergunta"),513),[[o["vShow"],n.collapsed]])]})),_:1})])])])]})),_:1})])}var Ie=n("1270"),Pe={class:"flex column la vca"},Be={class:"dropdown-item"},Re={class:"control has-icons-left"},Le={class:"select"},ze=Object(o["createVNode"])("option",{value:"text"}," Texto ",-1),$e=Object(o["createVNode"])("option",{value:"slider"}," Barra deslizante ",-1),qe={class:"icon is-left"},Fe=Object(o["createVNode"])("i",{class:"fas fa-font"},null,-1),He={class:"icon is-left"},Ue=Object(o["createVNode"])("i",{class:"fas fa-sliders-h"},null,-1),We=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),Ke={class:"control dropdown-item"},Je={class:"control dropdown-item"},Ge={class:"control dropdown-item"},Ye={class:"control dropdown-item"},Xe=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),Ze={class:"control dropdown-item"},Qe={class:"control dropdown-item"},et={class:"control dropdown-item"};function tt(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Pe,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":i.invalidString,onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid","invalid-string"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Be,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_style"},"Estilo: ",8,["for"]),Object(o["createVNode"])("div",Re,[Object(o["createVNode"])("div",Le,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{id:n.qid+"_style","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.style=e}),onChange:t[3]||(t[3]=function(e){return a.update()})},[ze,$e],40,["id"]),[[o["vModelSelect"],i.result.style]])]),Object(o["withDirectives"])(Object(o["createVNode"])("span",qe,[Fe],512),[[o["vShow"],"text"==i.result.style]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",He,[Ue],512),[[o["vShow"],"slider"==i.result.style]])])]),We,Object(o["createVNode"])("div",Ke,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Je,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",ref:"default",modelValue:i.result.default,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.result.default=e}),modelModifiers:{number:!0},placeholder:"Valor inicial",class:"input is-small",step:"any",type:"number",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Ge,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_prefix"},"Prefixo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_prefix",modelValue:i.result.prefix,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.result.prefix=e}),class:"input is-small",placeholder:"O texto que aparece antes do número",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Ye,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_suffix"},"Sufixo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_suffix",modelValue:i.result.suffix,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.result.suffix=e}),class:"input is-small",placeholder:"O texto que aparece depois do número",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Xe,Object(o["createVNode"])("div",Ze,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_decimal_places"},"Casas decimais: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_decimal_places",ref:"decimal_places",modelValue:i.result.decimal_places,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.result.decimal_places=e}),modelModifiers:{number:!0},placeholder:"Número máximo de casas decimais",class:"input is-small",min:"0",type:"number",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Qe,[Object(o["createVNode"])("label",{class:["label",{required:"slider"===i.result.style}],for:n.qid+"_min"},"Valor mínimo: ",10,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_min",ref:"min",modelValue:i.result.min,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.result.min=e}),modelModifiers:{number:!0},placeholder:"Deve ser inferior ou igual ao máximo",class:"input is-small",type:"number",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",et,[Object(o["createVNode"])("label",{class:["label",{required:"slider"===i.result.style}],for:n.qid+"_max"},"Valor máximo: ",10,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_max",ref:"max",modelValue:i.result.max,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.result.max=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"Deve ser superior ou igual ao mínimo",type:"number",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var nt=n("b572"),rt=n("711b"),ot={name:"NumberField",props:["qid","properties"],emits:["update","uncollapse"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1,invalidString:" "}},created:function(){void 0===this.result.style&&(this.result.style="text")},methods:{update:function(){this.valid=void 0===this.result.min||void 0===this.result.max,this.valid?"slider"===this.result.style&&(this.valid=!1,this.invalidString="A barra deslizante requer um mínimo e um máximo"):(this.valid=this.result.min<=this.result.max,this.valid||(this.invalidString="O máximo deve ser superior ao mínimo")),this.valid&&(this.valid=this.$refs["default"].validity_valid&&this.$refs["min"].validity_valid&&this.$refs["max"].validity_valid&&this.$refs["decimal_places"].validity_valid&&this.$refs["default"].validity_valid,this.invalidString=" "),""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),""===this.result.min&&(this.result.min=void 0),""===this.result.max&&(this.result.max=void 0),""===this.result.decimal_places&&(this.result.decimal_places=void 0),""===this.result.prefix&&(this.result.prefix=void 0),""===this.result.suffix&&(this.result.suffix=void 0),this.$emit("update",this.result)}}};n("1de2");ot.render=tt;var it=ot,at={class:"level is-flex-grow-1 is-align-items-flex-start"},st={class:"level-left is-flex-grow-1 is-justify-content-center"},ct={class:"columns is-centered is-mobile is-flex-grow-1"},lt={class:"column level-item is-flex-grow-2"},ut={class:"field has-addons is-rounded checkbox-field is-flex-grow-1"},dt=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-ellipsis-v"})],-1),pt=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-ban"})],-1),ft={class:"control is-expanded"},ht=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),mt={class:"component level-item mt-3"},vt=Object(o["createVNode"])("span",{class:"icon","aria-label":"Adicionar Opção"},[Object(o["createVNode"])("i",{class:"fas fa-plus"})],-1),gt={class:"level-right is-flex-grow-1 level is-mobile"},bt={class:"is-mobile is-flex-grow-1 flex column la vca"},yt={class:"control dropdown-item"},wt=Object(o["createVNode"])("span",{class:"label"},"Selecionados por defeito: ",-1),Ot={key:0},xt=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),kt={class:"control dropdown-item"},St={class:"control dropdown-item"},jt=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),Nt={class:"control dropdown-item"},Ct=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),_t={class:"control dropdown-item"},Mt={class:"control dropdown-item"},Vt={class:"control dropdown-item"},Tt={class:"control dropdown-item"};function Et(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("Input"),c=Object(o["resolveComponent"])("draggable"),l=Object(o["resolveComponent"])("FormInvalidator"),u=Object(o["resolveComponent"])("Switch"),d=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",at,[Object(o["createVNode"])("div",st,[Object(o["createVNode"])("div",ct,[Object(o["createVNode"])("div",lt,[Object(o["createVNode"])(c,Object(o["mergeProps"])({modelValue:i.result.options,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.result.options=e}),tag:"transition-group","component-data":{name:"list",tag:"div"},move:a.move()},a.dragOptions,{handle:".draggable","item-key":"id",class:"is-flex-grow-1",onEnd:t[2]||(t[2]=function(e){return a.update()})}),{item:Object(o["withCtx"])((function(e){var t=e.element,r=e.index;return[Object(o["createVNode"])("div",ut,[Object(o["createVNode"])("div",{class:["control",{draggable:i.result.options.length>1}]},[Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:["button is-static ",t.default?"is-primary is-light":""]},[dt],2),[[o["vShow"],i.result.options.length>1]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:["button is-static",t.default?"is-primary is-light":""]},[pt],2),[[o["vShow"],i.result.options.length<=1]])],2),Object(o["createVNode"])("div",ft,[Object(o["createVNode"])(s,{id:n.qid+"_option_"+r,modelValue:t.question,"onUpdate:modelValue":function(e){return t.question=e},type:"text",required:"",class:"input is-expanded",placeholder:"Texto da opção",onInput:a.update},null,8,["id","modelValue","onUpdate:modelValue","onInput"])]),Object(o["createVNode"])("div",{class:"control",onClick:function(e){return a.deleteOption(r)}},[Object(o["createVNode"])("button",{type:"button",class:"button is-danger",disabled:i.result.options.length<=1},[ht],8,["disabled"])],8,["onClick"])])]})),_:1},16,["modelValue","move"]),Object(o["createVNode"])("div",mt,[Object(o["createVNode"])("button",{type:"button",class:"button round is-primary is-light",onClick:t[3]||(t[3]=function(e){i.result.options.push(a.newElement()),a.update()})},[vt])])])])]),Object(o["createVNode"])("div",gt,[Object(o["createVNode"])("div",bt,[Object(o["createVNode"])(l,{valid:i.valid,"invalid-string":i.invalidString,"start-invalid":i.triedSubmit,onInvalid:t[4]||(t[4]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","invalid-string","start-invalid"]),Object(o["createVNode"])(d,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",yt,[wt,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(i.result.options,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e.id,class:""},[Object(o["createVNode"])("label",{class:"checkbox prevent-overflow is-small",for:n.qid+"_default_"+e.id},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:n.qid+"_default_"+e.id,"onUpdate:modelValue":function(t){return e.default=t},value:e.id,type:"checkbox",class:"checkbox",onChange:t[5]||(t[5]=function(e){return a.update()})},null,40,["id","onUpdate:modelValue","value"]),[[o["vModelCheckbox"],e.default]]),Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.question),1),""==e.question?(Object(o["openBlock"])(),Object(o["createBlock"])("i",Ot,"Opção sem texto")):Object(o["createCommentVNode"])("",!0)],8,["for"])])})),128))]),xt,Object(o["createVNode"])("div",kt,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_min_selected"},"Mínimo selecionados: ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_min_selected",ref:"min_selected",modelValue:i.result.min_selected,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.result.min_selected=e}),modelModifiers:{number:!0},class:"input is-small",type:"number",step:"1",min:"1",onInput:t[7]||(t[7]=function(e){a.update()}),onInvalid:t[8]||(t[8]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["id","modelValue"])]),Object(o["createVNode"])("div",St,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_max_selected"},"Máximo selecionados: ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_max_selected",ref:"max_selected",modelValue:i.result.max_selected,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.result.max_selected=e}),modelModifiers:{number:!0},class:"input is-small",type:"number",step:"1",min:"1",onInput:t[10]||(t[10]=function(e){return a.update()}),onInvalid:t[11]||(t[11]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["id","modelValue"])]),jt,Object(o["createVNode"])("div",Nt,[Object(o["createVNode"])(u,{modelValue:i.result.allowed_other,"onUpdate:modelValue":[t[12]||(t[12]=function(e){return i.result.allowed_other=e}),t[13]||(t[13]=function(e){return a.update()})],text:"Permitir a resposta 'outro'"},null,8,["modelValue"])]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Ct,Object(o["createVNode"])("div",_t,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_other_string"},"Pergunta de outros: ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_other_string",modelValue:i.result.other_string,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.result.other_string=e}),class:"input is-small",placeholder:"Exemplo: 'Outra opção:' ",type:"text",onInput:t[15]||(t[15]=function(e){return a.update()}),onInvalid:t[16]||(t[16]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["id","modelValue"])]),Object(o["createVNode"])("div",Mt,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão (outros): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[17]||(t[17]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:t[18]||(t[18]=function(e){return a.update()}),onInvalid:t[19]||(t[19]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["id","modelValue"])]),Object(o["createVNode"])("div",Vt,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_min_length"},"Tamanho mínimo (outros): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_min_length",ref:"min_length",modelValue:i.result.min_length,"onUpdate:modelValue":t[20]||(t[20]=function(e){return i.result.min_length=e}),modelModifiers:{number:!0},placeholder:"Deve ser inferior ou igual ao máximo",class:"input is-small",type:"number",step:"1",min:"1",onInput:t[21]||(t[21]=function(e){return a.update()}),onInvalid:t[22]||(t[22]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["id","modelValue"])]),Object(o["createVNode"])("div",Tt,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_max_length"},"Tamanho máximo (outros): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_max_length",ref:"max_length",modelValue:i.result.max_length,"onUpdate:modelValue":t[23]||(t[23]=function(e){return i.result.max_length=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"Deve ser superior ou igual ao mínimo",type:"number",step:"1",min:"1",onInput:t[24]||(t[24]=function(e){return a.update()})},null,8,["id","modelValue"])])],512),[[o["vShow"],i.result.allowed_other]])]})),_:1},8,["valid"])])])])])}var Dt={name:"CheckBoxField",components:{draggable:G.a,Dropdown:rt["a"],Switch:X["a"],FormInvalidator:nt["a"],Input:Ie["a"]},props:["qid","properties"],emits:["update","uncollapse"],data:function(){return{result:this.properties,valid:!0,invalidString:"",triedSubmit:!1}},created:function(){void 0===this.result.options&&(this.result.options=[this.newElement()])},methods:{move:function(){return function(e){return e.related.classList.contains("checkbox-field")}},deleteOption:function(e){this.result.options.length>1&&(this.result.options.splice(e,1),this.update())},newElement:function(){return{id:this.getUid(),question:""}},getUid:function(){return this.$store.getters.getUid},update:function(){this.valid=!this.result.min_length||!this.result.max_length||this.result.min_length<=this.result.max_length,this.valid?(this.valid=this.valid&&(this.valid=!this.result.min_selected||!this.result.max_selected||this.result.min_selected<=this.result.max_selected),this.valid?(this.valid=this.$refs["min_selected"].validity_valid&&this.$refs["max_selected"].validity_valid,this.valid&&this.result.allowed_other&&(this.valid=this.$refs["min_length"].validity_valid&&this.$refs["max_length"].validity_valid),this.invalidString=" "):this.invalidString="O número mínimo de opções selecionadas deve ser inferior ou igual ao número máximo."):this.invalidString='O tamanho mínimo da resposta de "outros" deve ser inferior ou igual ao tamanho máximo.',""!==this.result.placeholder&&this.result.allowed_other||(this.result.placeholder=void 0),""!==this.result.min_length&&this.result.allowed_other||(this.result.min_length=void 0),""!==this.result.max_length&&this.result.allowed_other||(this.result.max_length=void 0),""===this.result.min_selected&&(this.result.min_selected=void 0),""===this.result.max_selected&&(this.result.max_selected=void 0),""!==this.result.other_string&&this.result.allowed_other||(this.result.other_string=void 0),this.$emit("update",this.result)}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}};Dt.render=Et;var At=Dt,It=Object(o["withScopeId"])("data-v-0f0b23ac");Object(o["pushScopeId"])("data-v-0f0b23ac");var Pt={class:"level is-flex-grow-1 is-align-items-flex-start"},Bt={class:"level-left is-flex-grow-1 is-justify-content-center"},Rt={class:"columns is-centered is-mobile is-flex-grow-1"},Lt={class:"column level-item is-flex-grow-2"},zt={class:"field has-addons is-rounded multiplechoice-field is-flex-grow-1"},$t=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-ellipsis-v"})],-1),qt=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-ban"})],-1),Ft={class:"control is-expanded"},Ht=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-trash-alt"})],-1),Ut={class:"component level-item mt-3"},Wt=Object(o["createVNode"])("span",{class:"icon","aria-label":"Adicionar Opção"},[Object(o["createVNode"])("i",{class:"fas fa-plus"})],-1),Kt={class:"level-right is-flex-grow-1 level is-mobile"},Jt={class:"is-mobile is-flex-grow-1 flex column la vca"},Gt={class:"dropdown-item"},Yt={class:"control has-icons-left"},Xt={class:"select"},Zt=Object(o["createVNode"])("option",{value:"radio"}," Radio ",-1),Qt=Object(o["createTextVNode"])(" Dropdown "),en=Object(o["createTextVNode"])(' (Não suporta opção "outro") '),tn={class:"icon is-left"},nn=Object(o["createVNode"])("i",{class:"far fa-dot-circle"},null,-1),rn={class:"icon is-left"},on=Object(o["createVNode"])("i",{class:"far fa-caret-square-down"},null,-1),an={class:"control dropdown-item"},sn=Object(o["createVNode"])("span",{class:"label"},"Selecionado por defeito: ",-1),cn=Object(o["createVNode"])("b",null,"Nenhum",-1),ln=Object(o["createVNode"])("br",null,null,-1),un={key:0},dn=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),pn={class:"control dropdown-item"},fn=Object(o["createVNode"])("hr",{class:"dropdown-divider"},null,-1),hn={class:"control dropdown-item"},mn={class:"control dropdown-item"},vn={class:"control dropdown-item"},gn={class:"control dropdown-item"};Object(o["popScopeId"])();var bn=It((function(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("Input"),c=Object(o["resolveComponent"])("draggable"),l=Object(o["resolveComponent"])("FormInvalidator"),u=Object(o["resolveComponent"])("Switch"),d=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",Pt,[Object(o["createVNode"])("div",Bt,[Object(o["createVNode"])("div",Rt,[Object(o["createVNode"])("div",Lt,[Object(o["createVNode"])(c,Object(o["mergeProps"])({modelValue:i.result.options,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.result.options=e}),tag:"transition-group","component-data":{name:"list",tag:"div"},move:a.move()},a.dragOptions,{handle:".draggable","item-key":"id",class:"is-flex-grow-1",onEnd:t[2]||(t[2]=function(e){return a.update()})}),{item:It((function(e){var t=e.element,r=e.index;return[Object(o["createVNode"])("div",zt,[Object(o["createVNode"])("div",{class:["control",{draggable:i.result.options.length>1}]},[Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:["button is-static ",i.result.default==t.id?"is-primary is-light":""]},[$t],2),[[o["vShow"],i.result.options.length>1]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:["button is-static",i.result.default?"is-primary is-light":""]},[qt],2),[[o["vShow"],i.result.options.length<=1]])],2),Object(o["createVNode"])("div",Ft,[Object(o["createVNode"])(s,{id:n.qid+"_option_"+r,modelValue:t.question,"onUpdate:modelValue":function(e){return t.question=e},type:"text",required:"",class:"input is-expanded",placeholder:"Texto da opção",onInput:a.update},null,8,["id","modelValue","onUpdate:modelValue","onInput"])]),Object(o["createVNode"])("div",{class:"control",onClick:function(e){return a.deleteOption(r)}},[Object(o["createVNode"])("button",{type:"button",class:"button is-danger",disabled:i.result.options.length<=1},[Ht],8,["disabled"])],8,["onClick"])])]})),_:1},16,["modelValue","move"]),Object(o["createVNode"])("div",Ut,[Object(o["createVNode"])("button",{type:"button",class:"button round is-primary is-light",onClick:t[3]||(t[3]=function(e){i.result.options.push(a.newElement()),a.update()})},[Wt])])])])]),Object(o["createVNode"])("div",Kt,[Object(o["createVNode"])("div",Jt,[Object(o["createVNode"])(l,{valid:i.valid,"invalid-string":i.invalidString,"start-invalid":i.triedSubmit,onInvalid:t[4]||(t[4]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","invalid-string","start-invalid"]),Object(o["createVNode"])(d,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:It((function(){return[Object(o["createVNode"])("div",Gt,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_style"},"Estilo: ",8,["for"]),Object(o["createVNode"])("div",Yt,[Object(o["createVNode"])("div",Xt,[Object(o["withDirectives"])(Object(o["createVNode"])("select",{id:n.qid+"_style","onUpdate:modelValue":t[5]||(t[5]=function(e){return i.result.style=e}),onChange:t[6]||(t[6]=function(e){return a.update()})},[Zt,Object(o["createVNode"])("option",{value:"dropdown",disabled:i.result.allowed_other},[Qt,i.result.allowed_other?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[en],64)):Object(o["createCommentVNode"])("",!0)],8,["disabled"])],40,["id"]),[[o["vModelSelect"],i.result.style]])]),Object(o["withDirectives"])(Object(o["createVNode"])("span",tn,[nn],512),[[o["vShow"],"radio"==i.result.style]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",rn,[on],512),[[o["vShow"],"dropdown"==i.result.style]])])]),Object(o["createVNode"])("div",an,[sn,Object(o["createVNode"])("label",{class:"radio prevent-overflow is-small",for:n.qid+"_default_none"},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:n.qid+"_default_none","onUpdate:modelValue":t[7]||(t[7]=function(e){return i.result.default=e}),value:void 0,class:"mr-1",type:"radio",onChange:t[8]||(t[8]=function(){return a.update&&a.update.apply(a,arguments)})},null,40,["id"]),[[o["vModelRadio"],i.result.default]]),cn],8,["for"]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(i.result.options,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:e.id},[ln,Object(o["createVNode"])("label",{class:"radio prevent-overflow is-small",for:n.qid+"_default_"+e.id},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:n.qid+"_default_"+e.id,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.result.default=e}),value:e.id,class:"mr-1",type:"radio",onChange:t[10]||(t[10]=function(){return a.update&&a.update.apply(a,arguments)})},null,40,["id","value"]),[[o["vModelRadio"],i.result.default]]),Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.question),1),""==e.question?(Object(o["openBlock"])(),Object(o["createBlock"])("i",un,"Opção sem texto")):Object(o["createCommentVNode"])("",!0)],8,["for"])])})),128))]),"dropdown"!==i.result.style?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[dn,Object(o["createVNode"])("div",pn,[Object(o["createVNode"])(u,{modelValue:i.result.allowed_other,"onUpdate:modelValue":[t[11]||(t[11]=function(e){return i.result.allowed_other=e}),t[12]||(t[12]=function(e){return a.update()})],text:"Permitir a resposta 'outro'"},null,8,["modelValue"])])],64)):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[fn,Object(o["createVNode"])("div",hn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_other_string"},"Pergunta de outro: ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_other_string",modelValue:i.result.other_string,"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.result.other_string=e}),class:"input is-small",placeholder:"Exemplo: 'Outra opção:' ",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",mn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão (outro): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",vn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_min_length"},"Tamanho mínimo (outro): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_min_length",ref:"min_length",modelValue:i.result.min_length,"onUpdate:modelValue":t[15]||(t[15]=function(e){return i.result.min_length=e}),modelModifiers:{number:!0},placeholder:"Deve ser inferior ou igual ao máximo",class:"input is-small",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",gn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_max_length"},"Tamanho máximo (outro): ",8,["for"]),Object(o["createVNode"])(s,{id:n.qid+"_max_length",ref:"max_length",modelValue:i.result.max_length,"onUpdate:modelValue":t[16]||(t[16]=function(e){return i.result.max_length=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"Deve ser superior ou igual ao mínimo",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])])],512),[[o["vShow"],i.result.allowed_other]])]})),_:1},8,["valid"])])])])])})),yn={name:"MultipleChoiceField",components:{draggable:G.a,Switch:X["a"],FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},props:["qid","properties"],emits:["update","uncollapse"],data:function(){return{result:this.properties,valid:!0,invalidString:"",triedSubmit:!1}},created:function(){void 0===this.result.options&&(this.result.options=[this.newElement()]),void 0===this.result.style&&(this.result.style="radio")},methods:{move:function(){return function(e){return e.related.classList.contains("multiplechoice-field")}},deleteOption:function(e){this.result.options.length>1&&(this.result.options.splice(e,1),this.update())},newElement:function(){return{id:this.getUid(),question:""}},getUid:function(){return this.$store.getters.getUid},update:function(){this.valid=!this.result.min_length||!this.result.max_length||this.result.min_length<=this.result.max_length,this.valid?this.result.allowed_other&&(this.valid=this.$refs["min_length"].validity_valid&&this.$refs["max_length"].validity_valid,this.invalidString=""):this.invalidString='O tamanho mínimo da resposta de "outro" deve ser inferior ou igual ao tamanho máximo.',this.result.allowed_other||(this.result.allowed_other=void 0),""!==this.result.placeholder&&this.result.allowed_other||(this.result.placeholder=void 0),""!==this.result.min_length&&this.result.allowed_other||(this.result.min_length=void 0),""!==this.result.max_length&&this.result.allowed_other||(this.result.max_length=void 0),""!==this.result.other_string&&this.result.allowed_other||(this.result.other_string=void 0),this.$emit("update",this.result)}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}};n("0e7b");yn.render=bn,yn.__scopeId="data-v-0f0b23ac";var wn=yn,On={class:"flex column la vca"},xn={class:"control dropdown-item"},kn={class:"control dropdown-item"},Sn={class:"control dropdown-item"},jn={class:"control dropdown-item"},Nn={class:"control dropdown-item"};function Cn(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",On,[Object(o["createVNode"])(s,{valid:i.valid,"invalid-string":i.invalidString,"start-invalid":i.triedSubmit,onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","invalid-string","start-invalid"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",xn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",modelValue:i.result.default,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.default=e}),class:"input is-small",placeholder:"O valor inicial",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",kn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Sn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_min_length"},"Tamanho mínimo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_min_length",ref:"min_length",modelValue:i.result.min_length,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.result.min_length=e}),modelModifiers:{number:!0},placeholder:"Deve ser inferior ou igual ao máximo",class:"input is-small",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",jn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_max_length"},"Tamanho máximo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_max_length",ref:"max_length",modelValue:i.result.max_length,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.result.max_length=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"Deve ser superior ou igual ao mínimo",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Nn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default_lines"},"Linhas de escrita: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default_lines",modelValue:i.result.default_lines,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.result.default_lines=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"O tamanho da caixa de escrita",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var _n={name:"LongTextField",props:["qid","properties"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},emits:["update","uncollapse"],data:function(){return{result:this.properties,valid:!0,triedSubmit:!1,invalidString:""}},methods:{update:function(){this.valid=!this.result.min_length||!this.result.max_length||this.result.min_length<=this.result.max_length,this.valid?(this.valid=this.$refs["min_length"].validity_valid&&this.$refs["max_length"].validity_valid,this.invalidString=" "):this.invalidString="O tamanho mínimo da resposta deve ser inferior ou igual ao tamanho máximo.",""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),""===this.result.min_length&&(this.result.min_length=void 0),""===this.result.max_length&&(this.result.max_length=void 0),""===this.result.default_lines&&(this.result.default_lines=void 0),this.$emit("update",this.result)}}};n("dd5c");_n.render=Cn;var Mn=_n,Vn={class:"flex column la vca"},Tn={class:"control dropdown-item"},En={class:"control dropdown-item"},Dn={class:"control dropdown-item"},An={class:"control dropdown-item"};function In(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Vn,[Object(o["createVNode"])(s,{valid:i.valid,"invalid-string":i.invalidString,"start-invalid":i.triedSubmit,onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","invalid-string","start-invalid"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Tn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",modelValue:i.result.default,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.default=e}),class:"input is-small",placeholder:"O valor inicial",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",En,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Dn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_min_length"},"Tamanho mínimo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_min_length",ref:"min_length",modelValue:i.result.min_length,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.result.min_length=e}),modelModifiers:{number:!0},placeholder:"Deve ser inferior ou igual ao máximo",class:"input is-small",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",An,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_max_length"},"Tamanho máximo: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_max_length",ref:"max_length",modelValue:i.result.max_length,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.result.max_length=e}),modelModifiers:{number:!0},class:"input is-small",placeholder:"Deve ser superior ou igual ao mínimo",type:"number",step:"1",min:"1",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var Pn={name:"ShortTextField",props:["qid","properties"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},emits:["update","uncollapse"],data:function(){return{result:this.properties,valid:!0,triedSubmit:!1,invalidString:" "}},methods:{update:function(){this.valid=!this.result.min_length||!this.result.max_length||this.result.min_length<=this.result.max_length,this.valid?(this.valid=this.$refs["min_length"].validity_valid&&this.$refs["max_length"].validity_valid,this.invalidString=" "):this.invalidString="O tamanho mínimo da resposta deve ser inferior ou igual ao tamanho máximo.",""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),""===this.result.min_length&&(this.result.min_length=void 0),""===this.result.max_length&&(this.result.max_length=void 0),this.$emit("update",this.result)}}};n("ff42");Pn.render=In;var Bn=Pn,Rn={class:"flex column vca"},Ln={class:"control dropdown-item"},zn={class:"control dropdown-item"},$n={class:"control dropdown-item"};function qn(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Rn,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":i.invalidString,onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid","invalid-string"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Ln,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",modelValue:i.result.default,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.default=e}),class:"input is-small",type:"date",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",zn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_begin"},"Data mínima: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_begin",ref:"begin",modelValue:i.result.begin,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.begin=e}),class:"input is-small",type:"date",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",$n,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_end"},"Data máxima: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_end",ref:"end",modelValue:i.result.end,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.result.end=e}),class:"input is-small",type:"date",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var Fn={name:"DateField",props:["qid","properties"],emits:["update","uncollapse"],components:{Dropdown:rt["a"],FormInvalidator:nt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1,invalidString:""}},methods:{update:function(){this.valid=!this.result.begin||!this.result.end||this.result.begin<=this.result.end,this.valid?(this.valid=this.$refs["begin"].validity_valid&&this.$refs["end"].validity_valid,this.invalidString=" "):this.invalidString="A data final deve ser após a data inicial.",""===this.result.default&&(this.result.default=void 0),""===this.result.begin&&(this.result.begin=void 0),""===this.result.end&&(this.result.end=void 0),this.$emit("update",this.result)}}};n("7a4b");Fn.render=qn;var Hn=Fn,Un={class:"flex column vca"},Wn={class:"control dropdown-item"},Kn={class:"control dropdown-item"},Jn={class:"control dropdown-item"};function Gn(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Un,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":"A data e hora final deve ser após a data e hora inicial.",onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid","invalid-string"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Wn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",modelValue:i.result.default,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.default=e}),class:"input is-small",type:"datetime-local",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Kn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_begin"},"Data e hora mínima: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_begin",modelValue:i.result.begin,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.begin=e}),class:"input is-small",type:"datetime-local",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Jn,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_end"},"Data e hora máxima: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_end",modelValue:i.result.end,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.result.end=e}),class:"input is-small",type:"datetime-local",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var Yn={name:"DateField",props:["qid","properties"],emits:["update","uncollapse"],components:{Dropdown:rt["a"],FormInvalidator:nt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1,invalidString:""}},methods:{update:function(){this.valid=!this.result.begin||!this.result.end||this.result.begin<=this.result.end,this.valid?(this.valid=this.$refs["begin"].validity_valid&&this.$refs["end"].validity_valid,this.invalidString=" "):this.invalidString="A data final deve ser após a data inicial.",""===this.result.default&&(this.result.default=void 0),""===this.result.begin&&(this.result.begin=void 0),""===this.result.end&&(this.result.end=void 0),this.$emit("update",this.result)}}};n("60c0");Yn.render=Gn;var Xn=Yn;function Zn(e,t,n,r,i,a){var s=this,c=Object(o["resolveComponent"])("tiptap");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(c,{modelValue:i.answer,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.answer=e}),style:{width:"100%"},onUpdate:t[2]||(t[2]=function(e){i.answer=e,s.update()})},null,8,["modelValue"])])}var Qn={key:0,class:"level mt-3 mb-1"},er={class:"level-item"},tr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-align-left"})],-1),nr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-align-center"})],-1),rr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-align-right"})],-1),or=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-align-justify"})],-1),ir={class:"level-item"},ar=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-bold"})],-1),sr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-italic"})],-1),cr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-underline"})],-1),lr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-strikethrough"})],-1),ur=Object(o["createVNode"])("i",{class:"fas fa-font"},null,-1),dr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-eraser"})],-1),pr={class:"level-item"},fr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-hand-pointer"})],-1),hr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-unlink"})],-1),mr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-link"})],-1),vr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-image"})],-1),gr={class:"level-item"},br=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-paragraph"})],-1),yr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-heading"})],-1),wr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-list-ul"})],-1),Or=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-list-ol"})],-1),xr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-ruler-horizontal"})],-1),kr={class:"level-item"},Sr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-undo"})],-1),jr=Object(o["createVNode"])("span",{class:"icon"},[Object(o["createVNode"])("i",{class:"fas fa-redo"})],-1);function Nr(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("editor-content");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[i.editor?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Qn,[Object(o["createVNode"])("div",er,[Object(o["createVNode"])("button",{type:"button",class:["button",{"is-active":i.editor.isActive({textAlign:"left"})}],"aria-label":"Alinhar à esquerda",title:"Alinhar à esquerda",onClick:t[1]||(t[1]=function(e){return i.editor.chain().focus().setTextAlign("left").run()})},[tr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-active":i.editor.isActive({textAlign:"center"})}],"aria-label":"Alinhar ao centro",title:"Alinhar ao centro",onClick:t[2]||(t[2]=function(e){return i.editor.chain().focus().setTextAlign("center").run()})},[nr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-active":i.editor.isActive({textAlign:"right"})}],"aria-label":"Alinhar à direita",title:"Alinhar à direita",onClick:t[3]||(t[3]=function(e){return i.editor.chain().focus().setTextAlign("right").run()})},[rr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-active":i.editor.isActive({textAlign:"justify"})}],"aria-label":"Justificar",title:"Justificar",onClick:t[4]||(t[4]=function(e){return i.editor.chain().focus().setTextAlign("justify").run()})},[or],2)]),Object(o["createVNode"])("div",ir,[Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("bold")}],"aria-label":"Negrito",title:"Negrito",onClick:t[5]||(t[5]=function(e){return i.editor.chain().focus().toggleBold().run()})},[ar],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("italic")}],"aria-label":"Itálico",title:"Itálico",onClick:t[6]||(t[6]=function(e){return i.editor.chain().focus().toggleItalic().run()})},[sr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("underline")}],"aria-label":"Sublinhado",title:"Sublinhado",onClick:t[7]||(t[7]=function(e){return i.editor.chain().focus().toggleUnderline().run()})},[cr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("strike")}],"aria-label":"Rasurado",title:"Rasurado",onClick:t[8]||(t[8]=function(e){return i.editor.chain().focus().toggleStrike().run()})},[lr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("warning")}],"aria-label":"Aviso (vermelho)",title:"Aviso (vermelho)",onClick:t[9]||(t[9]=function(e){return i.editor.chain().focus().toggleWarning().run()})},[Object(o["createVNode"])("span",{class:"icon",style:i.editor.isActive("warning")?"color: #F08080;":"color: #B22222"},[ur],4)],2),Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Limpar Formatação",title:"Limpar Formatação",onClick:t[10]||(t[10]=function(e){return i.editor.chain().focus().unsetAllMarks().run()})},[dr])]),Object(o["createVNode"])("div",pr,[Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("clickable"),"is-static":!i.editor.isActive("link")}],"aria-label":"Botão",title:"Botão",onClick:t[11]||(t[11]=function(e){return i.editor.chain().focus().toggleClickable().run()})},[fr],2),i.editor.isActive("link")?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,type:"button",class:"button","aria-label":"Remover hiperligação",title:"Remover hiperligação",onClick:t[12]||(t[12]=function(e){i.editor.chain().focus.unsetClickable().run(),i.editor.chain().focus().unsetLink().run()})},[hr])):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:[{"is-active":i.editor.isActive("link")},"button"],type:"button","aria-label":"Adicionar hiperligação",title:"Adicionar hiperligação",onClick:t[13]||(t[13]=function(e){return a.setLink()})},[mr],2)),Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Adicionar imagem",title:"Adicionar imagem",onClick:t[14]||(t[14]=function(){return a.addImage&&a.addImage.apply(a,arguments)})},[vr])]),Object(o["createVNode"])("div",gr,[Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("paragraph")}],"aria-label":"Parágrafo",title:"Parágrafo",onClick:t[15]||(t[15]=function(e){return i.editor.chain().focus().setParagraph().run()})},[br],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("heading",{level:3})}],"aria-label":"Título",title:"Título",onClick:t[16]||(t[16]=function(e){return i.editor.chain().focus().toggleHeading({level:3}).run()})},[yr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("bulletList")}],"aria-label":"Lista de pontos",title:"Lista de pontos",onClick:t[17]||(t[17]=function(e){return i.editor.chain().focus().toggleBulletList().run()})},[wr],2),Object(o["createVNode"])("button",{type:"button",class:["button",{"is-dark":i.editor.isActive("orderedList")}],"aria-label":"Lista ordenada",title:"Lista ordenada",onClick:t[18]||(t[18]=function(e){return i.editor.chain().focus().toggleOrderedList().run()})},[Or],2),Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Linha horizontal",title:"Linha horizontal",onClick:t[19]||(t[19]=function(e){return i.editor.chain().focus().setHorizontalRule().run()})},[xr])]),Object(o["createVNode"])("div",kr,[Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Desfazer",title:"Desfazer",onClick:t[20]||(t[20]=function(e){return i.editor.chain().focus().undo().run()})},[Sr]),Object(o["createVNode"])("button",{type:"button",class:"button","aria-label":"Refazer",title:"Refazer",onClick:t[21]||(t[21]=function(e){return i.editor.chain().focus().redo().run()})},[jr])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{modelValue:i.content,"onUpdate:modelValue":t[22]||(t[22]=function(e){return i.content=e}),editor:i.editor,class:"p-3 custom-html content","aria-label":"Itálico",style:{border:"#121212 solid 1px","border-radius":"5px"}},null,8,["modelValue","editor"])])}function Cr(e){this.content=e}Cr.prototype={constructor:Cr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new Cr(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Cr(n)},addToStart:function(e,t){return new Cr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Cr(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new Cr(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Cr.from(e),e.size?new Cr(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Cr.from(e),e.size?new Cr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Cr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},Cr.from=function(e){if(e instanceof Cr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Cr(t)};var _r=Cr,Mr=_r;function Vr(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=Vr(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function Tr(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=e.child(--o),s=t.child(--i),c=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){var l=0,u=Math.min(a.text.length,s.text.length);while(l<u&&a.text[a.text.length-l-1]==s.text[s.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var d=Tr(a.content,s.content,n-1,r-1);if(d)return d}n-=c,r-=c}else n-=c,r-=c}}var Er=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},Dr={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Er.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<t;i++){var s=this.content[i],c=a+s.nodeSize;if(c>e&&!1!==n(s,r+a,o,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,e-l),Math.min(s.content.size,t-l),n,r+l)}a=c}},Er.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},Er.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){a.isText?(o+=a.text.slice(Math.max(e,s)-s,t-s),i=!n):a.isLeaf&&r?(o+=r,i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o},Er.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new Er(r,this.size+e.size)},Er.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,i=0;i<t;o++){var a=this.content[o],s=i+a.nodeSize;s>e&&((i<e||s>t)&&(a=a.isText?a.cut(Math.max(0,e-i),Math.min(a.text.length,t-i)):a.cut(Math.max(0,e-i-1),Math.min(a.content.size,t-i-1))),n.push(a),r+=a.nodeSize),i=s}return new Er(n,r)},Er.prototype.cutByIndex=function(e,t){return e==t?Er.empty:0==e&&t==this.content.length?this:new Er(this.content.slice(e,t))},Er.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new Er(r,o)},Er.prototype.addToStart=function(e){return new Er([e].concat(this.content),this.size+e.nodeSize)},Er.prototype.addToEnd=function(e){return new Er(this.content.concat(e),this.size+e.nodeSize)},Er.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},Dr.firstChild.get=function(){return this.content.length?this.content[0]:null},Dr.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Dr.childCount.get=function(){return this.content.length},Er.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},Er.prototype.maybeChild=function(e){return this.content[e]},Er.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},Er.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),Vr(this,e,t)},Er.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),Tr(this,e,t,n)},Er.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return Ir(0,e);if(e==this.size)return Ir(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e||t>0?Ir(n+1,i):Ir(n,r);r=i}},Er.prototype.toString=function(){return"<"+this.toStringInner()+">"},Er.prototype.toStringInner=function(){return this.content.join(", ")},Er.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},Er.fromJSON=function(e,t){if(!t)return Er.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Er(t.map(e.nodeFromJSON))},Er.fromArray=function(e){if(!e.length)return Er.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new Er(t||e,n)},Er.from=function(e){if(!e)return Er.empty;if(e instanceof Er)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Er([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Er.prototype,Dr);var Ar={index:0,offset:0};function Ir(e,t){return Ar.index=e,Ar.offset=t,Ar}function Pr(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Pr(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!Pr(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}Er.empty=new Er([],0);var Br=function(e,t){this.type=e,this.attrs=t};function Rr(e){var t=Error.call(this,e);return t.__proto__=Rr.prototype,t}Br.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},Br.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},Br.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},Br.prototype.eq=function(e){return this==e||this.type==e.type&&Pr(this.attrs,e.attrs)},Br.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},Br.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},Br.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},Br.setFrom=function(e){if(!e||0==e.length)return Br.none;if(e instanceof Br)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},Br.none=[],Rr.prototype=Object.create(Error.prototype),Rr.prototype.constructor=Rr,Rr.prototype.name="ReplaceError";var Lr=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},zr={size:{configurable:!0}};function $r(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,a=e.maybeChild(o),s=e.findIndex(n),c=s.index,l=s.offset;if(i==t||a.isText){if(l!=n&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(o,a.copy($r(a.content,t-i-1,n-i-1)))}function qr(e,t,n,r){var o=e.findIndex(t),i=o.index,a=o.offset,s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var c=qr(s.content,t-a-1,n);return c&&e.replaceChild(i,s.copy(c))}function Fr(e,t,n){if(n.openStart>e.depth)throw new Rr("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Rr("Inconsistent open depths");return Hr(e,t,n,0)}function Hr(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var a=Hr(e,t,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var s=Zr(n,e),c=s.start,l=s.end;return Gr(i,Yr(e,c,l,t,r))}var u=e.parent,d=u.content;return Gr(u,d.cut(0,e.parentOffset).append(n.content).append(d.cut(t.parentOffset)))}return Gr(i,Xr(e,t,r))}function Ur(e,t){if(!t.type.compatibleContent(e.type))throw new Rr("Cannot join "+t.type.name+" onto "+e.type.name)}function Wr(e,t,n){var r=e.node(n);return Ur(r,t.node(n)),r}function Kr(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Jr(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Kr(e.nodeAfter,r),i++));for(var s=i;s<a;s++)Kr(o.child(s),r);t&&t.depth==n&&t.textOffset&&Kr(t.nodeBefore,r)}function Gr(e,t){if(!e.type.validContent(t))throw new Rr("Invalid content for node "+e.type.name);return e.copy(t)}function Yr(e,t,n,r,o){var i=e.depth>o&&Wr(e,t,o+1),a=r.depth>o&&Wr(n,r,o+1),s=[];return Jr(null,e,o,s),i&&a&&t.index(o)==n.index(o)?(Ur(i,a),Kr(Gr(i,Yr(e,t,n,r,o+1)),s)):(i&&Kr(Gr(i,Xr(e,t,o+1)),s),Jr(t,n,o,s),a&&Kr(Gr(a,Xr(n,r,o+1)),s)),Jr(r,null,o,s),new Er(s)}function Xr(e,t,n){var r=[];if(Jr(null,e,n,r),e.depth>n){var o=Wr(e,t,n+1);Kr(Gr(o,Xr(e,t,n+1)),r)}return Jr(t,null,n,r),new Er(r)}function Zr(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(Er.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}zr.size.get=function(){return this.content.size-this.openStart-this.openEnd},Lr.prototype.insertAt=function(e,t){var n=qr(this.content,e+this.openStart,t,null);return n&&new Lr(n,this.openStart,this.openEnd)},Lr.prototype.removeBetween=function(e,t){return new Lr($r(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},Lr.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},Lr.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Lr.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},Lr.fromJSON=function(e,t){if(!t)return Lr.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Lr(Er.fromJSON(e,t.content),n,r)},Lr.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new Lr(e,n,r)},Object.defineProperties(Lr.prototype,zr),Lr.empty=new Lr(Er.empty,0,0);var Qr=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},eo={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Qr.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},eo.parent.get=function(){return this.node(this.depth)},eo.doc.get=function(){return this.node(0)},Qr.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Qr.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Qr.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Qr.prototype.start=function(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1},Qr.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Qr.prototype.before=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Qr.prototype.after=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},eo.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},eo.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},eo.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Qr.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r},Qr.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return Br.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},Qr.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},Qr.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Qr.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new oo(this,e,n)},Qr.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Qr.prototype.max=function(e){return e.pos>this.pos?e:this},Qr.prototype.min=function(e){return e.pos<this.pos?e:this},Qr.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Qr.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var a=i.content.findIndex(o),s=a.index,c=a.offset,l=o-c;if(n.push(i,s,r+c),!l)break;if(i=i.child(s),i.isText)break;o=l-1,r+=c+1}return new Qr(t,n,o)},Qr.resolveCached=function(e,t){for(var n=0;n<to.length;n++){var r=to[n];if(r.pos==t&&r.doc==e)return r}var o=to[no]=Qr.resolve(e,t);return no=(no+1)%ro,o},Object.defineProperties(Qr.prototype,eo);var to=[],no=0,ro=12,oo=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},io={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};io.start.get=function(){return this.$from.before(this.depth+1)},io.end.get=function(){return this.$to.after(this.depth+1)},io.parent.get=function(){return this.$from.node(this.depth)},io.startIndex.get=function(){return this.$from.index(this.depth)},io.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(oo.prototype,io);var ao=Object.create(null),so=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||Er.empty,this.marks=r||Br.none},co={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};co.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},co.childCount.get=function(){return this.content.childCount},so.prototype.child=function(e){return this.content.child(e)},so.prototype.maybeChild=function(e){return this.content.maybeChild(e)},so.prototype.forEach=function(e){this.content.forEach(e)},so.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},so.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},co.textContent.get=function(){return this.textBetween(0,this.content.size,"")},so.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},co.firstChild.get=function(){return this.content.firstChild},co.lastChild.get=function(){return this.content.lastChild},so.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},so.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},so.prototype.hasMarkup=function(e,t,n){return this.type==e&&Pr(this.attrs,t||e.defaultAttrs||ao)&&Br.sameSet(this.marks,n||Br.none)},so.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},so.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},so.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},so.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return Lr.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i),c=s.content.cut(r.pos-a,o.pos-a);return new Lr(c,r.depth-i,o.depth-i)},so.prototype.replace=function(e,t,n){return Fr(this.resolve(e),this.resolve(t),n)},so.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}},so.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},so.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},so.prototype.resolve=function(e){return Qr.resolveCached(this,e)},so.prototype.resolveNoCache=function(e){return Qr.resolve(this,e)},so.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},co.isBlock.get=function(){return this.type.isBlock},co.isTextblock.get=function(){return this.type.isTextblock},co.inlineContent.get=function(){return this.type.inlineContent},co.isInline.get=function(){return this.type.isInline},co.isText.get=function(){return this.type.isText},co.isLeaf.get=function(){return this.type.isLeaf},co.isAtom.get=function(){return this.type.isAtom},so.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uo(this.marks,e)},so.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},so.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=Er.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0},so.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},so.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},so.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=Br.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Br.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},so.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},so.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=Er.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(so.prototype,co);var lo=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uo(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(so);function uo(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var po=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},fo={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};po.parse=function(e,t){var n=new ho(e,t);if(null==n.next)return po.empty;var r=vo(n);n.next&&n.err("Unexpected trailing text");var o=No(ko(r));return Co(o,n),o},po.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},po.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},fo.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},fo.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},po.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},po.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];function o(i,a){var s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return Er.from(a.map((function(e){return e.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var d=o(u,a.concat(l));if(d)return d}}}return o(this,[])},po.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},po.prototype.computeWrapping=function(e){var t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var c=o.next[s];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!o.next[s+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},fo.edgeCount.get=function(){return this.next.length>>1},po.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},po.prototype.toString=function(){var e=[];function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}return t(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(po.prototype,fo),po.empty=new po(!0);var ho=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},mo={next:{configurable:!0}};function vo(e){var t=[];do{t.push(go(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function go(e){var t=[];do{t.push(bo(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function bo(e){for(var t=xo(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=wo(e,t)}return t}function yo(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function wo(e,t){var n=yo(e),r=n;return e.eat(",")&&(r="}"!=e.next?yo(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Oo(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.groups.indexOf(t)>-1&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}function xo(e){if(e.eat("(")){var t=vo(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=Oo(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}function ko(e){var t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}function i(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(i(n,t))}),[]);if("seq"==e.type)for(var a=0;;a++){var s=i(e.exprs[a],t);if(a==e.exprs.length-1)return s;o(s,t=n())}else{if("star"==e.type){var c=n();return r(t,c),o(i(e.expr,c),c),[r(c)]}if("plus"==e.type){var l=n();return o(i(e.expr,t),l),o(i(e.expr,l),l),[r(l)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){for(var u=t,d=0;d<e.min;d++){var p=n();o(i(e.expr,u),p),u=p}if(-1==e.max)o(i(e.expr,u),u);else for(var f=e.min;f<e.max;f++){var h=n();r(u,h),o(i(e.expr,u),h),u=h}return[r(u)]}if("name"==e.type)return[r(t,null,e.value)]}}}function So(e,t){return t-e}function jo(e,t){var n=[];return r(t),n.sort(So);function r(t){var o=e[t];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(t);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,c=a.to;s||-1!=n.indexOf(c)||r(c)}}}function No(e){var t=Object.create(null);return n(jo(e,0));function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),a=i>-1&&o[i+1];jo(e,r).forEach((function(e){a||o.push(n,a=[]),-1==a.indexOf(e)&&a.push(e)}))}}))}));for(var i=t[r.join(",")]=new po(r.indexOf(e.length-1)>-1),a=0;a<o.length;a+=2){var s=o[a+1].sort(So);i.next.push(o[a],t[s.join(",")]||n(s))}return i}}function Co(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var c=o.next[s],l=o.next[s+1];a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function _o(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Mo(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Vo(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Do(e[n]);return t}mo.next.get=function(){return this.tokens[this.pos]},ho.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},ho.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(ho.prototype,mo);var To=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Vo(n.attrs),this.defaultAttrs=_o(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},Eo={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Eo.isInline.get=function(){return!this.isBlock},Eo.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Eo.isLeaf.get=function(){return this.contentMatch==po.empty},Eo.isAtom.get=function(){return this.isLeaf||this.spec.atom},To.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},To.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},To.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Mo(this.attrs,e)},To.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new so(this,this.computeAttrs(e),Er.from(t),Br.setFrom(n))},To.prototype.createChecked=function(e,t,n){if(t=Er.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new so(this,this.computeAttrs(e),t,Br.setFrom(n))},To.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),t=Er.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(Er.empty,!0);return o?new so(this,e,t.append(o),Br.setFrom(n)):null},To.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},To.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},To.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},To.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Br.empty:e},To.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new To(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(To.prototype,Eo);var Do=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Ao={isRequired:{configurable:!0}};Ao.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Do.prototype,Ao);var Io=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=Vo(r.attrs),this.rank=t,this.excluded=null;var o=_o(this.attrs);this.instance=o&&new Br(this,o)};Io.prototype.create=function(e){return!e&&this.instance?this.instance:new Br(this,Mo(this.attrs,e))},Io.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new Io(e,r++,t,o)})),n},Io.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},Io.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},Io.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Po=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=Mr.from(e.nodes),this.spec.marks=Mr.from(e.marks),this.nodes=To.compile(this.spec.nodes,this),this.marks=Io.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[i]||(n[i]=po.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?Bo(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var s in this.marks){var c=this.marks[s],l=c.spec.excludes;c.excluded=null==l?[c]:""==l?[]:Bo(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Bo(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var c=e.marks[s];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Po.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof To))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Po.prototype.text=function(e,t){var n=this.nodes.text;return new lo(n,n.defaultAttrs,e,Br.setFrom(t))},Po.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Po.prototype.nodeFromJSON=function(e){return so.fromJSON(this,e)},Po.prototype.markFromJSON=function(e){return Br.fromJSON(this,e)},Po.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var Ro=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};Ro.prototype.parse=function(e,t){void 0===t&&(t={});var n=new Ko(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},Ro.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new Ko(this,t,!0);return n.addAll(e,null,t.from,t.to),Lr.maxOpen(n.finish())},Ro.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Yo(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},Ro.prototype.matchStyle=function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var a=i.getAttrs(t);if(!1===a)continue;i.attrs=a}return i}}},Ro.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r],i=null==o.priority?50:o.priority;if(i<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Zo(e)),e.mark=t}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[a].spec.parseDOM;r&&r.forEach((function(e){n(e=Zo(e)),e.node=a}))};for(var a in e.nodes)i();return t},Ro.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new Ro(e,Ro.schemaRules(e)))};var Lo={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},zo={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},$o={ol:!0,ul:!0},qo=1,Fo=2,Ho=4;function Uo(e){return(e?qo:0)|("full"===e?Fo:0)}var Wo=function(e,t,n,r,o,i,a){this.type=e,this.attrs=t,this.solid=o,this.match=i||(a&Ho?null:e.contentMatch),this.options=a,this.content=[],this.marks=n,this.activeMarks=Br.none,this.pendingMarks=r,this.stashMarks=[]};Wo.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(Er.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},Wo.prototype.finish=function(e){if(!(this.options&qo)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=Er.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Er.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Wo.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},Wo.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Qo(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},Wo.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Lo.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var Ko=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,o=t.topNode,i=Uo(t.preserveWhitespace)|(n?Ho:0);r=o?new Wo(o.type,o.attrs,Br.none,Br.none,!0,t.topMatch||o.type.contentMatch,i):new Wo(n?null:e.schema.topNodeType,null,Br.none,Br.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Jo={top:{configurable:!0},currentPos:{configurable:!0}};function Go(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&$o.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}function Yo(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Xo(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function Zo(e){var t={};for(var n in e)t[n]=e[n];return t}function Qo(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(e)){var i=[],a=function(e){i.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),o=r.type,s=r.next;if(o==t)return!0;if(i.indexOf(s)<0&&a(s))return!0}};return a(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function ei(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}Jo.top.get=function(){return this.nodes[this.open]},Ko.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(Xo(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Ko.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(n.options&Fo||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&qo)t=n.options&Fo?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},Ko.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();$o.hasOwnProperty(r)&&this.parser.normalizeLists&&Go(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:zo.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var i,a=this.top,s=this.needsBlock;if(Lo.hasOwnProperty(r))i=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(a),this.needsBlock=s}else this.addElementByRule(e,o,!1===o.consuming?n:null)},Ko.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},Ko.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Ko.prototype.readStyles=function(e){var t=Br.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t},Ko.prototype.addElementByRule=function(e,t,n){var r,o,i,a,s=this;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs,t.preserveWhitespace)):(i=this.parser.schema.marks[t.mark],a=i.create(t.attrs),this.addPendingMark(a));var c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,r)}r&&(this.sync(c),this.open--),a&&this.removePendingMark(a,c)},Ko.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&Lo.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},Ko.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0},Ko.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},Ko.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},Ko.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=null==r?o.options&~Ho:Uo(r);o.options&Ho&&0==o.content.length&&(i|=Ho),this.nodes.push(new Wo(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Ko.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},Ko.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Ko.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Jo.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},Ko.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},Ko.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},Ko.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){var o=t.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Ko.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},Ko.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(a(e-1,s))return!0;return!1}var l=s>0||0==s&&o?t.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;s--}return!0};return a(n.length-1,this.open)},Ko.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Ko.prototype.addPendingMark=function(e){var t=ei(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},Ko.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(e);if(o>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var i=r.popFromStashMark(e);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(Ko.prototype,Jo);var ti=function(e,t){this.nodes=e||{},this.marks=t||{}};function ni(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ri(e){return e.document||window.document}ti.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=ri(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);var n=0,a=0;while(n<i.length&&a<e.marks.length){var s=e.marks[a];if(r.marks[s.type.name]){if(!s.eq(i[n])||!1===s.type.spec.spanning)break;n+=2,a++}else a++}while(n<i.length)o=i.pop(),i.pop();while(a<e.marks.length){var c=e.marks[a++],l=r.serializeMark(c,e.isInline,t);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(e,t))})),n},ti.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=ti.renderSpec(ri(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},ti.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},ti.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&ti.renderSpec(ri(n),r(e,t))},ti.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,a=n?e.createElementNS(n,r):e.createElement(r),s=t[1],c=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s))for(var l in c=2,s)if(null!=s[l]){var u=l.indexOf(" ");u>0?a.setAttributeNS(l.slice(0,u),l.slice(u+1),s[l]):a.setAttribute(l,s[l])}for(var d=c;d<t.length;d++){var p=t[d];if(0===p){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var f=ti.renderSpec(e,p,n),h=f.dom,m=f.contentDOM;if(a.appendChild(h),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:a,contentDOM:i}},ti.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ti(this.nodesFromSchema(e),this.marksFromSchema(e)))},ti.nodesFromSchema=function(e){var t=ni(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ti.marksFromSchema=function(e){return ni(e.marks)};var oi=65535,ii=Math.pow(2,16);function ai(e,t){return e+t*ii}function si(e){return e&oi}function ci(e){return(e-(e&oi))/ii}var li=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},ui=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};ui.prototype.recover=function(e){var t=0,n=si(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+ci(e)},ui.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},ui.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},ui.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;var c=this.ranges[a+o],l=this.ranges[a+i],u=s+c;if(e<=u){var d=c?e==s?-1:e==u?1:t:t,p=s+r+(d<0?0:l);if(n)return p;var f=e==(t<0?s:u)?null:ai(a/3,e-s);return new li(p,t<0?e!=s:e!=u,f)}r+=l-c}return n?e+r:new li(e+r)},ui.prototype.touches=function(e,t){for(var n=0,r=si(t),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>e)break;var c=this.ranges[a+o],l=s+c;if(e<=l&&a==3*r)return!0;n+=this.ranges[a+i]-c}return!1},ui.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),c=this.ranges[r+t],l=this.ranges[r+n];e(a,a+c,s,s+l),o+=l-c}},ui.prototype.invert=function(){return new ui(this.ranges,!this.inverted)},ui.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},ui.offset=function(e){return 0==e?ui.empty:new ui(e<0?[0,-e,0]:[0,0,e])},ui.empty=new ui([]);var di=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function pi(e){var t=Error.call(this,e);return t.__proto__=pi.prototype,t}di.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new di(this.maps,this.mirror,e,t)},di.prototype.copy=function(){return new di(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},di.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},di.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},di.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},di.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},di.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},di.prototype.invert=function(){var e=new di;return e.appendMappingInverted(this),e},di.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},di.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},di.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o],a=i.mapResult(e,t);if(null!=a.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,e=this.maps[s].recover(a.recover);continue}}a.deleted&&(r=!0),e=a.pos}return n?e:new li(e,r)},pi.prototype=Object.create(Error.prototype),pi.prototype.constructor=pi,pi.prototype.name="TransformError";var fi=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new di},hi={before:{configurable:!0},docChanged:{configurable:!0}};function mi(){throw new Error("Override me")}hi.before.get=function(){return this.docs.length?this.docs[0]:this.doc},fi.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new pi(t.failed);return this},fi.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},hi.docChanged.get=function(){return this.steps.length>0},fi.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(fi.prototype,hi);var vi=Object.create(null),gi=function(){};gi.prototype.apply=function(e){return mi()},gi.prototype.getMap=function(){return ui.empty},gi.prototype.invert=function(e){return mi()},gi.prototype.map=function(e){return mi()},gi.prototype.merge=function(e){return null},gi.prototype.toJSON=function(){return mi()},gi.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=vi[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},gi.jsonID=function(e,t){if(e in vi)throw new RangeError("Duplicate use of step JSON ID "+e);return vi[e]=t,t.prototype.jsonID=e,t};var bi=function(e,t){this.doc=e,this.failed=t};bi.ok=function(e){return new bi(e,null)},bi.fail=function(e){return new bi(null,e)},bi.fromReplace=function(e,t,n,r){try{return bi.ok(e.replace(t,n,r))}catch(o){if(o instanceof Rr)return bi.fail(o.message);throw o}};var yi=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Oi(e,this.from,this.to)?bi.fail("Structure replace would overwrite content"):bi.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new ui([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?Lr.empty:new Lr(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?Lr.empty:new Lr(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,Lr.fromJSON(e,n.slice),!!n.structure)},t}(gi);gi.jsonID("replace",yi);var wi=function(e){function t(t,n,r,o,i,a,s){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Oi(e,this.from,this.gapFrom)||Oi(e,this.gapTo,this.to)))return bi.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return bi.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?bi.fromReplace(e,this.from,this.to,n):bi.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new ui([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,Lr.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(gi);function Oi(e,t,n){var r=e.resolve(t),o=n-t,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var a=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function xi(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function ki(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var o=e.$from.node(r),i=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,a,n))return r;if(0==r||o.type.spec.isolating||!xi(o,i,a))break}}function Si(e,t,n,r){void 0===r&&(r=e);var o=Ni(e,t),i=o&&Ci(r,t);return i?o.map(ji).concat({type:t,attrs:n}).concat(i.map(ji)):null}function ji(e){return{type:e,attrs:null}}function Ni(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}function Ci(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=a.length?a[a.length-1]:t,c=s.contentMatch,l=r;c&&l<o;l++)c=c.matchType(n.child(l).type);return c&&c.validEnd?a:null}function _i(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function Mi(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,c=n-2;s>i;s--,c--){var l=o.node(s),u=o.index(s);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(d=d.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(d))return!1}var f=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(f,f,h?h.type:o.node(i+1).type)}function Vi(e,t){var n=e.resolve(t),r=n.index();return Ti(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Ti(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function Ei(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function Di(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var c=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(c>0?1:0),u=r.node(s),d=!1;if(1==a)d=u.canReplace(l,l,o);else{var p=u.contentMatchAt(l).findWrapping(o.firstChild.type);d=p&&u.canReplaceWith(l,l,p[0])}if(d)return 0==c?r.pos:c<0?r.before(s+1):r.after(s+1)}return null}function Ai(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Ai(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return Er.fromArray(r)}gi.jsonID("replaceAround",wi),fi.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),a=r.after(o+1),s=i,c=a,l=Er.empty,u=0,d=o,p=!1;d>t;d--)p||n.index(d)>0?(p=!0,l=Er.from(n.node(d).copy(l)),u++):s--;for(var f=Er.empty,h=0,m=o,v=!1;m>t;m--)v||r.after(m+1)<r.end(m)?(v=!0,f=Er.from(r.node(m).copy(f)),h++):c++;return this.step(new wi(s,c,i,a,new Lr(l.append(f),u,h),l.size-u,!0))},fi.prototype.wrap=function(e,t){for(var n=Er.empty,r=t.length-1;r>=0;r--)n=Er.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new wi(o,i,o,i,new Lr(n,0,0),t.length,!0))},fi.prototype.setBlockType=function(e,t,n,r){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&_i(o.doc,o.mapping.slice(i).map(t),n)){o.clearIncompatible(o.mapping.slice(i).map(t,1),n);var a=o.mapping.slice(i),s=a.map(t,1),c=a.map(t+e.nodeSize,1);return o.step(new wi(s,c,s+1,c-1,new Lr(Er.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},fi.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new wi(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Lr(Er.from(i),0,0),1,!0))},fi.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=Er.empty,i=Er.empty,a=r.depth,s=r.depth-t,c=t-1;a>s;a--,c--){o=Er.from(r.node(a).copy(o));var l=n&&n[c];i=Er.from(l?l.type.create(l.attrs,i):r.node(a).copy(i))}return this.step(new yi(e,e,new Lr(o.append(i),t,t),!0))},fi.prototype.join=function(e,t){void 0===t&&(t=1);var n=new yi(e-t,e+t,Lr.empty,!0);return this.step(n)};var Ii=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Lr(Ai(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return bi.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new Pi(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(gi);gi.jsonID("addMark",Ii);var Pi=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new Lr(Ai(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return bi.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new Ii(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(gi);function Bi(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=Lr.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return Ri(o,i,r)?new yi(t,n,r):new Li(o,i,r).fit()}function Ri(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}gi.jsonID("removeMark",Pi),fi.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,e),p=Math.min(c+r.nodeSize,t),f=n.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(f)||(a&&a.to==d&&a.mark.eq(u[h])?a.to=p:o.push(a=new Pi(d,p,u[h])));s&&s.to==d?s.to=p:i.push(s=new Ii(d,p,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},fi.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(r,a){if(r.isInline){i++;var s=null;if(n instanceof Io){var c,l=r.marks;while(c=n.isInSet(l))(s||(s=[])).push(c),l=c.removeFromSet(l)}else n?n.isInSet(r.marks)&&(s=[n]):s=r.marks;if(s&&s.length)for(var u=Math.min(a+r.nodeSize,t),d=0;d<s.length;d++){for(var p=s[d],f=void 0,h=0;h<o.length;h++){var m=o[h];m.step==i-1&&p.eq(o[h].style)&&(f=m)}f?(f.to=u,f.step=i):o.push({style:p,from:Math.max(a,e),to:u,step:i})}}})),o.forEach((function(e){return r.step(new Pi(e.from,e.to,e.style))})),this},fi.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,a=0;a<r.childCount;a++){var s=r.child(a),c=i+s.nodeSize,l=n.matchType(s.type,s.attrs);if(l){n=l;for(var u=0;u<s.marks.length;u++)t.allowsMarkType(s.marks[u].type)||this.step(new Pi(i,c,s.marks[u]))}else o.push(new yi(i,c,Lr.empty));i=c}if(!n.validEnd){var d=n.fillBefore(Er.empty,!0);this.replace(i,i,new Lr(d,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},fi.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=Lr.empty);var r=Bi(this.doc,e,t,n);return r&&this.step(r),this},fi.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Lr(Er.from(n),0,0))},fi.prototype.delete=function(e,t){return this.replace(e,t,Lr.empty)},fi.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Li=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}this.placed=Er.empty;for(var i=e.depth;i>0;i--)this.placed=Er.from(e.node(i).copy(this.placed))},zi={depth:{configurable:!0}};function $i(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy($i(e.firstChild.content,t-1,n)))}function qi(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(qi(e.lastChild.content,t-1,n)))}function Fi(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Hi(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Hi(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Er.empty,!0)))),e.copy(r)}function Ui(e,t,n,r,o){var i=e.node(t),a=o?e.indexAfter(t):e.index(t);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!Wi(n,i.content,a)?s:null}function Wi(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Ki(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(Ki(i.content,t+1,n,r,i)))}if(t>r){var a=o.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(Er.empty,!0))}return e}function Ji(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;i==t.start(o)&&n.push(o)}return n}zi.depth.get=function(){return this.frontier.length-1},Li.prototype.fit=function(){while(this.unplaced.size){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;var i=this.placed,a=r.depth,s=o.depth;while(a&&s&&1==i.childCount)i=i.firstChild.content,a--,s--;var c=new Lr(i,a,s);return t>-1?new wi(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new yi(r.pos,o.pos,c):void 0},Li.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--){var n=void 0,r=void 0;t?(r=Fi(this.unplaced.content,t-1).firstChild,n=r.content):n=this.unplaced.content;for(var o=n.firstChild,i=this.depth;i>=0;i--){var a=this.frontier[i],s=a.type,c=a.match,l=void 0,u=void 0;if(1==e&&(o?c.matchType(o.type)||(u=c.fillBefore(Er.from(o),!1)):s.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:i,parent:r,inject:u};if(2==e&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:i,parent:r,wrap:l};if(r&&c.matchType(r.type))break}}},Li.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Fi(t,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new Lr(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)},Li.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Fi(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new Lr($i(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Lr($i(t,n,1),n,r)},Li.prototype.placeNodes=function(e){var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;while(this.depth>n)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,c=r?r.content:s.content,l=s.openStart-t,u=0,d=[],p=this.frontier[n],f=p.match,h=p.type;if(o){for(var m=0;m<o.childCount;m++)d.push(o.child(m));f=f.matchFragment(o)}var v=c.size+t-(s.content.size-s.openEnd);while(u<c.childCount){var g=c.child(u),b=f.matchType(g.type);if(!b)break;u++,(u>1||0==l||g.content.size)&&(f=b,d.push(Hi(g.mark(h.allowedMarks(g.marks)),1==u?l:0,u==c.childCount?v:-1)))}var y=u==c.childCount;y||(v=-1),this.placed=qi(this.placed,n,Er.from(d)),this.frontier[n].match=f,y&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,O=c;w<v;w++){var x=O.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),O=x.content}this.unplaced=y?0==t?Lr.empty:new Lr($i(s.content,t-1,1),t-1,v<0?s.openEnd:t-1):new Lr($i(s.content,t,u),s.openStart,s.openEnd)},Li.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Ui(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},Li.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=Ui(e,t,o,r,i);if(a){for(var s=t-1;s>=0;s--){var c=this.frontier[s],l=c.match,u=c.type,d=Ui(e,s,u,l,!0);if(!d||d.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}},Li.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=qi(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},Li.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=qi(this.placed,this.depth,Er.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Li.prototype.closeFrontierNode=function(){var e=this.frontier.pop(),t=e.match.fillBefore(Er.empty,!0);t.childCount&&(this.placed=qi(this.placed,this.frontier.length,t))},Object.defineProperties(Li.prototype,zi),fi.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(Ri(r,o,n))return this.step(new yi(e,t,n));var i=Ji(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var a=-(r.depth+1);i.unshift(a);for(var s=r.depth,c=r.pos-1;s>0;s--,c--){var l=r.node(s).type.spec;if(l.defining||l.isolating)break;i.indexOf(s)>-1?a=s:r.before(s)==c&&i.splice(1,0,-s)}for(var u=i.indexOf(a),d=[],p=n.openStart,f=n.content,h=0;;h++){var m=f.firstChild;if(d.push(m),h==n.openStart)break;f=m.content}p>0&&d[p-1].type.spec.defining&&r.node(u).type!=d[p-1].type?p-=1:p>=2&&d[p-1].isTextblock&&d[p-2].type.spec.defining&&r.node(u).type!=d[p-2].type&&(p-=2);for(var v=n.openStart;v>=0;v--){var g=(v+p+1)%(n.openStart+1),b=d[g];if(b)for(var y=0;y<i.length;y++){var w=i[(y+u)%i.length],O=!0;w<0&&(O=!1,w=-w);var x=r.node(w-1),k=r.index(w-1);if(x.canReplaceWith(k,k,b.type,b.marks))return this.replace(r.before(w),O?o.after(w):t,new Lr(Ki(n.content,0,n.openStart,g),g,n.openEnd))}}for(var S=this.steps.length,j=i.length-1;j>=0;j--){if(this.replace(e,t,n),this.steps.length>S)break;var N=i[j];N<0||(e=r.before(N),t=o.after(N))}return this},fi.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=Ei(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new Lr(Er.from(n),0,0))},fi.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=Ji(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)};var Gi=Object.create(null),Yi=function(e,t,n){this.ranges=n||[new Zi(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},Xi={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Xi.anchor.get=function(){return this.$anchor.pos},Xi.head.get=function(){return this.$head.pos},Xi.from.get=function(){return this.$from.pos},Xi.to.get=function(){return this.$to.pos},Xi.$from.get=function(){return this.ranges[0].$from},Xi.$to.get=function(){return this.ranges[0].$to},Xi.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},Yi.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Yi.prototype.replace=function(e,t){void 0===t&&(t=Lr.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var c=a[s],l=c.$from,u=c.$to,d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(u.pos),s?Lr.empty:t),0==s&&aa(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},Yi.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,c=e.mapping.slice(n),l=c.map(a.pos),u=c.map(s.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),aa(e,n,t.isInline?-1:1))}},Yi.findFrom=function(e,t,n){var r=e.parent.inlineContent?new Qi(e):ia(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?ia(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):ia(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},Yi.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new ra(e.node(0))},Yi.atStart=function(e){return ia(e,e,0,0,1)||new ra(e)},Yi.atEnd=function(e){return ia(e,e,e.content.size,e.childCount,-1)||new ra(e)},Yi.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Gi[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},Yi.jsonID=function(e,t){if(e in Gi)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gi[e]=t,t.prototype.jsonID=e,t},Yi.prototype.getBookmark=function(){return Qi.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Yi.prototype,Xi),Yi.prototype.visible=!0;var Zi=function(e,t){this.$from=e,this.$to=t},Qi=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=Lr.empty),e.prototype.replace.call(this,t,n),n==Lr.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ea(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var a=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!a)return e.near(r,o);r=a.$head}return n.parent.inlineContent||(0==i?n=r:(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor,n.pos<r.pos!=i<0&&(n=r))),new t(n,r)},Object.defineProperties(t.prototype,n),t}(Yi);Yi.jsonID("text",Qi);var ea=function(e,t){this.anchor=e,this.head=t};ea.prototype.map=function(e){return new ea(e.map(this.anchor),e.map(this.head))},ea.prototype.resolve=function(e){return Qi.between(e.resolve(this.anchor),e.resolve(this.head))};var ta=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,a=o.pos,s=n.resolve(a);return i?e.near(s):new t(s)},t.prototype.content=function(){return new Lr(Er.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new na(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(Yi);ta.prototype.visible=!1,Yi.jsonID("node",ta);var na=function(e){this.anchor=e};na.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new ea(r,r):new na(r)},na.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&ta.isSelectable(n)?new ta(t):Yi.near(t)};var ra=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=Lr.empty),n==Lr.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return oa},t}(Yi);Yi.jsonID("all",ra);var oa={map:function(){return this},resolve:function(e){return new ra(e)}};function ia(e,t,n,r,o,i){if(t.inlineContent)return Qi.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var s=t.child(a);if(s.isAtom){if(!i&&ta.isSelectable(s))return ta.create(e,n-(o<0?s.nodeSize:0))}else{var c=ia(e,s,n+o,o<0?s.childCount:0,o,i);if(c)return c}n+=s.nodeSize*o}}function aa(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof yi||o instanceof wi){var i,a=e.mapping.maps[r];a.forEach((function(e,t,n,r){null==i&&(i=r)})),e.setSelection(Yi.near(e.doc.resolve(i),n))}}}var sa=1,ca=2,la=4,ua=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|sa)&~ca,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&sa)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=ca,this},t.prototype.ensureMarks=function(e){return Br.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&ca)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=this.updated&~ca,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Br.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(Yi.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=la,this},n.scrolledIntoView.get=function(){return(this.updated&la)>0},Object.defineProperties(t.prototype,n),t}(fi);function da(e,t){return t&&e?e.bind(t):e}var pa=function(e,t,n){this.name=e,this.init=da(t.init,n),this.apply=da(t.apply,n)},fa=[new pa("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new pa("selection",{init:function(e,t){return e.selection||Yi.atStart(t.doc)},apply:function(e){return e.selection}}),new pa("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new pa("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],ha=function(e,t){var n=this;this.schema=e,this.fields=fa.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new pa(e.key,e.spec.state,e))}))},ma=function(e){this.config=e},va={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};va.schema.get=function(){return this.config.schema},va.plugins.get=function(){return this.config.plugins},ma.prototype.apply=function(e){return this.applyTransaction(e).state},ma.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},ma.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,c=r?r[i].state:this,l=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},ma.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new ma(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<ga.length;i++)ga[i](this,e,t);return t},va.tr.get=function(){return new ua(this)},ma.create=function(e){for(var t=new ha(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new ma(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},ma.prototype.reconfigure=function(e){for(var t=new ha(this.schema,e.plugins),n=t.fields,r=new ma(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},ma.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},ma.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new ha(e.schema,e.plugins),o=new ma(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=so.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=Yi.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var i in n){var a=n[i],s=a.spec.state;if(a.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=s.fromJSON.call(a,e,t[i],o))}o[r.name]=r.init(e,o)}})),o},ma.addApplyListener=function(e){ga.push(e)},ma.removeApplyListener=function(e){var t=ga.indexOf(e);t>-1&&ga.splice(t,1)},Object.defineProperties(ma.prototype,va);var ga=[];function ba(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=ba(o,t,{})),n[r]=o}return n}var ya=function(e){this.props={},e.props&&ba(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:Oa("plugin")};ya.prototype.getState=function(e){return e[this.key]};var wa=Object.create(null);function Oa(e){return e in wa?e+"$"+ ++wa[e]:(wa[e]=0,e+"$")}var xa=function(e){void 0===e&&(e="key"),this.key=Oa(e)};xa.prototype.get=function(e){return e.config.pluginsByKey[this.key]},xa.prototype.getState=function(e){return e[this.key]};var ka={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var Sa=/Edge\/(\d+)/.exec(navigator.userAgent),ja=/MSIE \d/.test(navigator.userAgent),Na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ka.mac=/Mac/.test(navigator.platform);var Ca=ka.ie=!!(ja||Na||Sa);ka.ie_version=ja?document.documentMode||6:Na?+Na[1]:Sa?+Sa[1]:null,ka.gecko=!Ca&&/gecko\/(\d+)/i.test(navigator.userAgent),ka.gecko_version=ka.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var _a=!Ca&&/Chrome\/(\d+)/.exec(navigator.userAgent);ka.chrome=!!_a,ka.chrome_version=_a&&+_a[1],ka.safari=!Ca&&/Apple Computer/.test(navigator.vendor),ka.ios=ka.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),ka.android=/Android \d/.test(navigator.userAgent),ka.webkit="webkitFontSmoothing"in document.documentElement.style,ka.webkit_version=ka.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Ma=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Va=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Ta=null,Ea=function(e,t,n){var r=Ta||(Ta=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},Da=function(e,t,n,r){return n&&(Ia(e,t,n,r,-1)||Ia(e,t,n,r,1))},Aa=/^(img|br|input|textarea|hr)$/i;function Ia(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:Pa(e))){var i=e.parentNode;if(1!=i.nodeType||Ra(e)||Aa.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Ma(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(o<0?-1:0)],"false"==e.contentEditable)return!1;t=o<0?Pa(e):0}}}function Pa(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ba(e,t,n){for(var r=0==t,o=t==Pa(e);r||o;){if(e==n)return!0;var i=Ma(e);if(e=e.parentNode,!e)return!1;r=r&&0==i,o=o&&i==Pa(e)}}function Ra(e){for(var t,n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var La=function(e){var t=e.isCollapsed;return t&&ka.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function za(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function $a(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function qa(e,t){return"number"==typeof e?e:e[t]}function Fa(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Ha(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;;a=Va(a)){if(!a)break;if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,c=s?$a(i):Fa(a),l=0,u=0;if(t.top<c.top+qa(r,"top")?u=-(c.top-t.top+qa(o,"top")):t.bottom>c.bottom-qa(r,"bottom")&&(u=t.bottom-c.bottom+qa(o,"bottom")),t.left<c.left+qa(r,"left")?l=-(c.left-t.left+qa(o,"left")):t.right>c.right-qa(r,"right")&&(l=t.right-c.right+qa(o,"right")),l||u)if(s)i.defaultView.scrollBy(l,u);else{var d=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),l&&(a.scrollLeft+=l);var f=a.scrollLeft-d,h=a.scrollTop-p;t={left:t.left-f,top:t.top-h,right:t.right-f,bottom:t.bottom-h}}if(s)break}}}function Ua(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s!=e.dom&&e.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=o-20){t=s,n=c.top;break}}}return{refDOM:t,refTop:n,stack:Wa(e.dom)}}function Wa(e){for(var t=[],n=e.ownerDocument;e;e=Va(e))if(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e==n)break;return t}function Ka(e){var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0;Ja(r,0==o?0:o-n)}function Ja(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=a&&(o.scrollLeft=a)}}var Ga=null;function Ya(e){if(e.setActive)return e.setActive();if(Ga)return e.focus(Ga);var t=Wa(e);e.focus(null==Ga?{get preventScroll(){return Ga={preventScroll:!0},!0}}:void 0),Ga||(Ga=!1,Ja(t,0))}function Xa(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=Ea(c).getClientRects()}for(var d=0;d<u.length;d++){var p=u[d];if(p.top<=a&&p.bottom>=s){a=Math.max(p.bottom,a),s=Math.min(p.top,s);var f=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(f<o){n=c,o=f,r=f&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&f&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?Za(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:Xa(n,r)}function Za(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=as(r,1);if(i.top!=i.bottom&&Qa(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function Qa(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function es(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function ts(e,t,n){var r=Xa(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}function ns(e,t,n,r){for(var o=-1,i=t;;){if(i==e.dom)break;var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}function rs(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=e.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),c=0;c<s.length;c++){var l=s[c];if(Qa(t,l))return rs(a,t,l)}if((i=(i+1)%r)==o)break}return e}function is(e,t){var n,r,o,i,a=e.root;if(a.caretPositionFromPoint)try{var s=a.caretPositionFromPoint(t.left,t.top);s&&(n=s,o=n.offsetNode,i=n.offset)}catch(v){}if(!o&&a.caretRangeFromPoint){var c=a.caretRangeFromPoint(t.left,t.top);c&&(r=c,o=r.startContainer,i=r.startOffset)}var l,u=a.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var d=e.dom.getBoundingClientRect();if(!Qa(t,d))return null;if(u=rs(e.dom,t,d),!u)return null}if(ka.safari)for(var p=u;o&&p;p=Va(p))p.draggable&&(o=i=null);if(u=es(u,t),o){if(ka.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var f,h=o.childNodes[i];"IMG"==h.nodeName&&(f=h.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=ns(e,o,i,t))}null==l&&(l=ts(e,u,t));var m=e.docView.nearestDesc(u,!0);return{pos:l,inside:m?m.posAtStart-m.border:-1}}function as(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var ss=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function cs(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=ka.webkit||ka.gecko;if(3==o.nodeType){if(!a||!ss.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var s=i,c=i,l=n<0?1:-1;return n<0&&!i?(c++,l=-1):n>=0&&i==o.nodeValue.length?(s--,l=1):n<0?s--:c++,ls(as(Ea(o,s,c),l),l<0)}var u=as(Ea(o,i,i),n);if(ka.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var d=as(Ea(o,i-1,i-1),-1);if(d.top==u.top){var p=as(Ea(o,i,i+1),-1);if(p.top!=u.top)return ls(p,p.left<d.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==Pa(o))){var f=o.childNodes[i-1];if(1==f.nodeType)return us(f.getBoundingClientRect(),!1)}if(i<Pa(o)){var h=o.childNodes[i];if(1==h.nodeType)return us(h.getBoundingClientRect(),!0)}return us(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==Pa(o))){var m=o.childNodes[i-1],v=3==m.nodeType?Ea(m,Pa(m)-(a?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(v)return ls(as(v,1),!1)}if(i<Pa(o)){var g=o.childNodes[i],b=3==g.nodeType?Ea(g,0,a?0:1):1==g.nodeType?g:null;if(b)return ls(as(b,-1),!0)}return ls(as(3==o.nodeType?Ea(o):o,-n),n>=0)}function ls(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function us(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function ds(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function ps(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return ds(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1),r=t.node;;){var i=e.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var a=cs(e,o.pos,1),s=r.firstChild;s;s=s.nextSibling){var c=void 0;if(1==s.nodeType)c=s.getClientRects();else{if(3!=s.nodeType)continue;c=Ea(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top&&("up"==n?u.bottom<a.top+1:u.top>a.bottom-1))return!1}}return!0}))}var fs=/[\u0590-\u08ac]/;function hs(e,t,n){var r=t.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,a=!i,s=i==o.parent.content.size,c=getSelection();return fs.test(o.parent.textContent)&&c.modify?ds(e,t,(function(){var t=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,a=c.caretBidiLevel;c.modify("move",n,"character");var s=o.depth?e.docView.domAfterPos(o.before()):e.dom,l=!s.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(t),null!=a&&(c.caretBidiLevel=a),l})):"left"==n||"backward"==n?a:s}var ms=null,vs=null,gs=!1;function bs(e,t,n){return ms==t&&vs==n?gs:(ms=t,vs=n,gs="up"==n||"down"==n?ps(e,t,n):hs(e,t,n))}var ys=0,ws=1,Os=2,xs=3,ks=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=ys},Ss={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};ks.prototype.matchesWidget=function(){return!1},ks.prototype.matchesMark=function(){return!1},ks.prototype.matchesNode=function(){return!1},ks.prototype.matchesHack=function(){return!1},Ss.beforePosition.get=function(){return!1},ks.prototype.parseRule=function(){return null},ks.prototype.stopEvent=function(){return!1},Ss.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},Ss.border.get=function(){return 0},ks.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},ks.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},Ss.posBefore.get=function(){return this.parent.posBeforeChild(this)},Ss.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Ss.posAfter.get=function(){return this.posBefore+this.size},Ss.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ks.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;r=e.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;i=e.nextSibling}while(i&&(!(a=i.pmViewDesc)||a.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(e==this.dom&&this.contentDOM)s=t>Ma(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},ks.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},ks.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},ks.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},ks.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},ks.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){while(r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM))n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!i||!i.size||i.border||t<0&&o)||i&&i.domAtom&&e<n+i.size)return{node:this.contentDOM,offset:i?Ma(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var a=n+i.size;if(!i.domAtom&&(t<0&&!i.border?a>=e:a>e)&&(a>e||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(e-n-i.border,t);n=a}},ks.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==r&&e<=c){var l=i+s.border;if(e>=l&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var u=a;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=Ma(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(var p=a+1;p<this.children.length;p++){var f=this.children[p];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Ma(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},ks.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},ks.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},ks.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var c=this.children[a],l=s+c.size;if(o>s&&i<l)return c.setSelection(e-s-c.border,t-s-c.border,n,r);s=l}var u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),p=n.getSelection(),f=!1;if((ka.gecko||ka.safari)&&e==t){var h=u.node,m=u.offset;if(3==h.nodeType)f=m&&"\n"==h.nodeValue[m-1],f&&m==h.nodeValue.length&&h.nextSibling&&"BR"==h.nextSibling.nodeName&&(u=d={node:h.parentNode,offset:Ma(h)+1});else{var v=h.childNodes[m-1];f=v&&("BR"==v.nodeName||"false"==v.contentEditable)}}if(ka.gecko&&p.focusNode&&p.focusNode!=d.node&&1==p.focusNode.nodeType){var g=p.focusNode.childNodes[p.focusOffset];g&&"false"==g.contentEditable&&(r=!0)}if(r||f&&ka.safari||!Da(u.node,u.offset,p.anchorNode,p.anchorOffset)||!Da(d.node,d.offset,p.focusNode,p.focusOffset)){var b=!1;if((p.extend||e==t)&&!f){p.collapse(u.node,u.offset);try{e!=t&&p.extend(d.node,d.offset),b=!0}catch(O){if(!(O instanceof DOMException))throw O}}if(!b){if(e>t){var y=u;u=d,d=y}var w=document.createRange();w.setEnd(d.node,d.offset),w.setStart(u.node,u.offset),p.removeAllRanges(),p.addRange(w)}}},ks.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},Ss.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ks.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+o.border,s=i-o.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?Os:ws,void(e!=a||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-a,t-a):o.dirty=xs);o.dirty=xs}n=i}this.dirty=Os},ks.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?Os:ws;t.dirty<n&&(t.dirty=n)}},Ss.domAtom.get=function(){return!1},Object.defineProperties(ks.prototype,Ss);var js=[],Ns=function(e){function t(t,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,js,a,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==ys&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(ks),Cs=function(e){function t(t,n,r,o){e.call(this,t,js,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(ks),_s=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=ti.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return this.dirty!=xs&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),this.dirty!=ys){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ys}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=Ys(i,n,a,r)),e>0&&(i=Ys(i,0,e,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o},t}(ks),Ms=function(e){function t(t,n,r,o,i,a,s,c,l){e.call(this,t,n.isLeaf?js:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,i,a){var s,c,l=i.nodeViews[n.type.name],u=l&&l(n,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a}),r,o),d=u&&u.dom,p=u&&u.contentDOM;if(n.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(n.text);else d||(s=ti.renderSpec(document,n.type.spec.toDOM(n)),d=s.dom,p=s.contentDOM);p||n.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),n.type.spec.draggable&&(d.draggable=!0));var f=d;return d=zs(d,r,n),u?c=new Ds(e,n,r,o,d,p,f,u,i,a+1):n.isText?new Ts(e,n,r,o,d,f,i):new t(e,n,r,o,d,p,f,i,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Er.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return this.dirty==ys&&e.eq(this.node)&&$s(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,i=r&&e.composing&&this.localCompositionNode(e,t),a=new Fs(this,i&&i.node);Ws(this.node,this.innerDeco,(function(t,i,s){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&a.syncToMarks(i==n.node.childCount?Br.none:n.node.child(i).marks,r,e),a.placeWidget(t,e,o)}),(function(t,n,i,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,i,s)||a.updateNextNode(t,n,i,e,s)||a.addNode(t,n,i,e,o),o+=t.nodeSize})),a.syncToMarks(js,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Os)&&(i&&this.protectLocalComposition(e,i),As(this.contentDOM,this.children,e),ka.ios&&Ks(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(!(e.state.selection instanceof Qi)||r<t||o>t+this.node.content.size)){var i=e.root.getSelection(),a=Js(i.focusNode,i.focusOffset);if(a&&this.dom.contains(a.parentNode)){var s=a.nodeValue,c=Gs(this.node.content,s,r-t,o-t);return c<0?null:{node:a,pos:c,text:s}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new Cs(this,i,n,o);e.compositionNodes.push(a),this.children=Ys(this.children,r,r+o.length,e,a)}},t.prototype.update=function(e,t,n,r){return!(this.dirty==xs||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ys},t.prototype.updateOuterDeco=function(e){if(!$s(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Rs(this.dom,this.nodeDOM,Bs(this.outerDeco,this.node,t),Bs(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(ks);function Vs(e,t,n,r,o){return zs(r,t,e),new Ms(null,e,t,n,r,r,r,o,0)}var Ts=function(e){function t(t,n,r,o,i,a,s){e.call(this,t,n,r,o,i,null,a,s)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(this.dirty==xs||this.dirty!=ys&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==ys&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ys,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(Ms),Es=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return this.dirty==ys},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(ks),Ds=function(e){function t(t,n,r,o,i,a,s,c,l,u){e.call(this,t,n,r,o,i,a,s,l,u),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(this.dirty==xs)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(Ms);function As(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var a=t[i],s=a.dom;if(s.parentNode==e){while(s!=r)r=qs(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(s,r);if(a instanceof _s){var c=r?r.previousSibling:e.lastChild;As(a.contentDOM,a.children,n),r=c?c.nextSibling:e.firstChild}}while(r)r=qs(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}function Is(e){e&&(this.nodeName=e)}Is.prototype=Object.create(null);var Ps=[new Is];function Bs(e,t,n){if(0==e.length)return Ps;for(var r=n?Ps[0]:new Is,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new Is(a.nodeName)),a){var c=a[s];null!=c&&(n&&1==o.length&&o.push(r=new Is(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+c:"style"==s?r.style=(r.style?r.style+";":"")+c:"nodeName"!=s&&(r[s]=c))}}return o}function Rs(e,t,n,r){if(n==Ps&&r==Ps)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var c=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(o),s=Ps[0]),o=c}Ls(o,s||Ps[0],a)}return o}function Ls(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):js,a=n.class?n.class.split(" ").filter(Boolean):js,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var c=0;c<a.length;c++)-1==i.indexOf(a[c])&&e.classList.add(a[c])}if(t.style!=n.style){if(t.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(t.style))e.style.removeProperty(l[1])}n.style&&(e.style.cssText+=n.style)}}function zs(e,t,n){return Rs(e,e,Ps,Bs(t,n,1!=e.nodeType))}function $s(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function qs(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Fs=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Hs(e.node.content,e.children)};function Hs(e,t){for(var n=e.childCount,r=t.length,o=new Map;n>0&&r>0;r--){var i=t[r-1],a=i.node;if(a){if(a!=e.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}function Us(e,t){return e.type.side-t.type.side}function Ws(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],c=null,l=0;;){if(a<o.length&&o[a].to==i){var u=o[a++],d=void 0;while(a<o.length&&o[a].to==i)(d||(d=[u])).push(o[a++]);if(d){d.sort(Us);for(var p=0;p<d.length;p++)n(d[p],l,!!c)}else n(u,l,!!c)}var f=void 0,h=void 0;if(c)h=-1,f=c,c=null;else{if(!(l<e.childCount))break;h=l,f=e.child(l++)}for(var m=0;m<s.length;m++)s[m].to<=i&&s.splice(m--,1);while(a<o.length&&o[a].from<=i&&o[a].to>i)s.push(o[a++]);var v=i+f.nodeSize;if(f.isText){var g=v;a<o.length&&o[a].from<g&&(g=o[a].from);for(var b=0;b<s.length;b++)s[b].to<g&&(g=s[b].to);g<v&&(c=f.cut(g-i),f=f.cut(0,g-i),v=g,h=-1)}var y=s.length?f.isInline&&!f.isLeaf?s.filter((function(e){return!e.inline})):s.slice():js;r(f,y,t.forChild(i,f),h),i=v}else for(var w=0;w<e.childCount;w++){var O=e.child(w);r(O,o,t.forChild(i,O),w),i+=O.nodeSize}}function Ks(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Js(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=Pa(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function Gs(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var a=e.child(o++),s=i;if(i+=a.nodeSize,a.isText){var c=a.text;while(o<e.childCount){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(t,r-s);if(u>=0&&u+t.length+s>=n)return s+u}}}return-1}function Ys(e,t,n,r,o){for(var i=[],a=0,s=0;a<e.length;a++){var c=e[a],l=s,u=s+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function Xs(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var s,c,l=r.resolve(a);if(La(n)){s=l;while(o&&!o.node)o=o.parent;if(o&&o.node.isAtom&&ta.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!Ba(n.focusNode,n.focusOffset,o.dom))){var u=o.posBefore;c=new ta(a==u?l:r.resolve(u))}}else{var d=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(d<0)return null;s=r.resolve(d)}if(!c){var p="pointer"==t||e.state.selection.head<l.pos&&!i?1:-1;c=cc(e,s,l,p)}return c}function Zs(e){return e.editable?e.hasFocus():uc(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Qs(e,t){var n=e.state.selection;if(ac(e,n),Zs(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)ic(e);else{var r,o,i=n.anchor,a=n.head;!ec||n instanceof Qi||(n.$from.parent.inlineContent||(r=tc(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=tc(e,n.to))),e.docView.setSelection(i,a,e.root,t),ec&&(r&&rc(r),o&&rc(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oc(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Fs.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Fs.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Fs.prototype.syncToMarks=function(e,t,n){var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=ys,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<e.length){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[o])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=_s.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},Fs.prototype.findNodeMatch=function(e,t,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var a=this.index;a<o.length;a++)if(o[a].matchesNode(e,t,n)){i=a;break}}else for(var s=this.index,c=Math.min(o.length,s+1);s<c;s++){var l=o[s];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Fs.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof Ms){var s=this.preMatch.matched.get(a);if(null!=s&&s!=o)return!1;var c=a.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=xs&&$s(t,a.outerDeco));if(!l&&a.update(e,t,n,r))return this.destroyBetween(this.index,i),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Fs.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,Ms.create(this.top,e,t,n,r,o)),this.changed=!0},Fs.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Ns(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},Fs.prototype.addTextblockHacks=function(){var e=this.top.children[this.index-1];while(e instanceof _s)e=e.children[e.children.length-1];if(!e||!(e instanceof Ts)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Es(this.top,js,t,null)),this.changed=!0}};var ec=ka.safari||ka.chrome&&ka.chrome_version<63;function tc(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(ka.safari&&i&&"false"==i.contentEditable)return nc(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return nc(i);if(a)return nc(a)}}function nc(e){return e.contentEditable="true",ka.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function rc(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function oc(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){Zs(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function ic(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Ma(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&ka.ie&&ka.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function ac(e,t){if(t instanceof ta){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(sc(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else sc(e)}function sc(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function cc(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Qi.between(t,n,r)}function lc(e){return(!e.editable||e.root.activeElement==e.dom)&&uc(e)}function uc(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function dc(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return Da(t.node,t.offset,n.anchorNode,n.anchorOffset)}function pc(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&Yi.findFrom(a,t)}function fc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function hc(e,t,n){var r=e.state.selection;if(!(r instanceof Qi)){if(r instanceof ta&&r.node.isInline)return fc(e,new Qi(t>0?r.$to:r.$from));var o=pc(e.state,t);return!!o&&fc(e,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=pc(e.state,t);return!!(i&&i instanceof ta)&&fc(e,i)}if(!(ka.mac&&n.indexOf("m")>-1)){var a,s=r.$head,c=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!c||c.isText)return!1;var l=t<0?s.pos-c.nodeSize:s.pos;return!!(c.isAtom||(a=e.docView.descAt(l))&&!a.contentDOM)&&(ta.isSelectable(c)?fc(e,new ta(t<0?e.state.doc.resolve(s.pos-c.nodeSize):s)):!!ka.webkit&&fc(e,new Qi(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}}function mc(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vc(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function gc(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(ka.gecko&&1==n.nodeType&&r<mc(n)&&vc(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(vc(s))o=n,i=--r;else{if(3!=s.nodeType)break;n=s,r=n.nodeValue.length}}else{if(yc(n))break;var c=n.previousSibling;while(c&&vc(c))o=n.parentNode,i=Ma(c),c=c.previousSibling;if(c)n=c,r=mc(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}a?wc(e,t,n,r):o&&wc(e,t,o,i)}}function bc(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=mc(n);;)if(r<a){if(1!=n.nodeType)break;var s=n.childNodes[r];if(!vc(s))break;o=n,i=++r}else{if(yc(n))break;var c=n.nextSibling;while(c&&vc(c))o=c.parentNode,i=Ma(c)+1,c=c.nextSibling;if(c)n=c,r=0,a=mc(n);else{if(n=n.parentNode,n==e.dom)break;r=a=0}}o&&wc(e,t,o,i)}}function yc(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function wc(e,t,n,r){if(La(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&Qs(e)}),50)}function Oc(e,t,n){var r=e.state.selection;if(r instanceof Qi&&!r.empty||n.indexOf("s")>-1)return!1;if(ka.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=pc(e.state,t);if(a&&a instanceof ta)return fc(e,a)}if(!o.parent.inlineContent){var s=t<0?o:i,c=r instanceof ra?Yi.near(s,t):Yi.findFrom(s,t);return!!c&&fc(e,c)}return!1}function xc(e,t){if(!(e.state.selection instanceof Qi))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function kc(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Sc(e){if(ka.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;kc(e,o,!0),setTimeout((function(){return kc(e,o,!1)}),20)}}}function jc(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Nc(e,t){var n=t.keyCode,r=jc(t);return 8==n||ka.mac&&72==n&&"c"==r?xc(e,-1)||gc(e):46==n||ka.mac&&68==n&&"c"==r?xc(e,1)||bc(e):13==n||27==n||(37==n?hc(e,-1,r)||gc(e):39==n?hc(e,1,r)||bc(e):38==n?Oc(e,-1,r)||gc(e):40==n?Sc(e)||Oc(e,1,r)||bc(e):r==(ka.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Cc(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,i=r.fromOffset,a=r.toOffset,s=r.from,c=r.to,l=e.root.getSelection(),u=null,d=l.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],La(l)||u.push({node:l.focusNode,offset:l.focusOffset})),ka.chrome&&8===e.lastKeyCode)for(var p=a;p>i;p--){var f=o.childNodes[p-1],h=f.pmViewDesc;if("BR"==f.nodeName&&!h){a=p;break}if(!h||h.size)break}var m=e.state.doc,v=e.someProp("domParser")||Ro.fromSchema(e.state.schema),g=m.resolve(s),b=null,y=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:a,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:_c,context:g});if(u&&null!=u[0].pos){var w=u[0].pos,O=u[1]&&u[1].pos;null==O&&(O=w),b={anchor:w+s,head:O+s}}return{doc:y,sel:b,from:s,to:c}}function _c(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(ka.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||ka.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Mc(e,t,n,r,o){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=Xs(e,i);if(a&&!e.state.selection.eq(a)){var s=e.state.tr.setSelection(a);"pointer"==i?s.setMeta("pointer",!0):"key"==i&&s.scrollIntoView(),e.dispatch(s)}}else{var c=e.state.doc.resolve(t),l=c.sharedDepth(n);t=c.before(l+1),n=e.state.doc.resolve(n).after(l+1);var u=e.state.selection,d=Cc(e,t,n);if(ka.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,f=p&&p.nodeValue?p.nodeValue.length:1;d.sel={anchor:d.sel.anchor+f,head:d.sel.anchor+f}}var h,m,v=e.state.doc,g=v.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(h=e.state.selection.to,m="end"):(h=e.state.selection.from,m="start"),e.lastKeyCode=null;var b=Ac(g.content,d.doc.content,d.from,h,m);if(!b){if(!(r&&u instanceof Qi&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((ka.ios&&e.lastIOSEnter>Date.now()-225||ka.android)&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,za(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var y=Vc(e,e.state.doc,d.sel);y&&!y.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(y))}return}b={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof Qi&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),ka.ie&&ka.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>d.from&&"  "==d.doc.textBetween(b.start-d.from-1,b.start-d.from+1)&&(b.start--,b.endA--,b.endB--);var w,O=d.doc.resolveNoCache(b.start-d.from),x=d.doc.resolveNoCache(b.endB-d.from),k=O.sameParent(x)&&O.parent.inlineContent;if((ka.ios&&e.lastIOSEnter>Date.now()-225&&(!k||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!k&&O.pos<d.doc.content.size&&(w=Yi.findFrom(d.doc.resolve(O.pos+1),1,!0))&&w.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,za(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&Ec(v,b.start,b.endA,O,x)&&e.someProp("handleKeyDown",(function(t){return t(e,za(8,"Backspace"))})))ka.android&&ka.chrome&&e.domObserver.suppressSelectionUpdates();else{ka.chrome&&ka.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),ka.android&&!k&&O.start()!=x.start()&&0==x.parentOffset&&O.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==b.endA&&(b.endB-=2,x=d.doc.resolveNoCache(b.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,za(13,"Enter"))}))}),20));var S,j,N,C,_=b.start,M=b.endA;if(k)if(O.pos==x.pos)ka.ie&&ka.ie_version<=11&&0==O.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Qs(e)}),20)),S=e.state.tr.delete(_,M),j=v.resolve(b.start).marksAcross(v.resolve(b.endA));else if(b.endA==b.endB&&(C=v.resolve(b.start))&&(N=Tc(O.parent.content.cut(O.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,b.endA-C.start()))))S=e.state.tr,"add"==N.type?S.addMark(_,M,N.mark):S.removeMark(_,M,N.mark);else if(O.parent.child(O.index()).isText&&O.index()==x.index()-(x.textOffset?0:1)){var V=O.parent.textBetween(O.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,_,M,V)})))return;S=e.state.tr.insertText(V,_,M)}if(S||(S=e.state.tr.replace(_,M,d.doc.slice(b.start-d.from,b.endB-d.from))),d.sel){var T=Vc(e,S.doc,d.sel);T&&!(ka.chrome&&ka.android&&e.composing&&T.empty&&(b.start!=b.endB||e.lastAndroidDelete<Date.now()-100)&&(T.head==_||T.head==S.mapping.map(M)-1)||ka.ie&&T.empty&&T.head==_)&&S.setSelection(T)}j&&S.ensureMarks(j),e.dispatch(S.scrollIntoView())}}}function Vc(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:cc(e,t.resolve(n.anchor),t.resolve(n.head))}function Tc(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,c=a,l=0;l<a.length;l++)s=a[l].removeFromSet(s);for(var u=0;u<i.length;u++)c=i[u].removeFromSet(c);if(1==s.length&&0==c.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=c.length)return null;r=c[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],p=0;p<t.childCount;p++)d.push(o(t.child(p)));if(Er.from(d).eq(e))return{mark:r,type:n}}function Ec(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Dc(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Dc(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||Dc(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Dc(e,t,n){var r=e.depth,o=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,o++,t=!1;if(n){var i=e.node(r).maybeChild(e.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function Ac(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,c=a.b;if("end"==o){var l=Math.max(0,i-Math.min(s,c));r-=s+l-i}if(s<i&&e.size<t.size){var u=r<=i&&r>=s?i-r:0;i-=u,c=i+(c-s),s=i}else if(c<i){var d=r<=i&&r>=c?i-r:0;i-=d,s=i+(s-c),c=i}return{start:i,endA:s,endB:c}}function Ic(e,t){var n=[],r=t.content,o=t.openStart,i=t.openEnd;while(o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount){o--,i--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||ti.fromSchema(e.state.schema),c=Uc(),l=c.createElement("div");l.appendChild(s.serializeFragment(r,{document:c}));var u,d=l.firstChild;while(d&&1==d.nodeType&&(u=Fc[d.nodeName.toLowerCase()])){for(var p=u.length-1;p>=0;p--){var f=c.createElement(u[p]);while(l.firstChild)f.appendChild(l.firstChild);l.appendChild(f)}d=l.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n));var h=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:h}}function Pc(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,s||r)})),s)return new Lr(Er.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));l?a=l:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),i=Wc(n);var u=i&&i.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||Ro.fromSchema(e.state.schema);a=p.parseSlice(i,{preserveWhitespace:!(!c&&!d),context:o})}return a=d?Kc(qc(a,+d[1],+d[2]),d[3]):Lr.maxOpen(Bc(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Bc(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n),o=r.contentMatchAt(t.index(n)),i=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&i.length&&Lc(n,i,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=zc(a[a.length-1],i.length));var r=Rc(e,n);a.push(r),o=o.matchType(r.type,r.attrs),i=n}}})),a)return{v:Er.from(a)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}function Rc(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,Er.from(e));return e}function Lc(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=Lc(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var a=r.contentMatchAt(r.childCount);if(a.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(Er.from(Rc(n,e,o+1))))}}function zc(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,zc(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Er.empty,!0);return e.copy(n.append(r))}function $c(e,t,n,r,o,i){var a=t<0?e.firstChild:e.lastChild,s=a.content;return o<r-1&&(s=$c(s,t,n,r,o+1,i)),o>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,e.childCount>1||i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(Er.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function qc(e,t,n){return t<e.openStart&&(e=new Lr($c(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Lr($c(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Fc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Hc=null;function Uc(){return Hc||(Hc=document.implementation.createHTMLDocument("title"))}function Wc(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Uc().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Fc[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=e,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}function Kc(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;s>=0;s-=2){var c=r.nodes[n[s]];if(!c||c.hasRequiredAttrs())break;o=Er.from(c.create(n[s+1],o)),i++,a++}return new Lr(o,i,a)}var Jc={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Gc=ka.ie&&ka.ie_version<=11,Yc=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Yc.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Yc.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Xc=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);ka.ie&&ka.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Yc,Gc&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Xc.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Xc.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Xc.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Jc),Gc&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Xc.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Gc&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Xc.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Xc.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Xc.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Xc.prototype.onSelectionChange=function(){if(lc(this.view)){if(this.suppressingSelectionUpdates)return Qs(this.view);if(ka.ie&&ka.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Da(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Xc.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Xc.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Xc.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&uc(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var s=0;s<e.length;s++){var c=this.registerMutation(e[s],a);c&&(r=r<0?c.from:Math.min(c.from,r),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(ka.gecko&&a.length>1){var l=a.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=l[0],d=l[1];u.parentNode&&u.parentNode.parentNode==d.parentNode?d.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),Qc(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Qs(this.view),this.currentSelection.set(t))}},Xc.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,i=e.nextSibling;if(ka.ie&&ka.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var s=e.addedNodes[a],c=s.previousSibling,l=s.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}var u=o&&o.parentNode==e.target?Ma(o)+1:0,d=n.localPosFromDOM(e.target,u,-1),p=i&&i.parentNode==e.target?Ma(i):e.target.childNodes.length,f=n.localPosFromDOM(e.target,p,1);return{from:d,to:f}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Zc=!1;function Qc(e){Zc||(Zc=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var el={},tl={};function nl(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Xc(e,(function(t,n,r,o){return Mc(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=el[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!sl(e,t)||al(e,t)||!e.editable&&t.type in tl||n(e,t)})};for(var n in el)t(n);ka.safari&&e.dom.addEventListener("input",(function(){return null})),il(e)}function rl(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function ol(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function il(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return al(e,t)})}))}function al(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function sl(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function cl(e,t){al(e,t)||!el[t.type]||!e.editable&&t.type in tl||el[t.type](e,t)}function ll(e){return{left:e.clientX,top:e.clientY}}function ul(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function dl(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var c=a(s);if(c)return c.v}return!1}function pl(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function fl(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&ta.isSelectable(r))&&(pl(e,new ta(n),"pointer"),!0)}function hl(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof ta&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(ta.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(pl(e,ta.create(e.state.doc,r),"pointer"),!0)}function ml(e,t,n,r,o){return dl(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?hl(e,n):fl(e,n))}function vl(e,t,n,r){return dl(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function gl(e,t,n,r){return dl(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||bl(e,n)}function bl(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(pl(e,Qi.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)pl(e,Qi.create(n,a+1,a+1+i.content.size),"pointer");else{if(!ta.isSelectable(i))continue;pl(e,ta.create(n,a),"pointer")}return!0}}function yl(e){return Nl(e)}tl.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!xl(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!ka.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Nc(e,t)?t.preventDefault():rl(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,za(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},tl.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},tl.keypress=function(e,t){if(!(xl(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||ka.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof Qi)||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var wl=ka.mac?"metaKey":"ctrlKey";el.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=yl(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&ul(t,e.lastClick)&&!t[wl]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(ll(t));i&&("singleClick"==o?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Ol(e,i,t,n)):("doubleClick"==o?vl:gl)(e,i.pos,i.inside,t)?t.preventDefault():rl(e,"pointer"))};var Ol=function(e,t,n,r){var o,i,a=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[wl],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var s=e.state.doc.resolve(t.pos);o=s.parent,i=s.depth?s.before():0}this.mightDrag=null;var c=r?null:n.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l?l.dom:null;var u=e.state,d=u.selection;(o.type.spec.draggable&&!1!==o.type.spec.selectable||d instanceof ta&&d.from<=i&&d.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&ka.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rl(e,"pointer")};function xl(e,t){return!!e.composing||!!(ka.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Ol.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ol.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ll(e))),this.allowDefault||!t?rl(this.view,"pointer"):ml(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||ka.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||ka.chrome&&!(this.view.state.selection instanceof Qi)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2?(pl(this.view,Yi.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):rl(this.view,"pointer")}},Ol.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),rl(this.view,"pointer"),0==e.buttons&&this.done()},el.touchdown=function(e){yl(e),rl(e,"pointer")},el.contextmenu=function(e){return yl(e)};var kl=ka.android?5e3:-1;function Sl(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Nl(e)}),t))}function jl(e){e.composing=!1;while(e.compositionNodes.length>0)e.compositionNodes.pop().markParentsDirty()}function Nl(e,t){if(e.domObserver.forceFlush(),jl(e),t||e.docView.dirty){var n=Xs(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}function Cl(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}tl.compositionstart=tl.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Nl(e,!0),e.markCursor=null;else if(Nl(e),ka.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.composing=!0}Sl(e,kl)},tl.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Sl(e,20))};var _l=ka.ie&&ka.ie_version<15||ka.ios&&ka.webkit_version<604;function Ml(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function Vl(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Tl(e,r.value,null,t):Tl(e,r.textContent,r.innerHTML,t)}),50)}}function Tl(e,t,n,r){var o=Pc(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||Lr.empty)})))return!0;if(!o)return!1;var i=Ml(o),a=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}el.copy=tl.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=_l?null:t.clipboardData,i=n.content(),a=Ic(e,i),s=a.dom,c=a.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",c)):Cl(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},tl.paste=function(e,t){var n=_l?null:t.clipboardData;n&&Tl(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():Vl(e,t)};var El=function(e,t){this.slice=e,this.move=t},Dl=ka.mac?"altKey":"ctrlKey";for(var Al in el.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(ll(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof ta?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(ta.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(ta.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=Ic(e,a),c=s.dom,l=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(_l?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",_l||t.dataTransfer.setData("text/plain",l),e.dragging=new El(a,!t[Dl])}},el.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},tl.dragover=tl.dragenter=function(e,t){return t.preventDefault()},tl.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(ll(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice;i?e.someProp("transformPasted",(function(e){i=e(i)})):i=Pc(e,t.dataTransfer.getData(_l?"Text":"text/plain"),_l?null:t.dataTransfer.getData("text/html"),!1,o);var a=n&&!t[Dl];if(e.someProp("handleDrop",(function(n){return n(e,t,i||Lr.empty,a)})))t.preventDefault();else if(i){t.preventDefault();var s=i?Di(e.state.doc,o.pos,i):o.pos;null==s&&(s=o.pos);var c=e.state.tr;a&&c.deleteSelection();var l=c.mapping.map(s),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,d=c.doc;if(u?c.replaceRangeWith(l,l,i.content.firstChild):c.replaceRange(l,l,i),!c.doc.eq(d)){var p=c.doc.resolve(l);if(u&&ta.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new ta(p));else{var f=c.mapping.map(s);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,n,r){return f=r})),c.setSelection(cc(e,p,c.doc.resolve(f)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},el.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Qs(e)}),20))},el.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},el.beforeinput=function(e,t){if(ka.chrome&&ka.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,za(8,"Backspace"))})))){var t=e.state.selection,r=t.$cursor;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},tl)el[Al]=tl[Al];function Il(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Pl=function(e,t){this.spec=t||ql,this.side=this.spec.side||0,this.toDOM=e};Pl.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos,a=o.deleted;return a?null:new Ll(i-n,i-n,this)},Pl.prototype.valid=function(){return!0},Pl.prototype.eq=function(e){return this==e||e instanceof Pl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Il(this.spec,e.spec))};var Bl=function(e,t){this.spec=t||ql,this.attrs=e};Bl.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ll(o,i,this)},Bl.prototype.valid=function(e,t){return t.from<t.to},Bl.prototype.eq=function(e){return this==e||e instanceof Bl&&Il(this.attrs,e.attrs)&&Il(this.spec,e.spec)},Bl.is=function(e){return e.type instanceof Bl};var Rl=function(e,t){this.spec=t||ql,this.attrs=e};Rl.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ll(o.pos-n,i.pos-n,this)},Rl.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},Rl.prototype.eq=function(e){return this==e||e instanceof Rl&&Il(this.attrs,e.attrs)&&Il(this.spec,e.spec)};var Ll=function(e,t,n){this.from=e,this.to=t,this.type=n},zl={spec:{configurable:!0},inline:{configurable:!0}};Ll.prototype.copy=function(e,t){return new Ll(e,t,this.type)},Ll.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Ll.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Ll.widget=function(e,t,n){return new Ll(e,e,new Pl(t,n))},Ll.inline=function(e,t,n,r){return new Ll(e,t,new Bl(n,r))},Ll.node=function(e,t,n,r){return new Ll(e,t,new Rl(n,r))},zl.spec.get=function(){return this.type.spec},zl.inline.get=function(){return this.type instanceof Bl},Object.defineProperties(Ll.prototype,zl);var $l=[],ql={},Fl=function(e,t){this.local=e&&e.length?e:$l,this.children=t&&t.length?t:$l};Fl.create=function(e,t){return t.length?Xl(t,e,0,ql):Hl},Fl.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Fl.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var c=this.children[s]+1;this.children[s+2].findInner(e-c,t-c,n,r+c,o)}},Fl.prototype.map=function(e,t,n){return this==Hl||0==e.maps.length?this:this.mapInner(e,t,0,0,n||ql)},Fl.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?Wl(this.children,i,e,t,n,r,o):i?new Fl(i.sort(Zl)):Hl},Fl.prototype.add=function(e,t){return t.length?this==Hl?Fl.create(e,t):this.addInner(e,t,0):this},Fl.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,a){var s,c=a+n;if(s=Gl(t,e,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<a)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,c+1):r.splice(i,0,a,a+e.nodeSize,Xl(s,e,c+1,ql)),i+=3}}));for(var a=Kl(i?Yl(t):t,-n),s=0;s<a.length;s++)a[s].type.valid(e,a[s])||a.splice(s--,1);return new Fl(a.length?this.local.concat(a).sort(Zl):this.local,r||this.children)},Fl.prototype.remove=function(e){return 0==e.length||this==Hl?this:this.removeInner(e,0)},Fl.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>a&&l.to<s&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=Hl?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var d=0,p=void 0;d<e.length;d++)if(p=e[d])for(var f=0;f<r.length;f++)r[f].eq(p,t)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Fl(r,n):Hl},Fl.prototype.forChild=function(e,t){if(this==Hl)return this;if(t.isLeaf)return Fl.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var c=this.local[s];if(c.from<a&&c.to>i&&c.type instanceof Bl){var l=Math.max(i,c.from)-i,u=Math.min(a,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Fl(r.sort(Zl));return n?new Ul([d,n]):d}return n||Hl},Fl.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Fl)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Fl.prototype.locals=function(e){return Ql(this.localsInner(e))},Fl.prototype.localsInner=function(e){if(this==Hl)return $l;if(e.inlineContent||!this.local.some(Bl.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Bl||t.push(this.local[n]);return t};var Hl=new Fl;Fl.empty=Hl,Fl.removeOverlap=Ql;var Ul=function(e){this.members=e};function Wl(e,t,n,r,o,i,a){for(var s=e.slice(),c=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||e>c+i||(t>=s[a]+i?s[a+1]=-1:n>=o&&(l=r-n-(t-e))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<s.length;d+=3)if(-1==s[d+1]){var p=n.map(e[d]+i),f=p-o;if(f<0||f>=r.content.size){u=!0;continue}var h=n.map(e[d+1]+i,-1),m=h-o,v=r.content.findIndex(f),g=v.index,b=v.offset,y=r.maybeChild(g);if(y&&b==f&&b+y.nodeSize==m){var w=s[d+2].mapInner(n,y,p+1,e[d]+i+1,a);w!=Hl?(s[d]=f,s[d+1]=m,s[d+2]=w):(s[d+1]=-2,u=!0)}else u=!0}if(u){var O=Jl(s,e,t||[],n,o,i,a),x=Xl(O,r,0,a);t=x.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var S=0,j=0;S<x.children.length;S+=3){var N=x.children[S];while(j<s.length&&s[j]<N)j+=3;s.splice(j,0,x.children[S],x.children[S+1],x.children[S+2])}}return new Fl(t&&t.sort(Zl),s)}function Kl(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Ll(o.from+t,o.to+t,o.type))}return n}function Jl(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(r,o,t);c?n.push(c):a.onRemove&&a.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&s(e[c+2],t[c]+i+1);return n}function Gl(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function Yl(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Xl(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=Gl(e,t,a+n);if(s){i=!0;var c=Xl(s,t,n+a+1,r);c!=Hl&&o.push(a,a+t.nodeSize,c)}}));for(var a=Kl(i?Yl(e):e,-n).sort(Zl),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new Fl(a,o):Hl}function Zl(e,t){return e.from-t.from||e.to-t.to}function Ql(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),eu(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),eu(t,o+1,i.copy(r.to,i.to)))}}return t}function eu(e,t,n){while(t<e.length&&Zl(n,e[t])>0)t++;e.splice(t,0,n)}function tu(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Hl&&t.push(r)})),e.cursorWrapper&&t.push(Fl.create(e.state.doc,[e.cursorWrapper.deco])),Ul.from(t)}Ul.prototype.forChild=function(e,t){if(t.isLeaf)return Fl.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=Hl&&(o instanceof Ul?n=n.concat(o.members):n.push(o))}return Ul.from(n)},Ul.prototype.eq=function(e){if(!(e instanceof Ul)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Ul.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Ql(n?t:t.sort(Zl)):$l},Ul.from=function(e){switch(e.length){case 0:return Hl;case 1:return e[0];default:return new Ul(e)}};var nu=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=au(this),this.markCursor=null,this.cursorWrapper=null,iu(this),this.nodeViews=cu(this),this.docView=Vs(this.state.doc,ou(this),tu(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,nl(this),this.pluginViews=[],this.updatePluginViews()},ru={props:{configurable:!0},root:{configurable:!0}};function ou(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Ll.node(0,e.state.doc.content.size,t)]}function iu(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Ll.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function au(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function su(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function cu(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function lu(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r}ru.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},nu.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&il(this),this._props=e,this.updateStateInner(e.state,!0)},nu.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},nu.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},nu.prototype.updateStateInner=function(e,t){var n=this,r=this.state,o=!1,i=!1;if(e.storedMarks&&this.composing&&(jl(this),i=!0),this.state=e,t){var a=cu(this);lu(a,this.nodeViews)&&(this.nodeViews=a,o=!0),il(this)}this.editable=au(this),iu(this);var s=tu(this),c=ou(this),l=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,c,s);!u&&e.selection.eq(r.selection)||(i=!0);var d="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&Ua(this);if(i){this.domObserver.stop();var p=u&&(ka.ie||ka.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&su(r.selection,e.selection);if(u){var f=ka.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,c,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Vs(e.doc,c,s,this.dom,this)),f&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&dc(this))?Qs(this,p):(ac(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var h=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof ta?Ha(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),h):Ha(this,this.coordsAtPos(e.selection.head,1),h))}else d&&Ka(d)},nu.prototype.destroyPluginViews=function(){var e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()},nu.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},nu.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},nu.prototype.hasFocus=function(){return this.root.activeElement==this.dom},nu.prototype.focus=function(){this.domObserver.stop(),this.editable&&Ya(this.dom),Qs(this),this.domObserver.start()},ru.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},nu.prototype.posAtCoords=function(e){return is(this,e)},nu.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),cs(this,e,t)},nu.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},nu.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},nu.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},nu.prototype.endOfTextblock=function(e,t){return bs(this,t||this.state,e)},nu.prototype.destroy=function(){this.docView&&(ol(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},nu.prototype.dispatchEvent=function(e){return cl(this,e)},nu.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(nu.prototype,ru);for(var uu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},du={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},pu="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),fu="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),hu="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),mu="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),vu="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),gu=pu&&(mu||+pu[1]<57)||hu&&mu,bu=0;bu<10;bu++)uu[48+bu]=uu[96+bu]=String(bu);for(bu=1;bu<=24;bu++)uu[bu+111]="F"+bu;for(bu=65;bu<=90;bu++)uu[bu]=String.fromCharCode(bu+32),du[bu]=String.fromCharCode(bu);for(var yu in uu)du.hasOwnProperty(yu)||(du[yu]=uu[yu]);function wu(e){var t=gu&&(e.ctrlKey||e.altKey||e.metaKey)||(fu||vu)&&e.shiftKey&&e.key&&1==e.key.length,n=!t&&e.key||(e.shiftKey?du:uu)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var Ou="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function xu(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var c=i[s];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);Ou?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function ku(e){var t=Object.create(null);for(var n in e)t[xu(n)]=e[n];return t}function Su(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function ju(e){return new ya({props:{handleKeyDown:Nu(e)}})}function Nu(e){var t=ku(e);return function(e,n){var r,o=wu(n),i=1==o.length&&" "!=o,a=t[Su(o,n,!i)];if(a&&a(e.state,e.dispatch,e))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=uu[n.keyCode])&&r!=o){var s=t[Su(r,n,!0)];if(s&&s(e.state,e.dispatch,e))return!0}else if(i&&n.shiftKey){var c=t[Su(o,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var Cu=function(e,t){this.match=e,this.handler="string"==typeof t?_u(t):t};function _u(e){return function(t,n,r,o){var i=e;if(n[1]){var a=n[0].lastIndexOf(n[1]);i+=n[0].slice(a+n[1].length),r+=a;var s=r-o;s>0&&(i=n[0].slice(a-s,a)+i,r=o)}return t.tr.insertText(i,r,o)}}var Mu=500;function Vu(e){var t=e.rules,n=new ya({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,o,i){return Tu(e,r,o,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection,o=r.$cursor;o&&Tu(e,o.pos,o.pos,"",t,n)}))}}},isInputRules:!0});return n}function Tu(e,t,n,r,o,i){if(e.composing)return!1;var a=e.state,s=a.doc.resolve(t);if(s.parent.type.spec.code)return!1;for(var c=s.parent.textBetween(Math.max(0,s.parentOffset-Mu),s.parentOffset,null,"￼")+r,l=0;l<o.length;l++){var u=o[l].match.exec(c),d=u&&o[l].handler(a,u,t-(u[0].length-r.length),n);if(d)return e.dispatch(d.setMeta(i,{transform:d,from:t,to:n,text:r})),!0}return!1}function Eu(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){for(var a=e.tr,s=i.transform,c=s.steps.length-1;c>=0;c--)a.step(s.steps[c].invert(s.docs[c]));if(i.text){var l=a.doc.resolve(i.from).marks();a.replaceWith(i.from,i.to,e.schema.text(i.text,l))}else a.delete(i.from,i.to);t(a)}return!0}}return!1}new Cu(/--$/,"—"),new Cu(/\.\.\.$/,"…"),new Cu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new Cu(/"$/,"”"),new Cu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new Cu(/'$/,"’");function Du(e,t,n,r){return new Cu(e,(function(e,o,i,a){var s=n instanceof Function?n(o):n,c=e.tr.delete(i,a),l=c.doc.resolve(i),u=l.blockRange(),d=u&&Si(u,t,s);if(!d)return null;c.wrap(u,d);var p=c.doc.resolve(i-1).nodeBefore;return p&&p.type==t&&Vi(c.doc,i-1)&&(!r||r(o,p))&&c.join(i-1),c}))}function Au(e,t,n){return new Cu(e,(function(e,r,o,i){var a=e.doc.resolve(o),s=n instanceof Function?n(r):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,s):null}))}function Iu(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Pu(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var i=Lu(o);if(!i){var a=o.blockRange(),s=a&&ki(a);return null!=s&&(t&&t(e.tr.lift(a,s).scrollIntoView()),!0)}var c=i.nodeBefore;if(!c.type.spec.isolating&&Qu(e,i,t))return!0;if(0==o.parent.content.size&&(Bu(c,"end")||ta.isSelectable(c))){if(t){var l=e.tr.deleteRange(o.before(),o.after());l.setSelection(Bu(c,"end")?Yi.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):ta.create(l.doc,i.pos-c.nodeSize)),t(l.scrollIntoView())}return!0}return!(!c.isAtom||i.depth!=o.depth-1)&&(t&&t(e.tr.delete(i.pos-c.nodeSize,i.pos).scrollIntoView()),!0)}function Bu(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function Ru(e,t,n){var r=e.selection,o=r.$head,i=r.empty,a=o;if(!i)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=Lu(o)}var s=a&&a.nodeBefore;return!(!s||!ta.isSelectable(s))&&(t&&t(e.tr.setSelection(ta.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)}function Lu(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function zu(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var i=qu(o);if(!i)return!1;var a=i.nodeAfter;if(Qu(e,i,t))return!0;if(0==o.parent.content.size&&(Bu(a,"start")||ta.isSelectable(a))){if(t){var s=e.tr.deleteRange(o.before(),o.after());s.setSelection(Bu(a,"start")?Yi.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):ta.create(s.doc,s.mapping.map(i.pos))),t(s.scrollIntoView())}return!0}return!(!a.isAtom||i.depth!=o.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0)}function $u(e,t,n){var r=e.selection,o=r.$head,i=r.empty,a=o;if(!i)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=qu(o)}var s=a&&a.nodeAfter;return!(!s||!ta.isSelectable(s))&&(t&&t(e.tr.setSelection(ta.create(e.doc,a.pos)).scrollIntoView()),!0)}function qu(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Fu(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&ki(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}function Hu(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function Uu(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Wu(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=Uu(i.contentMatchAt(a));if(!i.canReplaceWith(a,a,s))return!1;if(t){var c=r.after(),l=e.tr.replaceWith(c,c,s.createAndFill());l.setSelection(Yi.near(l.doc.resolve(c),1)),t(l.scrollIntoView())}return!0}function Ku(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof ra||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Uu(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(Qi.create(s.doc,a+1)),t(s.scrollIntoView())}return!0}function Ju(e,t){var n=e.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(Mi(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var i=r.blockRange(),a=i&&ki(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}function Gu(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof ta&&e.selection.node.isBlock)return!(!r.parentOffset||!Mi(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;(e.selection instanceof Qi||e.selection instanceof ra)&&a.deleteSelection();var s=0==r.depth?null:Uu(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&s?[{type:s}]:null,l=Mi(a.doc,a.mapping.map(r.pos),1,c);if(c||l||!Mi(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])||(c=[{type:s}],l=!0),l&&(a.split(a.mapping.map(r.pos),1,c),!i&&!r.parentOffset&&r.parent.type!=s)){var u=a.mapping.map(r.before()),d=a.doc.resolve(u);r.node(-1).canReplaceWith(d.index(),d.index()+1,s)&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function Yu(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(ta.create(e.doc,n))),!0)}function Xu(e,t){return t&&t(e.tr.setSelection(new ra(e.doc))),!0}function Zu(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Vi(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}function Qu(e,t,n){var r,o,i=t.nodeBefore,a=t.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(Zu(e,t,n))return!0;var s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var c=t.pos+a.nodeSize,l=Er.empty,u=r.length-1;u>=0;u--)l=Er.from(r[u].create(null,l));l=Er.from(i.copy(l));var d=e.tr.step(new wi(t.pos-1,c,t.pos,c,new Lr(l,1,0),r.length,!0)),p=c+2*r.length;Vi(d.doc,p)&&d.join(p),n(d.scrollIntoView())}return!0}var f=Yi.findFrom(t,1),h=f&&f.$from.blockRange(f.$to),m=h&&ki(h);if(null!=m&&m>=t.depth)return n&&n(e.tr.lift(h,m).scrollIntoView()),!0;if(s&&a.isTextblock&&Bu(i,"end")){for(var v=i,g=[];;){if(g.push(v),v.isTextblock)break;v=v.lastChild}if(v.canReplace(v.childCount,v.childCount,a.content)){if(n){for(var b=Er.empty,y=g.length-1;y>=0;y--)b=Er.from(g[y].copy(b));var w=e.tr.step(new wi(t.pos-g.length,t.pos+a.nodeSize,t.pos+1,t.pos+a.nodeSize-1,new Lr(b,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function ed(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=s&&Si(s,e,t);return!!c&&(r&&r(n.tr.wrap(s,c).scrollIntoView()),!0)}}function td(e,t){return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,e)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,e,t).scrollIntoView()),!0)}}function nd(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var rd=nd(Iu,Pu,Ru),od=nd(Iu,zu,$u),id={Enter:nd(Hu,Ku,Ju,Gu),"Mod-Enter":Wu,Backspace:rd,"Mod-Backspace":rd,Delete:od,"Mod-Delete":od,"Mod-a":Xu},ad={"Ctrl-h":id["Backspace"],"Alt-Backspace":id["Mod-Backspace"],"Ctrl-d":id["Delete"],"Ctrl-Alt-Backspace":id["Mod-Delete"],"Alt-Delete":id["Mod-Delete"],"Alt-d":id["Mod-Delete"]};for(var sd in id)ad[sd]=id[sd];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function cd(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),c=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;var u=n.doc.resolve(s.start-2);l=new oo(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new oo(i,n.doc.resolve(a.end(s.depth)),s.depth)),c=!0}var d=Si(l,e,t,s);return!!d&&(r&&r(ld(n.tr,s,d,c,e).scrollIntoView()),!0)}}function ld(e,t,n,r,o){for(var i=Er.empty,a=n.length-1;a>=0;a--)i=Er.from(n[a].type.create(n[a].attrs,i));e.step(new wi(t.start-(r?2:0),t.end,t.start,t.end,new Lr(i,0,0),n.length,!0));for(var s=0,c=0;c<n.length;c++)n[c].type==o&&(s=c+1);for(var l=n.length-s,u=t.start+n.length-(r?2:0),d=t.parent,p=t.startIndex,f=t.endIndex,h=!0;p<f;p++,h=!1)!h&&Mi(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(p).nodeSize;return e}function ud(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));return!!a&&(!n||(o.node(a.depth-1).type==e?dd(t,n,e,a):pd(t,n,a)))}}function dd(e,t,n,r){var o=e.tr,i=r.end,a=r.$to.end(r.depth);return i<a&&(o.step(new wi(i-1,a,i,a,new Lr(Er.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new oo(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth)),t(o.lift(r,ki(r)).scrollIntoView()),!0}function pd(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var c=r.doc.resolve(n.start),l=c.nodeAfter,u=0==n.startIndex,d=n.endIndex==o.childCount,p=c.node(-1),f=c.index(-1);if(!p.canReplace(f+(u?0:1),f+1,l.content.append(d?Er.empty:Er.from(o))))return!1;var h=c.pos,m=h+l.nodeSize;return r.step(new wi(h-(u?1:0),m+(d?1:0),h+1,m-1,new Lr((u?Er.empty:Er.from(o.copy(Er.empty))).append(d?Er.empty:Er.from(o.copy(Er.empty))),u?0:1,d?0:1),u?0:1)),t(r.scrollIntoView()),!0}function fd(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var c=a.parent,l=c.child(s-1);if(l.type!=e)return!1;if(n){var u=l.lastChild&&l.lastChild.type==c.type,d=Er.from(u?e.create():null),p=new Lr(Er.from(e.create(null,Er.from(c.type.create(null,d)))),u?3:1,0),f=a.start,h=a.end;n(t.tr.step(new wi(f-(u?3:1),h,f,h,p,1,!0)).scrollIntoView())}return!0}}function hd(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function md(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function vd(e,t){const n=md(t,e.schema),{from:r,to:o}=e.selection;let i=[];e.doc.nodesBetween(r,o,e=>{i=[...i,e]});const a=i.reverse().find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function gd(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function bd(e,t){const n=gd(t,e.schema),{from:r,to:o,empty:i}=e.selection;let a=[];i?a=e.selection.$head.marks():e.doc.nodesBetween(r,o,e=>{a=[...a,...e.marks]});const s=a.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function yd(e,t){const n=hd("string"===typeof t?t:t.name,e.schema);return"node"===n?vd(e,t):"mark"===n?bd(e,t):{}}function wd(e,t){const n=Object.keys(t);return!n.length||!!n.filter(n=>t[n]===e[n]).length}function Od(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,a=t?md(t,e.schema):null;let s=[];if(e.doc.nodesBetween(r,o,(e,t)=>{if(!e.isText){const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);s=[...s,{node:e,from:n,to:i}]}}),i)return!!s.filter(e=>!a||a.name===e.node.type.name).find(e=>wd(e.node.attrs,n));const c=o-r,l=s.filter(e=>!a||a.name===e.node.type.name).filter(e=>wd(e.node.attrs,n)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0);return l>=c}function xd(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,a=t?gd(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!a||a.name===e.type.name).find(e=>wd(e.attrs,n));let s=0,c=[];if(e.doc.nodesBetween(r,o,(e,t)=>{if(e.isText){const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize),a=i-n;s+=a,c=[...c,...e.marks.map(e=>({mark:e,from:n,to:i}))]}}),0===s)return!1;const l=c.filter(e=>!a||a.name===e.mark.type.name).filter(e=>wd(e.mark.attrs,n)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0),u=c.filter(e=>!a||e.mark.type!==a&&e.mark.type.excludes(a)).reduce((e,t)=>{const n=t.to-t.from;return e+n},0),d=l>0?l+u:l;return d>=s}function kd(e,t,n={}){if(!t)return Od(e,null,n)||xd(e,null,n);const r=hd(t,e.schema);return"node"===r?Od(e,t,n):"mark"===r&&xd(e,t,n)}function Sd(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function jd(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Nd(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof e&&null!==e)try{return Array.isArray(e)?Er.fromArray(e.map(e=>t.nodeFromJSON(e))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Nd("",t,n)}if("string"===typeof e){const r=Ro.fromSchema(t);return n.slice?r.parseSlice(jd(e),n.parseOptions).content:r.parse(jd(e),n.parseOptions)}return Nd("",t,n)}function Cd(e,t,n={}){return Nd(e,t,{slice:!1,parseOptions:n})}function _d(e,t){const n=ti.fromSchema(t).serializeFragment(e.content),r=document.implementation.createHTMLDocument(),o=r.createElement("div");return o.appendChild(n),o.innerHTML}function Md(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Vd(e){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}class Td{constructor(e,t){this.editor=e,this.commands=t}createCommands(){const{commands:e,editor:t}=this,{state:n,view:r}=t,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([e,t])=>{const n=(...e)=>{const n=t(...e)(i);return o.getMeta("preventDispatch")||r.dispatch(o),n};return[e,n]}))}createChain(e,t=!0){const{commands:n,editor:r}=this,{state:o,view:i}=r,a=[],s=!!e,c=e||o.tr,l=()=>(s||!t||c.getMeta("preventDispatch")||i.dispatch(c),a.every(e=>!0===e)),u={...Object.fromEntries(Object.entries(n).map(([e,n])=>{const r=(...e)=>{const r=this.buildProps(c,t),o=n(...e)(r);return a.push(o),u};return[e,r]})),run:l};return u}createCan(e){const{commands:t,editor:n}=this,{state:r}=n,o=void 0,i=e||r.tr,a=this.buildProps(i,o),s=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...a,dispatch:o})]));return{...s,chain:()=>this.createChain(i,o)}}buildProps(e,t=!0){const{editor:n,commands:r}=this,{state:o,view:i}=n;o.storedMarks&&e.setStoredMarks(o.storedMarks);const a={tr:e,editor:n,view:i,state:this.chainableState(e,o),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e,(...e)=>t(...e)(a)]))}};return a}chainableState(e,t){let{selection:n}=e,{doc:r}=e,{storedMarks:o}=e;return{...t,schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return n},get doc(){return r},get tr(){return n=e.selection,r=e.doc,o=e.storedMarks,e}}}}function Ed(e,t,n={}){if(void 0===e.config[t]&&e.parent)return Ed(e.parent,t,n);if("function"===typeof e.config[t]){const r=e.config[t].bind({...n,parent:e.parent?Ed(e.parent,t,n):null});return r}return e.config[t]}function Dd(e){const t=e.filter(e=>"extension"===e.type),n=e.filter(e=>"node"===e.type),r=e.filter(e=>"mark"===e.type);return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Ad(e){const t=[],{nodeExtensions:n,markExtensions:r}=Dd(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach(e=>{const n={name:e.name,options:e.options},r=Ed(e,"addGlobalAttributes",n);if(!r)return;const o=r();o.forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...i,...r}})})})})}),o.forEach(e=>{const n={name:e.name,options:e.options},r=Ed(e,"addAttributes",n);if(!r)return;const o=r();Object.entries(o).forEach(([n,r])=>{t.push({type:e.name,name:n,attribute:{...i,...r}})})}),t}function Id(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{const r=n[e];n[e]=r?"class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:t}),n},{})}function Pd(e,t){return t.filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>Id(e,t),{})}function Bd(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function Rd(e){return"string"!==typeof e?e:e.match(/^\d*(\.\d+)?$/)?Number(e):"true"===e||"false"!==e&&e}function Ld(e,t){return e.style?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const o=t.filter(e=>e.attribute.rendered).reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n)||{}:{[t.name]:Rd(n.getAttribute(t.name))},o=Object.fromEntries(Object.entries(r).filter(([,e])=>void 0!==e&&null!==e));return{...e,...o}},{});return{...r,...o}}}}function zd(e,t,...n){return"function"===typeof e?t?e.bind(t)(...n):e(...n):e}function $d(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!Bd(t))&&(null!==t&&void 0!==t)))}function qd(e){var t;const n=Ad(e),{nodeExtensions:r,markExtensions:o}=Dd(e),i=null===(t=r.find(e=>Ed(e,"topNode")))||void 0===t?void 0:t.name,a=Object.fromEntries(r.map(t=>{const r=n.filter(e=>e.type===t.name),o={name:t.name,options:t.options},i=e.reduce((e,n)=>{const r=Ed(n,"extendNodeSchema",o);return{...e,...r?r(t):{}}},{}),a=$d({...i,content:zd(Ed(t,"content",o)),marks:zd(Ed(t,"marks",o)),group:zd(Ed(t,"group",o)),inline:zd(Ed(t,"inline",o)),atom:zd(Ed(t,"atom",o)),selectable:zd(Ed(t,"selectable",o)),draggable:zd(Ed(t,"draggable",o)),code:zd(Ed(t,"code",o)),defining:zd(Ed(t,"defining",o)),isolating:zd(Ed(t,"isolating",o)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=zd(Ed(t,"parseHTML",o));s&&(a.parseDOM=s.map(e=>Ld(e,r)));const c=Ed(t,"renderHTML",o);return c&&(a.toDOM=e=>c({node:e,HTMLAttributes:Pd(e,r)})),[t.name,a]})),s=Object.fromEntries(o.map(t=>{const r=n.filter(e=>e.type===t.name),o={name:t.name,options:t.options},i=e.reduce((e,n)=>{const r=Ed(n,"extendMarkSchema",o);return{...e,...r?r(t):{}}},{}),a=$d({...i,inclusive:zd(Ed(t,"inclusive",o)),excludes:zd(Ed(t,"excludes",o)),group:zd(Ed(t,"group",o)),spanning:zd(Ed(t,"spanning",o)),attrs:Object.fromEntries(r.map(e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=zd(Ed(t,"parseHTML",o));s&&(a.parseDOM=s.map(e=>Ld(e,r)));const c=Ed(t,"renderHTML",o);return c&&(a.toDOM=e=>c({mark:e,HTMLAttributes:Pd(e,r)})),[t.name,a]}));return new Po({topNode:i,nodes:a,marks:s})}function Fd(e,t){return t.nodes[e]?t.nodes[e]:t.marks[e]?t.marks[e]:null}class Hd{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Hd.resolve(e),this.schema=qd(this.extensions),this.extensions.forEach(e=>{var t;const n={name:e.name,options:e.options,editor:this.editor,type:Fd(e.name,this.schema)};if("mark"===e.type){const r=null===(t=zd(Ed(e,"keepOnSplit",n)))||void 0===t||t;r&&this.splittableMarks.push(e.name)}const r=Ed(e,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const o=Ed(e,"onCreate",n);o&&this.editor.on("create",o);const i=Ed(e,"onUpdate",n);i&&this.editor.on("update",i);const a=Ed(e,"onSelectionUpdate",n);a&&this.editor.on("selectionUpdate",a);const s=Ed(e,"onTransaction",n);s&&this.editor.on("transaction",s);const c=Ed(e,"onFocus",n);c&&this.editor.on("focus",c);const l=Ed(e,"onBlur",n);l&&this.editor.on("blur",l);const u=Ed(e,"onDestroy",n);u&&this.editor.on("destroy",u)})}static resolve(e){return Hd.sort(Hd.flatten(e))}static flatten(e){return e.map(e=>{const t={name:e.name,options:e.options},n=Ed(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){const t=100;return e.sort((e,n)=>{const r=Ed(e,"priority")||t,o=Ed(n,"priority")||t;return r>o?-1:r<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,editor:this.editor,type:Fd(t.name,this.schema)},r=Ed(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){return[...this.extensions].reverse().map(e=>{const t={name:e.name,options:e.options,editor:this.editor,type:Fd(e.name,this.schema)},n=[],r=Ed(e,"addKeyboardShortcuts",t);if(r){const e=Object.fromEntries(Object.entries(r()).map(([e,t])=>[e,()=>t({editor:this.editor})])),t=ju(e);n.push(t)}const o=Ed(e,"addInputRules",t);if(this.editor.options.enableInputRules&&o){const e=o(),t=e.length?[Vu({rules:e})]:[];n.push(...t)}const i=Ed(e,"addPasteRules",t);if(this.editor.options.enablePasteRules&&i){const e=i();n.push(...e)}const a=Ed(e,"addProseMirrorPlugins",t);if(a){const e=a();n.push(...e)}return n}).flat()}get attributes(){return Ad(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Dd(this.extensions);return Object.fromEntries(t.filter(e=>!!Ed(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,editor:e,type:md(t.name,this.schema)},o=Ed(t,"addNodeView",r);if(!o)return[];const i=(r,i,a,s)=>{const c=Pd(r,n);return o()({editor:e,node:r,getPos:a,decorations:s,HTMLAttributes:c,extension:t})};return[t.name,i]}))}get textSerializers(){const{editor:e}=this,{nodeExtensions:t}=Dd(this.extensions);return Object.fromEntries(t.filter(e=>!!Ed(e,"renderText")).map(t=>{const n={name:t.name,options:t.options,editor:e,type:md(t.name,this.schema)},r=Ed(t,"renderText",n);if(!r)return[];const o=e=>r(e);return[t.name,o]}))}}class Ud{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Wd(e){return Object.prototype.toString.call(e).slice(8,-1)}function Kd(e){return"Object"===Wd(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function Jd(e,t){const n={...e};return Kd(e)&&Kd(t)&&Object.keys(t).forEach(r=>{Kd(t[r])?r in e?n[r]=Jd(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}class Gd{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new Gd(e)}configure(e={}){const t=this.extend();return t.options=Jd(this.options,e),t}extend(e={}){const t=new Gd(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}const Yd=(e,t,n,r,o)=>{let i="",a=!0;return e.state.doc.nodesBetween(t,n,(s,c)=>{var l;const u=e.extensionManager.textSerializers[s.type.name];u?(i+=u({node:s}),a=!r):s.isText?(i+=null===(l=null===s||void 0===s?void 0:s.text)||void 0===l?void 0:l.slice(Math.max(t,c)-c,n-c),a=!r):s.isLeaf&&o?(i+=o,a=!r):!a&&s.isBlock&&(i+=r,a=!0)},0),i},Xd=Gd.create({name:"editable",addProseMirrorPlugins(){return[new ya({key:new xa("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{from:t,to:n}=e.state.selection;return Yd(e,t,n,"\n")}}})]}}),Zd=()=>({view:e})=>{const t=e.dom;return t.blur(),!0};var Qd=Object.freeze({__proto__:null,blur:Zd});const ep=(e=!1)=>({commands:t})=>t.setContent("",e);var tp=Object.freeze({__proto__:null,clearContent:ep});const np=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return o.forEach(r=>{e.doc.nodesBetween(r.$from.pos,r.$to.pos,(e,r)=>{if(e.type.isText)return;const o=t.doc.resolve(t.mapping.map(r)),i=t.doc.resolve(t.mapping.map(r+e.nodeSize)),a=o.blockRange(i);if(!a)return;const s=ki(a);if(e.type.isTextblock&&n){const{defaultType:e}=o.parent.contentMatchAt(o.index());t.setNodeMarkup(a.start,e)}(s||0===s)&&n&&t.lift(a,s)})}),!0};var rp=Object.freeze({__proto__:null,clearNodes:np});const op=e=>t=>e(t);var ip=Object.freeze({__proto__:null,command:op});const ap=()=>({state:e,dispatch:t})=>Ku(e,t);var sp=Object.freeze({__proto__:null,createParagraphNear:ap});const cp=e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0};var lp=Object.freeze({__proto__:null,deleteRange:cp});const up=()=>({state:e,dispatch:t})=>Iu(e,t);var dp=Object.freeze({__proto__:null,deleteSelection:up});const pp=()=>({commands:e})=>e.keyboardShortcut("Enter");var fp=Object.freeze({__proto__:null,enter:pp});const hp=()=>({state:e,dispatch:t})=>Wu(e,t);var mp=Object.freeze({__proto__:null,exitCode:hp});function vp(e,t,n={}){return e.find(e=>e.type===t&&wd(e.attrs,n))}function gp(e,t,n={}){return!!vp(e,t,n)}function bp(e,t,n={}){if(!e||!t)return;const r=e.parent.childAfter(e.parentOffset);if(!r.node)return;const o=vp(r.node.marks,t,n);if(!o)return;let i=e.index(),a=e.start()+r.offset,s=i+1,c=a+r.node.nodeSize;vp(r.node.marks,t,n);while(i>0&&o.isInSet(e.parent.child(i-1).marks))i-=1,a-=e.parent.child(i).nodeSize;while(s<e.parent.childCount&&gp(e.parent.child(s).marks,t,n))c+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:c}}const yp=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const i=gd(e,r.schema),{doc:a,selection:s}=n,{$from:c,from:l,to:u}=s;if(o){const e=bp(c,i,t);if(e&&e.from<=l&&e.to>=u){const t=Qi.create(a,e.from,e.to);n.setSelection(t)}}return!0};var wp=Object.freeze({__proto__:null,extendMarkRange:yp});const Op=e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};var xp=Object.freeze({__proto__:null,first:Op});function kp(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Sp(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}function jp(e){return e&&"object"===typeof e&&!Array.isArray(e)&&!Sp(e)}function Np(e){return jp(e)&&e instanceof Qi}function Cp(e,t=null){if(!t)return null;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{size:t}=e.doc.content;return{from:t,to:t}}return{from:t,to:t}}const _p=(e=null)=>({editor:t,view:n,tr:r,dispatch:o})=>{if(n.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!Np(t.state.selection))return n.focus(),!0;const{from:i,to:a}=Cp(t.state,e)||t.state.selection,{doc:s,storedMarks:c}=r,l=kp(i,0,s.content.size),u=kp(a,0,s.content.size),d=Qi.create(s,l,u),p=t.state.selection.eq(d);return o&&(r.setSelection(d),p&&c&&r.setStoredMarks(c),n.focus()),!0};var Mp=Object.freeze({__proto__:null,focus:_p});const Vp=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r}));var Tp=Object.freeze({__proto__:null,forEach:Vp});const Ep=e=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},e);var Dp=Object.freeze({__proto__:null,insertContent:Ep});function Ap(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof yi||o instanceof wi))return;const i=e.mapping.maps[r];let a=0;i.forEach((e,t,n,r)=>{0===a&&(a=r)}),e.setSelection(Yi.near(e.doc.resolve(a),n))}const Ip=(e,t)=>({tr:n,dispatch:r,editor:o})=>{if(r){const r=Nd(t,o.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===r.toString())return!0;const{from:i,to:a}="number"===typeof e?{from:e,to:e}:e;n.replaceWith(i,a,r),Ap(n,n.steps.length-1,1)}return!0};var Pp=Object.freeze({__proto__:null,insertContentAt:Ip});const Bp=()=>({state:e,dispatch:t})=>Pu(e,t);var Rp=Object.freeze({__proto__:null,joinBackward:Bp});const Lp=()=>({state:e,dispatch:t})=>zu(e,t);var zp=Object.freeze({__proto__:null,joinForward:Lp});const $p="undefined"!==typeof navigator&&/Mac/.test(navigator.platform);function qp(e){const t=e.split(/-(?!$)/);let n,r,o,i,a=t[t.length-1];"Space"===a&&(a=" ");for(let s=0;s<t.length-1;s+=1){const e=t[s];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);$p?i=!0:r=!0}}return n&&(a="Alt-"+a),r&&(a="Ctrl-"+a),i&&(a="Meta-"+a),o&&(a="Shift-"+a),a}const Fp=e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=qp(e).split(/-(?!$)/),a=i.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),s=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,s))});return null===c||void 0===c||c.steps.forEach(e=>{const t=e.map(r.mapping);t&&o&&r.maybeStep(t)}),!0};var Hp=Object.freeze({__proto__:null,keyboardShortcut:Fp});const Up=(e,t={})=>({state:n,dispatch:r})=>{const o=md(e,n.schema),i=Od(n,o,t);return!!i&&Fu(n,r)};var Wp=Object.freeze({__proto__:null,lift:Up});const Kp=()=>({state:e,dispatch:t})=>Ju(e,t);var Jp=Object.freeze({__proto__:null,liftEmptyBlock:Kp});const Gp=e=>({state:t,dispatch:n})=>{const r=md(e,t.schema);return ud(r)(t,n)};var Yp=Object.freeze({__proto__:null,liftListItem:Gp});const Xp=()=>({state:e,dispatch:t})=>Hu(e,t);var Zp=Object.freeze({__proto__:null,newlineInCode:Xp});const Qp=(e,t={})=>({state:n,commands:r})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:o,to:i}=n.selection,a={from:o,to:i};return r.replaceRange(a,e,t)};var ef=Object.freeze({__proto__:null,replace:Qp});const tf=(e,t,n={})=>({tr:r,state:o,dispatch:i})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const a=md(t,o.schema),{from:s,to:c}=e;return i&&r.replaceRangeWith(s,c,a.create(n)),!0};var nf=Object.freeze({__proto__:null,replaceRange:tf});function rf(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}const of=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null;const s=hd("string"===typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(i=md(e,r.schema)),"mark"===s&&(a=gd(e,r.schema)),o&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,rf(e.attrs,t)),a&&e.marks.length&&e.marks.forEach(o=>{a===o.type&&n.addMark(r,r+e.nodeSize,a.create(rf(o.attrs,t)))})})}),!0)};var af=Object.freeze({__proto__:null,resetAttributes:of});const sf=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0);var cf=Object.freeze({__proto__:null,scrollIntoView:sf});const lf=()=>({state:e,dispatch:t})=>Xu(e,t);var uf=Object.freeze({__proto__:null,selectAll:lf});const df=()=>({state:e,dispatch:t})=>Ru(e,t);var pf=Object.freeze({__proto__:null,selectNodeBackward:df});const ff=()=>({state:e,dispatch:t})=>$u(e,t);var hf=Object.freeze({__proto__:null,selectNodeForward:ff});const mf=()=>({state:e,dispatch:t})=>Yu(e,t);var vf=Object.freeze({__proto__:null,selectParentNode:mf});const gf=(e,t=!1,n={})=>({tr:r,editor:o,dispatch:i})=>{const{doc:a}=r,s=Cd(e,o.schema,n),c=Qi.create(a,0,a.content.size);return i&&r.setSelection(c).replaceSelectionWith(s,!1).setMeta("preventUpdate",!t),!0};var bf=Object.freeze({__proto__:null,setContent:gf});const yf=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:a,ranges:s}=i,c=gd(e,r.schema);if(o)if(a){const e=bd(r,c);n.addStoredMark(c.create({...e,...t}))}else s.forEach(e=>{const o=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(o,i,(e,r)=>{const a=Math.max(r,o),s=Math.min(r+e.nodeSize,i),l=e.marks.find(e=>e.type===c);l?e.marks.forEach(e=>{c===e.type&&n.addMark(a,s,c.create({...e.attrs,...t}))}):n.addMark(a,s,c.create(t))})});return!0};var wf=Object.freeze({__proto__:null,setMark:yf});const Of=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0);var xf=Object.freeze({__proto__:null,setMeta:Of});const kf=(e,t={})=>({state:n,dispatch:r})=>{const o=md(e,n.schema);return td(o,t)(n,r)};var Sf=Object.freeze({__proto__:null,setNode:kf});const jf=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=kp(e,0,n.content.size),o=ta.create(n,r);t.setSelection(o)}return!0};var Nf=Object.freeze({__proto__:null,setNodeSelection:jf});const Cf=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:o}="number"===typeof e?{from:e,to:e}:e,i=kp(r,0,n.content.size),a=kp(o,0,n.content.size),s=Qi.create(n,i,a);t.setSelection(s)}return!0};var _f=Object.freeze({__proto__:null,setTextSelection:Cf});const Mf=e=>({state:t,dispatch:n})=>{const r=md(e,t.schema);return fd(r)(t,n)};var Vf=Object.freeze({__proto__:null,sinkListItem:Mf});function Tf(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function Ef(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Df(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null===t||void 0===t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}const Af=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:a}=t,{$from:s,$to:c}=i,l=o.extensionManager.attributes,u=Tf(l,s.node().type.name,s.node().attrs);if(i instanceof ta&&i.node.isBlock)return!(!s.parentOffset||!Mi(a,s.pos))&&(r&&(e&&Df(n,o.extensionManager.splittableMarks),t.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(r){const r=c.parentOffset===c.parent.content.size;i instanceof Qi&&t.deleteSelection();const a=0===s.depth?void 0:Ef(s.node(-1).contentMatchAt(s.indexAfter(-1)));let l=r&&a?[{type:a,attrs:u}]:void 0,d=Mi(t.doc,t.mapping.map(s.pos),1,l);if(l||d||!Mi(t.doc,t.mapping.map(s.pos),1,a?[{type:a}]:void 0)||(d=!0,l=a?[{type:a,attrs:u}]:void 0),d&&(t.split(t.mapping.map(s.pos),1,l),a&&!r&&!s.parentOffset&&s.parent.type!==a)){const e=t.mapping.map(s.before()),n=t.doc.resolve(e);s.node(-1).canReplaceWith(n.index(),n.index()+1,a)&&t.setNodeMarkup(t.mapping.map(s.before()),a)}e&&Df(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0};var If=Object.freeze({__proto__:null,splitBlock:Af});const Pf=e=>({tr:t,state:n,dispatch:r,editor:o})=>{var i;const a=md(e,n.schema),{$from:s,$to:c}=n.selection,l=n.selection.node;if(l&&l.isBlock||s.depth<2||!s.sameParent(c))return!1;const u=s.node(-1);if(u.type!==a)return!1;const d=o.extensionManager.attributes;if(0===s.parent.content.size&&s.node(-1).childCount===s.indexAfter(-1)){if(2===s.depth||s.node(-3).type!==a||s.index(-2)!==s.node(-2).childCount-1)return!1;if(r){let e=Er.empty;const n=s.index(-1)>0;for(let t=s.depth-(n?1:2);t>=s.depth-3;t-=1)e=Er.from(s.node(t).copy(e));const r=Tf(d,s.node().type.name,s.node().attrs),o=(null===(i=a.contentMatch.defaultType)||void 0===i?void 0:i.createAndFill(r))||void 0;e=e.append(Er.from(a.createAndFill(null,o)||void 0)),t.replace(s.before(n?void 0:-1),s.after(-3),new Lr(e,n?3:2,2)).setSelection(Qi.near(t.doc.resolve(s.pos+(n?3:2)))).scrollIntoView()}return!0}const p=c.pos===s.end()?u.contentMatchAt(0).defaultType:null,f=Tf(d,u.type.name,u.attrs),h=Tf(d,s.node().type.name,s.node().attrs);t.delete(s.pos,c.pos);const m=p?[{type:a,attrs:f},{type:p,attrs:h}]:[{type:a,attrs:f}];return!!Mi(t.doc,s.pos,2)&&(r&&t.split(s.pos,2,m).scrollIntoView(),!0)};var Bf=Object.freeze({__proto__:null,splitListItem:Pf});function Rf(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Lf(e){return t=>Rf(t.$from,e)}function zf(e,t){const{nodeExtensions:n}=Dd(t),r=n.find(t=>t.name===e);if(!r)return!1;const o={name:r.name,options:r.options},i=zd(Ed(r,"group",o));return"string"===typeof i&&i.split(" ").includes("list")}const $f=(e,t)=>({editor:n,tr:r,state:o,dispatch:i,chain:a,commands:s,can:c})=>{const{extensions:l}=n.extensionManager,u=md(e,o.schema),d=md(t,o.schema),{selection:p}=o,{$from:f,$to:h}=p,m=f.blockRange(h);if(!m)return!1;const v=Lf(e=>zf(e.type.name,l))(p);if(m.depth>=1&&v&&m.depth-v.depth<=1){if(v.node.type===u)return s.liftListItem(d);if(zf(v.node.type.name,l)&&u.validContent(v.node.content)&&i)return r.setNodeMarkup(v.pos,u),!0}const g=c().wrapInList(u);return g?s.wrapInList(u):a().clearNodes().wrapInList(u).run()};var qf=Object.freeze({__proto__:null,toggleList:$f});const Ff=(e,t={})=>({state:n,commands:r})=>{const o=gd(e,n.schema),i=xd(n,o,t);return i?r.unsetMark(o):r.setMark(o,t)};var Hf=Object.freeze({__proto__:null,toggleMark:Ff});const Uf=(e,t,n={})=>({state:r,commands:o})=>{const i=md(e,r.schema),a=md(t,r.schema),s=Od(r,i,n);return s?o.setNode(a):o.setNode(i,n)};var Wf=Object.freeze({__proto__:null,toggleNode:Uf});const Kf=(e,t={})=>({state:n,dispatch:r})=>{const o=md(e,n.schema),i=Od(n,o,t);return i?Fu(n,r):ed(o,t)(n,r)};var Jf=Object.freeze({__proto__:null,toggleWrap:Kf});const Gf=()=>({state:e,dispatch:t})=>Eu(e,t);var Yf=Object.freeze({__proto__:null,undoInputRule:Gf});const Xf=()=>({tr:e,state:t,dispatch:n})=>{const{selection:r}=e,{empty:o,ranges:i}=r;return o||n&&Object.entries(t.schema.marks).forEach(([,t])=>{i.forEach(n=>{e.removeMark(n.$from.pos,n.$to.pos,t)})}),!0};var Zf=Object.freeze({__proto__:null,unsetAllMarks:Xf});const Qf=e=>({tr:t,state:n,dispatch:r})=>{const{selection:o}=t,i=gd(e,n.schema),{$from:a,empty:s,ranges:c}=o;if(r){if(s){let{from:e,to:n}=o;const r=bp(a,i);r&&(e=r.from,n=r.to),t.removeMark(e,n,i)}else c.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos,i)});t.removeStoredMark(i)}return!0};var eh=Object.freeze({__proto__:null,unsetMark:Qf});const th=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null;const s=hd("string"===typeof e?e:e.name,r.schema);return!!s&&("node"===s&&(i=md(e,r.schema)),"mark"===s&&(a=gd(e,r.schema)),o&&n.selection.ranges.forEach(e=>{const o=e.$from.pos,s=e.$to.pos;r.doc.nodesBetween(o,s,(e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach(i=>{if(a===i.type){const c=Math.max(r,o),l=Math.min(r+e.nodeSize,s);n.addMark(c,l,a.create({...i.attrs,...t}))}})})}),!0)};var nh=Object.freeze({__proto__:null,updateAttributes:th});const rh=(e,t={})=>({state:n,dispatch:r})=>{const o=md(e,n.schema),i=Od(n,o,t);return!i&&ed(o,t)(n,r)};var oh=Object.freeze({__proto__:null,wrapIn:rh});const ih=(e,t={})=>({state:n,dispatch:r})=>{const o=md(e,n.schema);return cd(o,t)(n,r)};var ah=Object.freeze({__proto__:null,wrapInList:ih});const sh=Gd.create({name:"commands",addCommands(){return{...Qd,...tp,...rp,...ip,...sp,...lp,...dp,...fp,...mp,...wp,...xp,...Mp,...Tp,...Dp,...Pp,...Rp,...zp,...Hp,...Wp,...Jp,...Yp,...Zp,...ef,...nf,...af,...cf,...uf,...pf,...hf,...vf,...bf,...wf,...xf,...Sf,...Nf,..._f,...Vf,...If,...Bf,...qf,...Hf,...Wf,...Jf,...Yf,...Zf,...eh,...nh,...oh,...ah}}}),ch=Gd.create({name:"editable",addProseMirrorPlugins(){return[new ya({key:new xa("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lh=Gd.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new ya({key:new xa("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),uh=Gd.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>e(),"Mod-Backspace":()=>e(),Delete:()=>t(),"Mod-Delete":()=>t()}}});var dh=Object.freeze({__proto__:null,ClipboardTextSerializer:Xd,Commands:sh,Editable:ch,FocusEvents:lh,Keymap:uh});const ph='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';class fh extends Ud{constructor(e={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=Vd(ph))}setOptions(e={}){this.options={...this.options,...e}}setEditable(e){this.setOptions({editable:e}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n="function"===typeof t?t(e,this.state.plugins):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"===typeof e?e+"$":e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(e=>!e.key.startsWith(t))});this.view.updateState(n)}createExtensionManager(){const e=Object.entries(dh).map(([,e])=>e),t=[...e,...this.options.extensions].filter(e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type));this.extensionManager=new Hd(t,this)}createCommandManager(){this.commandManager=new Td(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new nu(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:ma.create({doc:Cd(this.options.content,this.schema,this.options.parseOptions)})});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews();const t=this.view.dom;t.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this});const r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event}),o&&this.emit("blur",{editor:this,event:o.event}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return yd(this.state,e)}getNodeAttributes(e){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),vd(this.state,e)}getMarkAttributes(e){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),bd(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,r="string"===typeof e?t:e;return kd(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _d(this.state.doc,this.schema)}get isEmpty(){return Md(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),Sd(this.css)}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}class hh{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new hh(e)}configure(e={}){const t=this.extend();return t.options=Jd(this.options,e),t}extend(e={}){const t=new hh(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}class mh{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,this.options=this.config.defaultOptions}static create(e={}){return new mh(e)}configure(e={}){const t=this.extend();return t.options=Jd(this.options,e),t}extend(e={}){const t=new mh(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,t.options=e.defaultOptions?e.defaultOptions:t.parent.options,t}}function vh(e,t,n){return new Cu(e,(e,r,o,i)=>{const a=n instanceof Function?n(r):n,{tr:s}=e;return r[0]&&s.replaceWith(o-1,i,t.create(a)),s})}function gh(e,t,n){let r=[];return n.doc.nodesBetween(e,t,(e,t)=>{r=[...r,...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n}))]}),r}function bh(e,t,n){return new Cu(e,(e,r,o,i)=>{const a=n instanceof Function?n(r):n,{tr:s}=e,c=r[r.length-1],l=r[0];let u=i;if(c){const n=l.search(/\S/),r=o+l.indexOf(c),d=r+c.length,p=gh(o,i,e).filter(e=>{const{excluded:n}=e.mark.type;return n.find(e=>e.name===t.name)}).filter(e=>e.to>r);if(p.length)return null;d<i&&s.delete(d,i),r>o&&s.delete(o+n,r),u=o+n+c.length,s.addMark(o+n,u,t.create(a)),s.removeStoredMark(t)}return s})}function yh(e,t,n){const r=(o,i)=>{const a=[];return o.forEach(o=>{if(o.isText&&o.text){const{text:r}=o;let s,c=0;while(null!==(s=e.exec(r))){const e=Math.max(s.length-2,0),r=Math.max(s.length-1,0);if(null===i||void 0===i?void 0:i.type.allowsMarkType(t)){const i=s.index,l=i+s[0].indexOf(s[e]),u=l+s[e].length,d=l+s[e].lastIndexOf(s[r]),p=d+s[r].length,f=n instanceof Function?n(s):n;l>0&&a.push(o.cut(c,l)),a.push(o.cut(d,p).mark(t.create(f).addToSet(o.marks))),c=u}}c<r.length&&a.push(o.cut(c))}else a.push(o.copy(r(o.content,o)))}),Er.fromArray(a)};return new ya({key:new xa("markPasteRule"),props:{transformPasted:e=>new Lr(r(e.content),e.openStart,e.openEnd)}})}function wh(e){return jp(e)&&e instanceof ta}function Oh(e,t,n){const r=e.coordsAtPos(t),o=e.coordsAtPos(n,-1),i=Math.min(r.top,o.top),a=Math.max(r.bottom,o.bottom),s=Math.min(r.left,o.left),c=Math.max(r.right,o.right),l=c-s,u=a-i,d=s,p=i,f={top:i,bottom:a,left:s,right:c,width:l,height:u,x:d,y:p};return{...f,toJSON:()=>f}}function xh(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function kh(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Sh(e){var t=kh(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function jh(e){var t=kh(e).Element;return e instanceof t||e instanceof Element}function Nh(e){var t=kh(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ch(e){if("undefined"===typeof ShadowRoot)return!1;var t=kh(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _h(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Mh(e){return e!==kh(e)&&Nh(e)?_h(e):Sh(e)}function Vh(e){return e?(e.nodeName||"").toLowerCase():null}function Th(e){return((jh(e)?e.ownerDocument:e.document)||window.document).documentElement}function Eh(e){return xh(Th(e)).left+Sh(e).scrollLeft}function Dh(e){return kh(e).getComputedStyle(e)}function Ah(e){var t=Dh(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Ih(e,t,n){void 0===n&&(n=!1);var r=Th(t),o=xh(e),i=Nh(t),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(i||!i&&!n)&&(("body"!==Vh(t)||Ah(r))&&(a=Mh(t)),Nh(t)?(s=xh(t),s.x+=t.clientLeft,s.y+=t.clientTop):r&&(s.x=Eh(r))),{x:o.left+a.scrollLeft-s.x,y:o.top+a.scrollTop-s.y,width:o.width,height:o.height}}function Ph(e){var t=xh(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Bh(e){return"html"===Vh(e)?e:e.assignedSlot||e.parentNode||(Ch(e)?e.host:null)||Th(e)}function Rh(e){return["html","body","#document"].indexOf(Vh(e))>=0?e.ownerDocument.body:Nh(e)&&Ah(e)?e:Rh(Bh(e))}function Lh(e,t){var n;void 0===t&&(t=[]);var r=Rh(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),i=kh(r),a=o?[i].concat(i.visualViewport||[],Ah(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(Lh(Bh(a)))}function zh(e){return["table","td","th"].indexOf(Vh(e))>=0}function $h(e){return Nh(e)&&"fixed"!==Dh(e).position?e.offsetParent:null}function qh(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&Nh(e)){var r=Dh(e);if("fixed"===r.position)return null}var o=Bh(e);while(Nh(o)&&["html","body"].indexOf(Vh(o))<0){var i=Dh(o);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return o;o=o.parentNode}return null}function Fh(e){var t=kh(e),n=$h(e);while(n&&zh(n)&&"static"===Dh(n).position)n=$h(n);return n&&("html"===Vh(n)||"body"===Vh(n)&&"static"===Dh(n).position)?t:n||qh(e)||t}var Hh="top",Uh="bottom",Wh="right",Kh="left",Jh="auto",Gh=[Hh,Uh,Wh,Kh],Yh="start",Xh="end",Zh="clippingParents",Qh="viewport",em="popper",tm="reference",nm=Gh.reduce((function(e,t){return e.concat([t+"-"+Yh,t+"-"+Xh])}),[]),rm=[].concat(Gh,[Jh]).reduce((function(e,t){return e.concat([t,t+"-"+Yh,t+"-"+Xh])}),[]),om="beforeRead",im="read",am="afterRead",sm="beforeMain",cm="main",lm="afterMain",um="beforeWrite",dm="write",pm="afterWrite",fm=[om,im,am,sm,cm,lm,um,dm,pm];function hm(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name);var i=[].concat(e.requires||[],e.requiresIfExists||[]);i.forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function mm(e){var t=hm(e);return fm.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}function vm(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function gm(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}var bm={placement:"bottom",modifiers:[],strategy:"absolute"};function ym(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function wm(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,i=void 0===o?bm:o;return function(e,t,n){void 0===n&&(n=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},bm,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,c={state:o,setOptions:function(n){u(),o.options=Object.assign({},i,o.options,n),o.scrollParents={reference:jh(e)?Lh(e):e.contextElement?Lh(e.contextElement):[],popper:Lh(t)};var a=mm(gm([].concat(r,o.options.modifiers)));return o.orderedModifiers=a.filter((function(e){return e.enabled})),l(),c.update()},forceUpdate:function(){if(!s){var e=o.elements,t=e.reference,n=e.popper;if(ym(t,n)){o.rects={reference:Ih(t,Fh(n),"fixed"===o.options.strategy),popper:Ph(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var i=o.orderedModifiers[r],a=i.fn,l=i.options,u=void 0===l?{}:l,d=i.name;"function"===typeof a&&(o=a({state:o,options:u,name:d,instance:c})||o)}else o.reset=!1,r=-1}}},update:vm((function(){return new Promise((function(e){c.forceUpdate(),e(o)}))})),destroy:function(){u(),s=!0}};if(!ym(e,t))return c;function l(){o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var s=i({state:o,name:t,instance:c,options:r}),l=function(){};a.push(s||l)}}))}function u(){a.forEach((function(e){return e()})),a=[]}return c.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var Om={passive:!0};function xm(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,c=kh(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach((function(e){e.addEventListener("scroll",n.update,Om)})),s&&c.addEventListener("resize",n.update,Om),function(){i&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Om)})),s&&c.removeEventListener("resize",n.update,Om)}}var km={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xm,data:{}};function Sm(e){return e.split("-")[0]}function jm(e){return e.split("-")[1]}function Nm(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Cm(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?Sm(o):null,a=o?jm(o):null,s=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case Hh:t={x:s,y:n.y-r.height};break;case Uh:t={x:s,y:n.y+n.height};break;case Wh:t={x:n.x+n.width,y:c};break;case Kh:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=i?Nm(i):null;if(null!=l){var u="y"===l?"height":"width";switch(a){case Yh:t[l]=t[l]-(n[u]/2-r[u]/2);break;case Xh:t[l]=t[l]+(n[u]/2-r[u]/2);break;default:}}return t}function _m(e){var t=e.state,n=e.name;t.modifiersData[n]=Cm({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Mm={name:"popperOffsets",enabled:!0,phase:"read",fn:_m,data:{}},Vm=Math.max,Tm=Math.min,Em=Math.round,Dm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Am(e){var t=e.x,n=e.y,r=window,o=r.devicePixelRatio||1;return{x:Em(Em(t*o)/o)||0,y:Em(Em(n*o)/o)||0}}function Im(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.offsets,a=e.position,s=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,u=!0===l?Am(i):"function"===typeof l?l(i):i,d=u.x,p=void 0===d?0:d,f=u.y,h=void 0===f?0:f,m=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),g=Kh,b=Hh,y=window;if(c){var w=Fh(n),O="clientHeight",x="clientWidth";w===kh(n)&&(w=Th(n),"static"!==Dh(w).position&&(O="scrollHeight",x="scrollWidth")),w=w,o===Hh&&(b=Uh,h-=w[O]-r.height,h*=s?1:-1),o===Kh&&(g=Wh,p-=w[x]-r.width,p*=s?1:-1)}var k,S=Object.assign({position:a},c&&Dm);return s?Object.assign({},S,(k={},k[b]=v?"0":"",k[g]=m?"0":"",k.transform=(y.devicePixelRatio||1)<2?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",k)):Object.assign({},S,(t={},t[b]=v?h+"px":"",t[g]=m?p+"px":"",t.transform="",t))}function Pm(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,c=void 0===s||s,l={placement:Sm(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Im(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Im(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Bm={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pm,data:{}};function Rm(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];Nh(o)&&Vh(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))}function Lm(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),a=i.reduce((function(e,t){return e[t]="",e}),{});Nh(r)&&Vh(r)&&(Object.assign(r.style,a),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}}var zm={name:"applyStyles",enabled:!0,phase:"write",fn:Rm,effect:Lm,requires:["computeStyles"]};function $m(e,t,n){var r=Sm(e),o=[Kh,Hh].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[Kh,Wh].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function qm(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=rm.reduce((function(e,n){return e[n]=$m(n,t.rects,i),e}),{}),s=a[t.placement],c=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=a}var Fm={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qm},Hm={left:"right",right:"left",bottom:"top",top:"bottom"};function Um(e){return e.replace(/left|right|bottom|top/g,(function(e){return Hm[e]}))}var Wm={start:"end",end:"start"};function Km(e){return e.replace(/start|end/g,(function(e){return Wm[e]}))}function Jm(e){var t=kh(e),n=Th(e),r=t.visualViewport,o=n.clientWidth,i=n.clientHeight,a=0,s=0;return r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:o,height:i,x:a+Eh(e),y:s}}function Gm(e){var t,n=Th(e),r=Sh(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=Vm(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Vm(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Eh(e),c=-r.scrollTop;return"rtl"===Dh(o||n).direction&&(s+=Vm(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:c}}function Ym(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ch(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Xm(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Zm(e){var t=xh(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Qm(e,t){return t===Qh?Xm(Jm(e)):Nh(t)?Zm(t):Xm(Gm(Th(e)))}function ev(e){var t=Lh(Bh(e)),n=["absolute","fixed"].indexOf(Dh(e).position)>=0,r=n&&Nh(e)?Fh(e):e;return jh(r)?t.filter((function(e){return jh(e)&&Ym(e,r)&&"body"!==Vh(e)})):[]}function tv(e,t,n){var r="clippingParents"===t?ev(e):[].concat(t),o=[].concat(r,[n]),i=o[0],a=o.reduce((function(t,n){var r=Qm(e,n);return t.top=Vm(r.top,t.top),t.right=Tm(r.right,t.right),t.bottom=Tm(r.bottom,t.bottom),t.left=Vm(r.left,t.left),t}),Qm(e,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function nv(){return{top:0,right:0,bottom:0,left:0}}function rv(e){return Object.assign({},nv(),e)}function ov(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function iv(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.boundary,a=void 0===i?Zh:i,s=n.rootBoundary,c=void 0===s?Qh:s,l=n.elementContext,u=void 0===l?em:l,d=n.altBoundary,p=void 0!==d&&d,f=n.padding,h=void 0===f?0:f,m=rv("number"!==typeof h?h:ov(h,Gh)),v=u===em?tm:em,g=e.elements.reference,b=e.rects.popper,y=e.elements[p?v:u],w=tv(jh(y)?y:y.contextElement||Th(e.elements.popper),a,c),O=xh(g),x=Cm({reference:O,element:b,strategy:"absolute",placement:o}),k=Xm(Object.assign({},b,x)),S=u===em?k:O,j={top:w.top-S.top+m.top,bottom:S.bottom-w.bottom+m.bottom,left:w.left-S.left+m.left,right:S.right-w.right+m.right},N=e.modifiersData.offset;if(u===em&&N){var C=N[o];Object.keys(j).forEach((function(e){var t=[Wh,Uh].indexOf(e)>=0?1:-1,n=[Hh,Uh].indexOf(e)>=0?"y":"x";j[e]+=C[n]*t}))}return j}function av(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?rm:c,u=jm(r),d=u?s?nm:nm.filter((function(e){return jm(e)===u})):Gh,p=d.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=d);var f=p.reduce((function(t,n){return t[n]=iv(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[Sm(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}function sv(e){if(Sm(e)===Jh)return[];var t=Um(e);return[Km(e),t,Km(t)]}function cv(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,v=t.options.placement,g=Sm(v),b=g===v,y=c||(b||!h?[Um(v)]:sv(v)),w=[v].concat(y).reduce((function(e,n){return e.concat(Sm(n)===Jh?av(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),O=t.rects.reference,x=t.rects.popper,k=new Map,S=!0,j=w[0],N=0;N<w.length;N++){var C=w[N],_=Sm(C),M=jm(C)===Yh,V=[Hh,Uh].indexOf(_)>=0,T=V?"width":"height",E=iv(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:p,padding:l}),D=V?M?Wh:Kh:M?Uh:Hh;O[T]>x[T]&&(D=Um(D));var A=Um(D),I=[];if(i&&I.push(E[_]<=0),s&&I.push(E[D]<=0,E[A]<=0),I.every((function(e){return e}))){j=C,S=!1;break}k.set(C,I)}if(S)for(var P=h?3:1,B=function(e){var t=w.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return j=t,"break"},R=P;R>0;R--){var L=B(R);if("break"===L)break}t.placement!==j&&(t.modifiersData[r]._skip=!0,t.placement=j,t.reset=!0)}}var lv={name:"flip",enabled:!0,phase:"main",fn:cv,requiresIfExists:["offset"],data:{_skip:!1}};function uv(e){return"x"===e?"y":"x"}function dv(e,t,n){return Vm(e,Tm(t,n))}function pv(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,f=void 0===p||p,h=n.tetherOffset,m=void 0===h?0:h,v=iv(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),g=Sm(t.placement),b=jm(t.placement),y=!b,w=Nm(g),O=uv(w),x=t.modifiersData.popperOffsets,k=t.rects.reference,S=t.rects.popper,j="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,N={x:0,y:0};if(x){if(i||s){var C="y"===w?Hh:Kh,_="y"===w?Uh:Wh,M="y"===w?"height":"width",V=x[w],T=x[w]+v[C],E=x[w]-v[_],D=f?-S[M]/2:0,A=b===Yh?k[M]:S[M],I=b===Yh?-S[M]:-k[M],P=t.elements.arrow,B=f&&P?Ph(P):{width:0,height:0},R=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:nv(),L=R[C],z=R[_],$=dv(0,k[M],B[M]),q=y?k[M]/2-D-$-L-j:A-$-L-j,F=y?-k[M]/2+D+$+z+j:I+$+z+j,H=t.elements.arrow&&Fh(t.elements.arrow),U=H?"y"===w?H.clientTop||0:H.clientLeft||0:0,W=t.modifiersData.offset?t.modifiersData.offset[t.placement][w]:0,K=x[w]+q-W-U,J=x[w]+F-W;if(i){var G=dv(f?Tm(T,K):T,V,f?Vm(E,J):E);x[w]=G,N[w]=G-V}if(s){var Y="x"===w?Hh:Kh,X="x"===w?Uh:Wh,Z=x[O],Q=Z+v[Y],ee=Z-v[X],te=dv(f?Tm(Q,K):Q,Z,f?Vm(ee,J):ee);x[O]=te,N[O]=te-Z}}t.modifiersData[r]=N}}var fv={name:"preventOverflow",enabled:!0,phase:"main",fn:pv,requiresIfExists:["offset"]},hv=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,rv("number"!==typeof e?e:ov(e,Gh))};function mv(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Sm(n.placement),c=Nm(s),l=[Kh,Wh].indexOf(s)>=0,u=l?"height":"width";if(i&&a){var d=hv(o.padding,n),p=Ph(i),f="y"===c?Hh:Kh,h="y"===c?Uh:Wh,m=n.rects.reference[u]+n.rects.reference[c]-a[c]-n.rects.popper[u],v=a[c]-n.rects.reference[c],g=Fh(i),b=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=m/2-v/2,w=d[f],O=b-p[u]-d[h],x=b/2-p[u]/2+y,k=dv(w,x,O),S=c;n.modifiersData[r]=(t={},t[S]=k,t.centerOffset=k-x,t)}}function vv(e){var t=e.state,n=e.options,r=n.element,o=void 0===r?"[data-popper-arrow]":r;null!=o&&("string"!==typeof o||(o=t.elements.popper.querySelector(o),o))&&Ym(t.elements.popper,o)&&(t.elements.arrow=o)}var gv={name:"arrow",enabled:!0,phase:"main",fn:mv,effect:vv,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bv(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function yv(e){return[Hh,Wh,Uh,Kh].some((function(t){return e[t]>=0}))}function wv(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=iv(t,{elementContext:"reference"}),s=iv(t,{altBoundary:!0}),c=bv(a,r),l=bv(s,o,i),u=yv(c),d=yv(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Ov={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wv},xv=[km,Mm,Bm,zm,Fm,lv,fv,gv,Ov],kv=wm({defaultModifiers:xv}),Sv="tippy-box",jv="tippy-content",Nv="tippy-backdrop",Cv="tippy-arrow",_v="tippy-svg-arrow",Mv={passive:!0,capture:!0};function Vv(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function Tv(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Ev(e,t){return"function"===typeof e?e.apply(void 0,t):e}function Dv(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function Av(e){return e.split(/\s+/).filter(Boolean)}function Iv(e){return[].concat(e)}function Pv(e,t){-1===e.indexOf(t)&&e.push(t)}function Bv(e){return e.filter((function(t,n){return e.indexOf(t)===n}))}function Rv(e){return e.split("-")[0]}function Lv(e){return[].slice.call(e)}function zv(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function $v(){return document.createElement("div")}function qv(e){return["Element","Fragment"].some((function(t){return Tv(e,t)}))}function Fv(e){return Tv(e,"NodeList")}function Hv(e){return Tv(e,"MouseEvent")}function Uv(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Wv(e){return qv(e)?[e]:Fv(e)?Lv(e):Array.isArray(e)?e:Lv(document.querySelectorAll(e))}function Kv(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Jv(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Gv(e){var t,n=Iv(e),r=n[0];return(null==r||null==(t=r.ownerDocument)?void 0:t.body)?r.ownerDocument:document}function Yv(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,o=e.popperState,i=e.props,a=i.interactiveBorder,s=Rv(o.placement),c=o.modifiersData.offset;if(!c)return!0;var l="bottom"===s?c.top.y:0,u="top"===s?c.bottom.y:0,d="right"===s?c.left.x:0,p="left"===s?c.right.x:0,f=t.top-r+l>a,h=r-t.bottom-u>a,m=t.left-n+d>a,v=n-t.right-p>a;return f||h||m||v}))}function Xv(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}var Zv={isTouch:!1},Qv=0;function eg(){Zv.isTouch||(Zv.isTouch=!0,window.performance&&document.addEventListener("mousemove",tg))}function tg(){var e=performance.now();e-Qv<20&&(Zv.isTouch=!1,document.removeEventListener("mousemove",tg)),Qv=e}function ng(){var e=document.activeElement;if(Uv(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function rg(){document.addEventListener("touchstart",eg,Mv),window.addEventListener("blur",ng)}var og="undefined"!==typeof window&&"undefined"!==typeof document,ig=og?navigator.userAgent:"",ag=/MSIE |Trident\//.test(ig);var sg={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},cg={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},lg=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},sg,{},cg),ug=Object.keys(lg),dg=function(e){var t=Object.keys(e);t.forEach((function(t){lg[t]=e[t]}))};function pg(e){var t=e.plugins||[],n=t.reduce((function(t,n){var r=n.name,o=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:o),t}),{});return Object.assign({},e,{},n)}function fg(e,t){var n=t?Object.keys(pg(Object.assign({},lg,{plugins:t}))):ug,r=n.reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(o){t[n]=r}return t}),{});return r}function hg(e,t){var n=Object.assign({},t,{content:Ev(t.content,[e])},t.ignoreAttributes?{}:fg(e,t.plugins));return n.aria=Object.assign({},lg.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var mg=function(){return"innerHTML"};function vg(e,t){e[mg()]=t}function gg(e){var t=$v();return!0===e?t.className=Cv:(t.className=_v,qv(e)?t.appendChild(e):vg(t,e)),t}function bg(e,t){qv(t.content)?(vg(e,""),e.appendChild(t.content)):"function"!==typeof t.content&&(t.allowHTML?vg(e,t.content):e.textContent=t.content)}function yg(e){var t=e.firstElementChild,n=Lv(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(jv)})),arrow:n.find((function(e){return e.classList.contains(Cv)||e.classList.contains(_v)})),backdrop:n.find((function(e){return e.classList.contains(Nv)}))}}function wg(e){var t=$v(),n=$v();n.className=Sv,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=$v();function o(n,r){var o=yg(t),i=o.box,a=o.content,s=o.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"===typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||bg(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(i.removeChild(s),i.appendChild(gg(r.arrow))):i.appendChild(gg(r.arrow)):s&&i.removeChild(s)}return r.className=jv,r.setAttribute("data-state","hidden"),bg(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props),{popper:t,onUpdate:o}}wg.$$tippy=!0;var Og=1,xg=[],kg=[];function Sg(e,t){var n,r,o,i,a,s,c,l=hg(e,Object.assign({},lg,{},pg(zv(t)))),u=!1,d=!1,p=!1,f=!1,h=[],m=Dv(Y,l.interactiveDebounce),v=Og++,g=null,b=Bv(l.plugins),y={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:v,reference:e,popper:$v(),popperInstance:g,props:l,state:y,plugins:b,clearDelayTimeouts:ce,setProps:le,setContent:ue,show:de,hide:pe,hideWithInteractivity:fe,enable:ae,disable:se,unmount:he,destroy:me};if(!l.render)return w;var O=l.render(w),x=O.popper,k=O.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+w.id,w.popper=x,e._tippy=w,x._tippy=w;var S=b.map((function(e){return e.fn(w)})),j=e.hasAttribute("aria-expanded");return K(),P(),D(),A("onCreate",[w]),l.showOnCreate&&oe(),x.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(e){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(V().addEventListener("mousemove",m),m(e))})),w;function N(){var e=w.props.touch;return Array.isArray(e)?e:[e,0]}function C(){return"hold"===N()[0]}function _(){var e;return!!(null==(e=w.props.render)?void 0:e.$$tippy)}function M(){return c||e}function V(){var e=M().parentNode;return e?Gv(e):document}function T(){return yg(x)}function E(e){return w.state.isMounted&&!w.state.isVisible||Zv.isTouch||i&&"focus"===i.type?0:Vv(w.props.delay,e?0:1,lg.delay)}function D(){x.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",x.style.zIndex=""+w.props.zIndex}function A(e,t,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(r=w.props)[e].apply(r,t)}function I(){var t=w.props.aria;if(t.content){var n="aria-"+t.content,r=x.id,o=Iv(w.props.triggerTarget||e);o.forEach((function(e){var t=e.getAttribute(n);if(w.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var o=t&&t.replace(r,"").trim();o?e.setAttribute(n,o):e.removeAttribute(n)}}))}}function P(){if(!j&&w.props.aria.expanded){var t=Iv(w.props.triggerTarget||e);t.forEach((function(e){w.props.interactive?e.setAttribute("aria-expanded",w.state.isVisible&&e===M()?"true":"false"):e.removeAttribute("aria-expanded")}))}}function B(){V().removeEventListener("mousemove",m),xg=xg.filter((function(e){return e!==m}))}function R(e){if((!Zv.isTouch||!p&&"mousedown"!==e.type)&&(!w.props.interactive||!x.contains(e.target))){if(M().contains(e.target)){if(Zv.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else A("onClickOutside",[w,e]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),d=!0,setTimeout((function(){d=!1})),w.state.isMounted||q())}}function L(){p=!0}function z(){p=!1}function $(){var e=V();e.addEventListener("mousedown",R,!0),e.addEventListener("touchend",R,Mv),e.addEventListener("touchstart",z,Mv),e.addEventListener("touchmove",L,Mv)}function q(){var e=V();e.removeEventListener("mousedown",R,!0),e.removeEventListener("touchend",R,Mv),e.removeEventListener("touchstart",z,Mv),e.removeEventListener("touchmove",L,Mv)}function F(e,t){U(e,(function(){!w.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&t()}))}function H(e,t){U(e,t)}function U(e,t){var n=T().box;function r(e){e.target===n&&(Xv(n,"remove",r),t())}if(0===e)return t();Xv(n,"remove",a),Xv(n,"add",r),a=r}function W(t,n,r){void 0===r&&(r=!1);var o=Iv(w.props.triggerTarget||e);o.forEach((function(e){e.addEventListener(t,n,r),h.push({node:e,eventType:t,handler:n,options:r})}))}function K(){C()&&(W("touchstart",G,{passive:!0}),W("touchend",X,{passive:!0})),Av(w.props.trigger).forEach((function(e){if("manual"!==e)switch(W(e,G),e){case"mouseenter":W("mouseleave",X);break;case"focus":W(ag?"focusout":"blur",Z);break;case"focusin":W("focusout",Z);break}}))}function J(){h.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)})),h=[]}function G(e){var t,n=!1;if(w.state.isEnabled&&!Q(e)&&!d){var r="focus"===(null==(t=i)?void 0:t.type);i=e,c=e.currentTarget,P(),!w.state.isVisible&&Hv(e)&&xg.forEach((function(t){return t(e)})),"click"===e.type&&(w.props.trigger.indexOf("mouseenter")<0||u)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:oe(e),"click"===e.type&&(u=!n),n&&!r&&ie(e)}}function Y(e){var t=e.target,n=M().contains(t)||x.contains(t);if("mousemove"!==e.type||!n){var r=re().concat(x).map((function(e){var t,n=e._tippy,r=null==(t=n.popperInstance)?void 0:t.state;return r?{popperRect:e.getBoundingClientRect(),popperState:r,props:l}:null})).filter(Boolean);Yv(r,e)&&(B(),ie(e))}}function X(e){var t=Q(e)||w.props.trigger.indexOf("click")>=0&&u;t||(w.props.interactive?w.hideWithInteractivity(e):ie(e))}function Z(e){w.props.trigger.indexOf("focusin")<0&&e.target!==M()||w.props.interactive&&e.relatedTarget&&x.contains(e.relatedTarget)||ie(e)}function Q(e){return!!Zv.isTouch&&C()!==e.type.indexOf("touch")>=0}function ee(){te();var t=w.props,n=t.popperOptions,r=t.placement,o=t.offset,i=t.getReferenceClientRect,a=t.moveTransition,c=_()?yg(x).arrow:null,l=i?{getBoundingClientRect:i,contextElement:i.contextElement||M()}:e,u={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(_()){var n=T(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?r.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?r.setAttribute("data-"+e,""):r.removeAttribute("data-"+e)})),t.attributes.popper={}}}},d=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},u];_()&&c&&d.push({name:"arrow",options:{element:c,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),w.popperInstance=kv(l,x,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:d}))}function te(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function ne(){var e,t=w.props.appendTo,n=M();e=w.props.interactive&&t===lg.appendTo||"parent"===t?n.parentNode:Ev(t,[n]),e.contains(x)||e.appendChild(x),ee()}function re(){return Lv(x.querySelectorAll("[data-tippy-root]"))}function oe(e){w.clearDelayTimeouts(),e&&A("onTrigger",[w,e]),$();var t=E(!0),r=N(),o=r[0],i=r[1];Zv.isTouch&&"hold"===o&&i&&(t=i),t?n=setTimeout((function(){w.show()}),t):w.show()}function ie(e){if(w.clearDelayTimeouts(),A("onUntrigger",[w,e]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=E(!1);t?r=setTimeout((function(){w.state.isVisible&&w.hide()}),t):o=requestAnimationFrame((function(){w.hide()}))}}else q()}function ae(){w.state.isEnabled=!0}function se(){w.hide(),w.state.isEnabled=!1}function ce(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(o)}function le(t){if(!w.state.isDestroyed){A("onBeforeUpdate",[w,t]),J();var n=w.props,r=hg(e,Object.assign({},w.props,{},t,{ignoreAttributes:!0}));w.props=r,K(),n.interactiveDebounce!==r.interactiveDebounce&&(B(),m=Dv(Y,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?Iv(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded"),P(),D(),k&&k(n,r),w.popperInstance&&(ee(),re().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),A("onAfterUpdate",[w,t])}}function ue(e){w.setProps({content:e})}function de(){var e=w.state.isVisible,t=w.state.isDestroyed,n=!w.state.isEnabled,r=Zv.isTouch&&!w.props.touch,o=Vv(w.props.duration,0,lg.duration);if(!(e||t||n||r)&&!M().hasAttribute("disabled")&&(A("onShow",[w],!1),!1!==w.props.onShow(w))){if(w.state.isVisible=!0,_()&&(x.style.visibility="visible"),D(),$(),w.state.isMounted||(x.style.transition="none"),_()){var i=T(),a=i.box,c=i.content;Kv([a,c],0)}s=function(){var e;if(w.state.isVisible&&!f){if(f=!0,x.offsetHeight,x.style.transition=w.props.moveTransition,_()&&w.props.animation){var t=T(),n=t.box,r=t.content;Kv([n,r],o),Jv([n,r],"visible")}I(),P(),Pv(kg,w),null==(e=w.popperInstance)||e.forceUpdate(),w.state.isMounted=!0,A("onMount",[w]),w.props.animation&&_()&&H(o,(function(){w.state.isShown=!0,A("onShown",[w])}))}},ne()}}function pe(){var e=!w.state.isVisible,t=w.state.isDestroyed,n=!w.state.isEnabled,r=Vv(w.props.duration,1,lg.duration);if(!(e||t||n)&&(A("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,f=!1,u=!1,_()&&(x.style.visibility="hidden"),B(),q(),D(),_()){var o=T(),i=o.box,a=o.content;w.props.animation&&(Kv([i,a],r),Jv([i,a],"hidden"))}I(),P(),w.props.animation?_()&&F(r,w.unmount):w.unmount()}}function fe(e){V().addEventListener("mousemove",m),Pv(xg,m),m(e)}function he(){w.state.isVisible&&w.hide(),w.state.isMounted&&(te(),re().forEach((function(e){e._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x),kg=kg.filter((function(e){return e!==w})),w.state.isMounted=!1,A("onHidden",[w]))}function me(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),J(),delete e._tippy,w.state.isDestroyed=!0,A("onDestroy",[w]))}}function jg(e,t){void 0===t&&(t={});var n=lg.plugins.concat(t.plugins||[]);rg();var r=Object.assign({},t,{plugins:n}),o=Wv(e),i=o.reduce((function(e,t){var n=t&&Sg(t,r);return n&&e.push(n),e}),[]);return qv(e)?i[0]:i}jg.defaultProps=lg,jg.setDefaultProps=dg,jg.currentInput=Zv;Object.assign({},zm,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});jg.setDefaultProps({render:wg});var Ng=jg;class Cg{constructor({editor:e,element:t,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=Ng(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...e})}update(e,t){const{state:n,composing:r}=e,{doc:o,selection:i}=n,a=t&&t.doc.eq(o)&&t.selection.eq(i);if(r||a)return;const{empty:s,ranges:c}=i,l=Math.min(...c.map(e=>e.$from.pos)),u=Math.max(...c.map(e=>e.$to.pos)),d=!o.textBetween(l,u).length&&Np(e.state.selection);s||d?this.hide():(this.tippy.setProps({getReferenceClientRect:()=>{if(wh(e.state.selection)){const t=e.nodeDOM(l);if(t)return t.getBoundingClientRect()}return Oh(e,l,u)}}),this.show())}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const _g=new xa("menuBubble"),Mg=e=>new ya({key:_g,view:t=>new Cg({view:t,...e})});Gd.create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[Mg({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});class Vg{constructor({editor:e,element:t,view:n,tippyOptions:r}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=n,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(r),this.element.style.visibility="visible"}createTooltip(e={}){this.tippy=Ng(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...e})}update(e,t){const{state:n,composing:r}=e,{doc:o,selection:i}=n,a=t&&t.doc.eq(o)&&t.selection.eq(i);if(r||a)return;const{$anchor:s,empty:c,from:l,to:u}=i,d=1===s.depth,p=!i.$anchor.parent.isLeaf&&!i.$anchor.parent.textContent,f=d&&p;c&&f?(this.tippy.setProps({getReferenceClientRect:()=>Oh(e,l,u)}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Tg=new xa("menuFloating"),Eg=e=>new ya({key:Tg,view:t=>new Vg({view:t,...e})});Gd.create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[Eg({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});Object(o["defineComponent"])({name:"BubbleMenu",props:{editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})}},setup(e,{slots:t}){const n=Object(o["ref"])(null);return Object(o["onMounted"])(()=>{const{editor:t,tippyOptions:r}=e;t.registerPlugin(Mg({editor:t,element:n.value,tippyOptions:r}))}),Object(o["onBeforeUnmount"])(()=>{const{editor:t}=e;t.unregisterPlugin(_g)}),()=>{var e;return Object(o["h"])("div",{ref:n},null===(e=t.default)||void 0===e?void 0:e.call(t))}}});function Dg(e){return Object(o["customRef"])((t,n)=>({get(){return t(),e},set(t){e=t,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Ag extends fh{constructor(e={}){return super(e),this.vueRenderers=Object(o["reactive"])(new Map),this.contentComponent=null,this.reactiveState=Dg(this.view.state),this.on("transaction",()=>{this.reactiveState.value=this.view.state}),Object(o["markRaw"])(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const Ig=Object(o["defineComponent"])({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=Object(o["ref"])(),n=Object(o["getCurrentInstance"])();return Object(o["watchEffect"])(()=>{const r=e.editor;r&&r.options.element&&t.value&&Object(o["nextTick"])(()=>{if(!t.value||!r.options.element.firstChild)return;const e=Object(o["unref"])(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:e}),r.createNodeViews()})}),Object(o["onBeforeUnmount"])(()=>{const t=e.editor;if(!t)return;if(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild)return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const n=Object(o["h"])(o["Teleport"],{to:t.teleportElement,key:t.id},Object(o["h"])(t.component,{ref:t.id,...t.props}));e.push(n)}),Object(o["h"])("div",{ref:e=>{this.rootEl=e}},...e)}});Object(o["defineComponent"])({name:"FloatingMenu",props:{editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})}},setup(e,{slots:t}){const n=Object(o["ref"])(null);return Object(o["onMounted"])(()=>{const{editor:t,tippyOptions:r}=e;t.registerPlugin(Eg({editor:t,element:n.value,tippyOptions:r}))}),Object(o["onBeforeUnmount"])(()=>{const{editor:t}=e;t.unregisterPlugin(Tg)}),()=>{var e;return Object(o["h"])("div",{ref:n},null===(e=t.default)||void 0===e?void 0:e.call(t))}}});Boolean;Object(o["defineComponent"])({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var e,t;return Object(o["h"])(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragStart:this.onDragStart},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))}}),Object(o["defineComponent"])({props:{as:{type:String,default:"div"}},render(){return Object(o["h"])(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});const Pg=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi,Bg=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)$/gi,Rg=mh.create({name:"link",priority:1e3,inclusive:!1,defaultOptions:{openOnClick:!0,linkOnPaste:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:e}){return["a",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({commands:t})=>t.setMark("link",e),toggleLink:e=>({commands:t})=>t.toggleMark("link",e),unsetLink:()=>({commands:e})=>e.unsetMark("link")}},addPasteRules(){return[yh(Pg,this.type,e=>({href:e[0]}))]},addProseMirrorPlugins(){const e=[];return this.options.openOnClick&&e.push(new ya({key:new xa("handleClickLink"),props:{handleClick:(e,t,n)=>{var r;const o=this.editor.getAttributes("link"),i=null===(r=n.target)||void 0===r?void 0:r.closest("a");return!(!i||!o.href)&&(window.open(o.href,o.target),!0)}}})),this.options.linkOnPaste&&e.push(new ya({key:new xa("handlePasteLink"),props:{handlePaste:(e,t,n)=>{const{state:r}=e,{selection:o}=r,{empty:i}=o;if(i)return!1;let a="";return n.content.forEach(e=>{a+=e.textContent}),!(!a||!a.match(Bg))&&(this.editor.commands.setMark(this.type,{href:a}),!0)}}})),e}});var Lg=Rg;const zg=Gd.create({name:"textAlign",defaultOptions:{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>({textAlign:e.style.textAlign||this.options.defaultAlignment}),renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:"text-align: "+e.textAlign}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.every(n=>t.updateAttributes(n,{textAlign:e})),unsetTextAlign:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var $g=zg;function qg(e){return void 0===e&&(e={}),new ya({view:function(t){return new Fg(t,e)}})}var Fg=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};Fg.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},Fg.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},Fg.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},Fg.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var a=this.editorView.coordsAtPos(this.cursorPos);e={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var s,c,l=this.editorView.dom.offsetParent;if(this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!l||l==document.body&&"static"==getComputedStyle(l).position)s=-pageXOffset,c=-pageYOffset;else{var u=l.getBoundingClientRect();s=u.left-l.scrollLeft,c=u.top-l.scrollTop}this.element.style.left=e.left-s+"px",this.element.style.top=e.top-c+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},Fg.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},Fg.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(n=Di(this.editorView.state.doc,n,this.editorView.dragging.slice),null==n))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},Fg.prototype.dragend=function(){this.scheduleRemoval(20)},Fg.prototype.drop=function(){this.scheduleRemoval(20)},Fg.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};const Hg=Gd.create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins(){return[qg(this.options)]}});var Ug=Hg;const Wg=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,Kg=hh.create({name:"image",defaultOptions:{inline:!1,HTMLAttributes:{}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:"img[src]"}]},renderHTML({HTMLAttributes:e}){return["img",Id(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[vh(Wg,this.type,e=>{const[,t,n,r]=e;return{src:n,alt:t,title:r}})]}});var Jg=Kg;const Gg=mh.create({name:"underline",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}]},renderHTML({HTMLAttributes:e}){return["u",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark("underline"),toggleUnderline:()=>({commands:e})=>e.toggleMark("underline"),unsetUnderline:()=>({commands:e})=>e.unsetMark("underline")}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline()}}});var Yg=Gg,Xg=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return Lr.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new Zg(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!Qg(e)||!eb(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){e:for(;;){if(!r&&t.valid(e))return e;for(var o=e.pos,i=null,a=e.depth;;a--){var s=e.node(a);if(n>0?e.indexAfter(a)<s.childCount:e.index(a)>0){i=s.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;o+=n;var c=e.doc.resolve(o);if(t.valid(c))return c}for(;;){var l=n>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!ta.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=l,o+=n;var u=e.doc.resolve(o);if(t.valid(u))return u}return null}},t}(Yi);Xg.prototype.visible=!1,Yi.jsonID("gapcursor",Xg);var Zg=function(e){this.pos=e};function Qg(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function eb(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}Zg.prototype.map=function(e){return new Zg(e.map(this.pos))},Zg.prototype.resolve=function(e){var t=e.resolve(this.pos);return Xg.valid(t)?new Xg(t):Yi.near(t)};var tb=function(){return new ya({props:{decorations:ib,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&Xg.valid(n))return new Xg(n)},handleClick:ob,handleKeyDown:nb}})},nb=Nu({ArrowLeft:rb("horiz",-1),ArrowRight:rb("horiz",1),ArrowUp:rb("vert",-1),ArrowDown:rb("vert",1)});function rb(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var i=e.selection,a=t>0?i.$to:i.$from,s=i.empty;if(i instanceof Qi){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=e.doc.resolve(t>0?a.after():a.before())}var c=Xg.findFrom(a,t,s);return!!c&&(r&&r(e.tr.setSelection(new Xg(c))),!0)}}function ob(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!Xg.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}),i=o.inside;return!(i>-1&&ta.isSelectable(e.state.doc.nodeAt(i)))&&(e.dispatch(e.state.tr.setSelection(new Xg(r))),!0)}function ib(e){if(!(e.selection instanceof Xg))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Fl.create(e.doc,[Ll.widget(e.selection.head,t,{key:"gapcursor"})])}const ab=Gd.create({name:"gapCursor",addProseMirrorPlugins(){return[tb()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options};return{allowGapCursor:null!==(t=zd(Ed(e,"allowGapCursor",n)))&&void 0!==t?t:null}}});var sb=ab;const cb=hh.create({name:"doc",topNode:!0,content:"block+"});var lb=cb;const ub=hh.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.toggleNode("paragraph","paragraph")}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var db=ub;const pb=hh.create({name:"text",group:"inline"});var fb=pb,hb=200,mb=function(){};mb.prototype.append=function(e){return e.length?(e=mb.from(e),!this.length&&e||e.length<hb&&this.leafAppend(e)||this.length<hb&&e.leafPrepend(this)||this.appendInner(e)):this},mb.prototype.prepend=function(e){return e.length?mb.from(e).append(this):this},mb.prototype.appendInner=function(e){return new gb(this,e)},mb.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?mb.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},mb.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},mb.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},mb.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},mb.from=function(e){return e instanceof mb?e:e&&e.length?new vb(e):mb.empty};var vb=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=hb)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=hb)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(mb);mb.empty=new vb([]);var gb=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(mb),bb=mb,yb=bb,wb=500,Ob=function(e,t){this.items=e,this.eventCount=t};function xb(e,t){var n;return e.forEach((function(e,r){if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}Ob.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){var a=this.items.get(i-1);if(a.selection){--i;break}}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,c,l=e.tr,u=[],d=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void d.push(e);if(r){d.push(new kb(e.map));var a,p=e.step.map(r.slice(o));p&&l.maybeStep(p).doc&&(a=l.mapping.maps[l.mapping.maps.length-1],u.push(new kb(a,null,null,u.length+d.length))),o--,a&&r.appendMap(a,o)}else l.maybeStep(e.step);return e.selection?(s=r?e.selection.map(r.slice(o)):e.selection,c=new Ob(n.items.slice(0,i).append(d.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:s}},Ob.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null,c=0;c<e.steps.length;c++){var l=e.steps[c].invert(e.docs[c]),u=new kb(e.mapping.maps[c],l,t),d=void 0;(d=s&&s.merge(u))&&(u=d,c?o.pop():a=a.slice(0,a.length-1)),o.push(u),t&&(i++,t=null),r||(s=u)}var p=i-n.depth;return p>jb&&(a=xb(a,p),i-=p),new Ob(a.append(o),i)},Ob.prototype.remapping=function(e,t){var n=new di;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)}),e,t),n},Ob.prototype.addMaps=function(e){return 0==this.eventCount?this:new Ob(this.items.append(e.map((function(e){return new kb(e)}))),this.eventCount)},Ob.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach((function(e){e.selection&&a--}),r);var s=t;this.items.forEach((function(t){var r=o.getMirror(--s);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(t.step){var l=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(s+1,r));u&&a++,n.push(new kb(c,l,u))}else n.push(new kb(c))}}),r);for(var c=[],l=t;l<i;l++)c.push(new kb(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),d=new Ob(u,a);return d.emptyItemCount()>wb&&(d=d.compress(this.items.length-n.length)),d},Ob.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},Ob.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((function(i,a){if(a>=e)r.push(i),i.selection&&o++;else if(i.step){var s=i.step.map(t.slice(n)),c=s&&s.getMap();if(n--,c&&t.appendMap(c,n),s){var l=i.selection&&i.selection.map(t.slice(n));l&&o++;var u,d=new kb(c.invert(),s,l),p=r.length-1;(u=r.length&&r[p].merge(d))?r[p]=u:r.push(d)}}else i.map&&n--}),this.items.length,0),new Ob(yb.from(r.reverse()),o)},Ob.empty=new Ob(yb.empty,0);var kb=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};kb.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new kb(t.getMap().invert(),t,this.selection)}};var Sb=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},jb=20;function Nb(e,t,n,r){var o,i=n.getMeta(Ab);if(i)return i.historyState;n.getMeta(Ib)&&(e=new Sb(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(Ab))return a.getMeta(Ab).redo?new Sb(e.done.addTransform(n,null,r,Db(t)),e.undone,_b(n.mapping.maps[n.steps.length-1]),e.prevTime):new Sb(e.done,e.undone.addTransform(n,null,r,Db(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Sb(e.done.rebased(n,o),e.undone.rebased(n,o),Mb(e.prevRanges,n.mapping),e.prevTime):new Sb(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Mb(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Cb(n,e.prevRanges)),c=a?Mb(e.prevRanges,n.mapping):_b(n.mapping.maps[n.steps.length-1]);return new Sb(e.done.addTransform(n,s?t.selection.getBookmark():null,r,Db(t)),Ob.empty,c,n.time)}function Cb(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}function _b(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function Mb(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function Vb(e,t,n,r){var o=Db(t),i=Ab.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,o);if(a){var s=a.selection.resolve(a.transform.doc),c=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,o),l=new Sb(r?c:a.remaining,r?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(Ab,{redo:r,historyState:l}).scrollIntoView())}}var Tb=!1,Eb=null;function Db(e){var t=e.plugins;if(Eb!=t){Tb=!1,Eb=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Tb=!0;break}}return Tb}var Ab=new xa("history"),Ib=new xa("closeHistory");function Pb(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new ya({key:Ab,state:{init:function(){return new Sb(Ob.empty,Ob.empty,null,0)},apply:function(t,n,r){return Nb(n,r,t,e)}},config:e})}function Bb(e,t){var n=Ab.getState(e);return!(!n||0==n.done.eventCount)&&(t&&Vb(n,e,t,!1),!0)}function Rb(e,t){var n=Ab.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&Vb(n,e,t,!0),!0)}const Lb=Gd.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Bb(e,t),redo:()=>({state:e,dispatch:t})=>Rb(e,t)}},addProseMirrorPlugins(){return[Pb(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}}});var zb=Lb;const $b=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,qb=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,Fb=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,Hb=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,Ub=mh.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark("bold"),toggleBold:()=>({commands:e})=>e.toggleMark("bold"),unsetBold:()=>({commands:e})=>e.unsetMark("bold")}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bh($b,this.type),bh(Fb,this.type)]},addPasteRules(){return[yh(qb,this.type),yh(Hb,this.type)]}});var Wb=Ub;const Kb=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,Jb=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,Gb=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,Yb=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,Xb=mh.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark("italic"),toggleItalic:()=>({commands:e})=>e.toggleMark("italic"),unsetItalic:()=>({commands:e})=>e.unsetMark("italic")}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bh(Kb,this.type),bh(Gb,this.type)]},addPasteRules(){return[yh(Jb,this.type),yh(Yb,this.type)]}});var Zb=Xb;const Qb=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,ey=mh.create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark("code"),toggleCode:()=>({commands:e})=>e.toggleMark("code"),unsetCode:()=>({commands:e})=>e.unsetMark("code")}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bh(Qb,this.type)]},addPasteRules(){return[yh(Qb,this.type)]}});var ty=ey;const ny=/^```(?<language>[a-z]*)? $/,ry=/^~~~(?<language>[a-z]*)? $/,oy=hh.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const n=null===(t=e.firstElementChild)||void 0===t?void 0:t.getAttribute("class");if(!n)return null;const r=new RegExp(`^(${this.options.languageClassPrefix})`);return{language:n.replace(r,"")}},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode("codeBlock",e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode("codeBlock","paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())}}},addInputRules(){return[Au(ny,this.type,({groups:e})=>e),Au(ry,this.type,({groups:e})=>e)]}});var iy=oy;const ay=hh.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:"h"+e,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){const n=this.options.levels.includes(e.attrs.level),r=n?e.attrs.level:this.options.levels[0];return["h"+r,Id(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode("heading",e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode("heading","paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,["Mod-Alt-"+t]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Au(new RegExp(`^(#{1,${e}})\\s$`),this.type,{level:e}))}});var sy=ay;const cy=hh.create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Id(this.options.HTMLAttributes,e)]},addCommands(){return{setHardBreak:()=>({commands:e})=>e.first([()=>e.exitCode(),()=>e.insertContent({type:this.name})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var ly=cy;const uy=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,dy=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm,py=mh.create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:e}){return["s",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark("strike"),toggleStrike:()=>({commands:e})=>e.toggleMark("strike"),unsetStrike:()=>({commands:e})=>e.unsetMark("strike")}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bh(uy,this.type)]},addPasteRules(){return[yh(dy,this.type)]}});var fy=py;const hy=/^\s*>\s$/gm,my=hh.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn("blockquote"),toggleBlockquote:()=>({commands:e})=>e.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:e})=>e.lift("blockquote")}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Du(hy,this.type)]}});var vy=my;const gy=hh.create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Id(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{var n;if(t){const{parent:t,pos:r}=e.selection.$from,o=r+1,i=e.doc.nodeAt(o);if(!i){const r=null===(n=t.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(e.insert(o,r),e.setSelection(Qi.create(e.doc,o)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[vh(/^(?:---|—-|___\s|\*\*\*\s)$/,this.type)]}});var by=gy;const yy=/^\s*([-+*])\s$/,wy=hh.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList("bulletList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Du(yy,this.type)]}});var Oy=wy;const xy=/^(\d+)\.\s$/,ky=hh.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes(){return{start:{default:1,parseHTML:e=>({start:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1})}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",Id(this.options.HTMLAttributes,n),0]:["ol",Id(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList("orderedList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Du(xy,this.type,e=>({order:+e[1]}),(e,t)=>t.childCount+t.attrs.order===+e[1])]}});var Sy=ky;const jy=hh.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Id(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}});var Ny=jy;const Cy=Gd.create({name:"starterKit",addExtensions(){var e,t,n,r,o,i,a,s,c,l,u,d,p,f,h,m,v,g;const b=[];return!1!==this.options.blockquote&&b.push(vy.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&b.push(Wb.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&b.push(Oy.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&b.push(ty.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&b.push(iy.configure(null===(o=this.options)||void 0===o?void 0:o.codeBlock)),!1!==this.options.document&&b.push(lb.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&b.push(Ug.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&b.push(sb.configure(null===(s=this.options)||void 0===s?void 0:s.gapcursor)),!1!==this.options.hardBreak&&b.push(ly.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&b.push(sy.configure(null===(l=this.options)||void 0===l?void 0:l.heading)),!1!==this.options.history&&b.push(zb.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&b.push(by.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&b.push(Zb.configure(null===(p=this.options)||void 0===p?void 0:p.italic)),!1!==this.options.listItem&&b.push(Ny.configure(null===(f=this.options)||void 0===f?void 0:f.listItem)),!1!==this.options.orderedList&&b.push(Sy.configure(null===(h=this.options)||void 0===h?void 0:h.orderedList)),!1!==this.options.paragraph&&b.push(db.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&b.push(fy.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&b.push(fb.configure(null===(g=this.options)||void 0===g?void 0:g.text)),b}});var _y=Cy,My=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,Vy=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,Ty=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,Ey=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,Dy=mh.create({name:"warning",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"warning"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["warning",Id(this.options.HTMLAttributes,t),0]},addCommands:function(){return{setWarning:function(){return function(e){var t=e.commands;return t.setMark("warning")}},toggleWarning:function(){return function(e){var t=e.commands;return t.toggleMark("warning")}},unsetWarning:function(){return function(e){var t=e.commands;return t.unsetMark("warning")}}}},addInputRules:function(){return[bh(My,this.type),bh(Ty,this.type)]},addPasteRules:function(){return[yh(Vy,this.type),yh(Ey,this.type)]}}),Ay=mh.create({name:"clickable",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"clickable"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["clickable",Id(this.options.HTMLAttributes,t),0]},addCommands:function(){return{setClickable:function(){return function(e){var t=e.commands;return t.setMark("clickable")}},toggleClickable:function(){return function(e){var t=e.commands;return t.toggleMark("clickable")}},unsetClickable:function(){return function(e){var t=e.commands;return t.unsetMark("clickable")}}}},addInputRules:function(){return[bh(My,this.type),bh(Ty,this.type)]},addPasteRules:function(){return[yh(Vy,this.type),yh(Ey,this.type)]}}),Iy={props:["modelValue"],emits:["update"],components:{EditorContent:Ig},data:function(){return{editor:null,content:this.modelValue?this.modelValue:""}},mounted:function(){var e=this;this.editor=new Ag({extensions:[_y,Dy,Lg,$g.configure({types:["heading","paragraph"]}),Ay,Jg,Ug,Yg],onUpdate:function(){e.$emit("update",e.editor.getHTML())},content:this.content})},methods:{setLink:function(){var e=window.prompt("Insira a hiperligação: ");null!=e&&this.editor.chain().focus().setLink({href:e}).run()},addImage:function(){var e=window.prompt("Hiperligação da imagem: ");e&&this.editor.chain().focus().setImage({src:e}).run()}},beforeUnmount:function(){this.editor.destroy()}};n("a4e7");Iy.render=Nr;var Py=Iy,By={name:"DescriptionField",props:["question","qid","value","properties"],components:{Tiptap:Py},emits:["update","uncollapse"],data:function(){return{answer:this.properties.content,invalid:!1}},created:function(){void 0===this.answer&&(this.answer="")},methods:{update:function(){this.$emit("update",{field_type:"text_exposition",content:this.answer})}}};By.render=Zn;var Ry=By,Ly={class:"flex column row"};function zy(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("Input"),c=Object(o["resolveComponent"])("FormInvalidator");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Ly,[Object(o["createVNode"])("label",{class:"label mr-2",for:n.qid,style:{"white-space":"nowrap"}},"Link do vídeo:",8,["for"]),Object(o["createVNode"])(s,{id:n.qid,modelValue:i.answer,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.answer=e}),type:"text",name:n.qid,required:"",onInput:t[2]||(t[2]=function(e){return a.update()}),onInvalid:t[3]||(t[3]=function(t){e.$emit("uncollapse")})},null,8,["id","modelValue","name"]),Object(o["createVNode"])(c,{valid:void 0!==a.getId(this.answer),"start-invalid":i.triedSubmit,"invalid-string":"Deve introduzir um link válido",style:{"margin-bottom":"0px !important"},onInvalid:t[4]||(t[4]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid"])])}n("ac1f"),n("466d");var $y=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|&v(?:i)?=))([^#&?]*).*/,qy={name:"YouTubeField",props:["question","qid","value","properties"],emits:["update","uncollapse"],components:{Input:Ie["a"],FormInvalidator:nt["a"]},data:function(){return{answer:this.properties.content,triedSubmit:!1}},methods:{update:function(){this.$emit("update",{field_type:"youtube_exposition",content:this.getId(this.answer)})},getId:function(e){if(e){var t=e.match($y);if(t)return t[1]}}}};qy.render=zy;var Fy=qy,Hy={class:"flex column la vca"},Uy={class:"control dropdown-item"},Wy={class:"control dropdown-item"};function Ky(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Hy,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":"O valor por defeito não é um número.",onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Uy,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Wy,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",ref:"default",modelValue:i.result.default,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.default=e}),modelModifiers:{number:!0},placeholder:"Valor inicial",class:"input is-small",type:"number",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var Jy={name:"NIFField",props:["qid","properties"],emits:["update","uncollapse"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1}},methods:{update:function(){this.valid=this.$refs["default"].validity_valid,""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),this.$emit("update",this.result)}}};Jy.render=Ky;var Gy=Jy,Yy={class:"flex column la vca"},Xy={class:"control dropdown-item"},Zy={class:"control dropdown-item"};function Qy(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Yy,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":"O valor por defeito não é um número telefónico.",onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",Xy,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",Zy,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",ref:"default",modelValue:i.result.default,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.default=e}),modelModifiers:{number:!0},placeholder:"Valor inicial",class:"input is-small",type:"tel",pattern:"(?:9[1-36][0-9]|2[12][0-9]|2[35][1-689]|24[1-59]|26[1-35689]|27[1-9]|28[1-69]|29[1256]|3[0-9]{2})[0-9]{6}",minlength:"9",maxlength:"9",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var ew={name:"PhoneField",props:["qid","properties"],emits:["update","uncollapse"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1}},methods:{update:function(){this.valid=this.$refs["default"].validity_valid,""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),this.$emit("update",this.result)}}};ew.render=Qy;var tw=ew,nw={class:"flex column la vca"},rw={class:"control dropdown-item"},ow={class:"control dropdown-item"};function iw(e,t,n,r,i,a){var s=Object(o["resolveComponent"])("FormInvalidator"),c=Object(o["resolveComponent"])("Input"),l=Object(o["resolveComponent"])("Dropdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",nw,[Object(o["createVNode"])(s,{valid:i.valid,"start-invalid":i.triedSubmit,"invalid-string":"O valor por defeito não é um email.",onInvalid:t[1]||(t[1]=function(t){e.$emit("uncollapse"),i.triedSubmit=!0})},null,8,["valid","start-invalid"]),Object(o["createVNode"])(l,{text:"Opções avançadas",valid:!(i.triedSubmit&&!i.valid)},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",rw,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_placeholder"},"Texto de sugestão: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_placeholder",modelValue:i.result.placeholder,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.result.placeholder=e}),placeholder:"Texto de sugestão, tal como este",class:"input is-small",type:"text",onInput:a.update},null,8,["id","modelValue","onInput"])]),Object(o["createVNode"])("div",ow,[Object(o["createVNode"])("label",{class:"label",for:n.qid+"_default"},"Valor por defeito: ",8,["for"]),Object(o["createVNode"])(c,{id:n.qid+"_default",ref:"default",modelValue:i.result.default,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.result.default=e}),placeholder:"Valor inicial",class:"input is-small",type:"email",onInput:a.update},null,8,["id","modelValue","onInput"])])]})),_:1},8,["valid"])])}var aw={name:"EmailField",props:["qid","properties"],emits:["update","uncollapse"],components:{FormInvalidator:nt["a"],Dropdown:rt["a"],Input:Ie["a"]},data:function(){return{result:this.properties,valid:!0,triedSubmit:!1}},methods:{update:function(){this.valid=this.$refs["default"].validity_valid,""===this.result.default&&(this.result.default=void 0),""===this.result.placeholder&&(this.result.placeholder=void 0),this.$emit("update",this.result)}}};aw.render=iw;var sw=aw,cw=n("69d9"),lw={name:"Question",props:["questionSection","text","collapsed","hideQuestionNumbers"],emits:["uncollapse","update"],components:Object.assign({},{Switch:X["a"],draggable:G.a,Input:Ie["a"]},r),data:function(){return{section:this.questionSection,selecting_field:!1,new_field:"none"}},created:function(){void 0===this.section.hidden_elements&&(this.section.hidden_elements={})},methods:{selected_field:function(){this.selecting_field=!1;var e={id:this.$store.getters.getUid,properties:{field_type:this.new_field}};"multiplechoice"===this.new_field?e.properties.style="radio":"number"===this.new_field&&(e.properties.style="text"),this.section.questions.push(e),this.new_field="none",this.scrollToLast(),this.update()},update:function(){this.$emit("update",this.sections)},move:function(){return function(e){return e.related.classList.contains("draggable-question")}},getFieldTypeTitle:function(e){return Object(cw["c"])(e)},scrollToLast:function(){var e=this,t="question_".concat(this.section.questions.length-1);this.$nextTick((function(){return e.$refs[t].scrollIntoView({behavior:"smooth"})}))}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}};lw.render=Ae;var uw=lw,dw=n("c427"),pw={name:"CreateResponse",components:{Submit:Y["a"],Switch:X["a"],CreatorQuestions:uw,draggable:G.a,Dropdown:rt["a"],Input:Ie["a"],FormInvalidator:nt["a"],Tiptap:Py},data:function(){return{response:void 0,form_types:[],form:void 0,new_field:"none",selecting_field:[],loading:void 0,triedSubmit:!1,typeInvalid:!1,success:void 0,changes:0}},created:function(){var e=this;document.title="Criação de Formulário",dw["a"].get("formType/").then((function(t){return e.form_types=t.data})),this.$route.params.id?dw["a"].get("form/".concat(this.$route.params.id)).then((function(t){e.form=t.data,void 0===e.form.form.hidden_elements&&(e.form.form.hidden_elements={})})):this.form={title:"",type:"",submit_message:"Formulário submetido com sucesso!",redirect:"/pre_events/consult_events/",redirect_delay:3,form:{sections:[{section_name:"",id:this.$store.getters.getUid,questions:[]}],hidden_elements:{},hide_section_numbers:!1,hide_question_numbers:!1}}},methods:{move:function(){return function(e){return e.related.classList.contains("draggable-section")}},cancel:function(){var e=this;this.loading=!0,this.$route.params.id?dw["a"].get("form/".concat(this.$route.params.id)).then((function(t){e.form=t.data,e.changes=0,e.loading=void 0})):this.$router.back()},addSection:function(){var e=this,t={section_name:"",id:this.$store.getters.getUid,questions:[],hidden_elements:{}};this.form.form.sections.push(t);var n="section_".concat(this.form.form.sections.length-1);this.$nextTick((function(){return e.$refs[n].scrollIntoView({behavior:"smooth"})}))},submit:function(){this.$refs.form.checkValidity()&&(this.loading=!0,setTimeout(this.postSubmission.bind(this),0))},postSubmission:function(){var e,t,n,r=this;void 0===this.form.id?(e="post",t="/form/",n="O formulário foi criado com sucesso. Pode continuar a editar."):(e="put",t="/form/".concat(this.form.id).concat("/"),n="O formulário foi editado com sucesso. Pode continuar a editar.");var o={method:e,url:t,headers:{"X-CSRFToken":Object(cw["b"])("csrftoken")},data:this.form,transformResponse:[function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.loading=void 0;try{r.response=JSON.parse(t),r.form=r.response,r.success=n,r.changes=0}catch(o){r.response=t}return e.abrupt("return",r.response);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]};Object(dw["a"])(o)},removeEmptySections:function(){for(var e=0;e<this.form.form.sections.length;)0==this.form.form.sections[e].questions.length?this.form.form.sections.splice(e,1):e++}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}}};n("cc56"),n("64d1");pw.render=W;t["default"]=pw},"2b9d":function(e,t,n){"use strict";var r=n("7a23");function o(e,t,n,o,i,a){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Transition"],{name:n.bottom?"slide-fade-bottom":"slide-fade",class:"box notification",mode:"out-in"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("span",null,[Object(r["createVNode"])("button",{type:"button",class:"delete",onClick:t[1]||(t[1]=function(e){return a.deactivate()})}),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(n.message),1)],512),[[r["vShow"],i.active]])]})),_:1},8,["name"])}var i=n("1da1"),a=(n("96cf"),n("d3b7"),{name:"Notification",props:["message","duration","bottom"],emits:["deleted"],data:function(){return{active:!1}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.active=!0,!e.duration){t.next=5;break}return t.next=4,new Promise((function(t){return setTimeout(t,e.duration)}));case 4:e.deactivate();case 5:case"end":return t.stop()}}),t)})))()},methods:{deactivate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.active=!1,t.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:e.$emit("deleted");case 4:case"end":return t.stop()}}),t)})))()}}});a.render=o;t["a"]=a},3097:function(e,t,n){},3394:function(e,t,n){},"451e":function(e,t,n){},4603:function(e,t,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function c(e,t){if(null==e)return{};var n,r,o=s(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e){return u(e)||d(e)||p()}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}n.r(t),n.d(t,"MultiDrag",(function(){return Rt})),n.d(t,"Sortable",(function(){return Ze})),n.d(t,"Swap",(function(){return Nt}));var f="1.10.2";function h(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var m=h(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),v=h(/Edge/i),g=h(/firefox/i),b=h(/safari/i)&&!h(/chrome/i)&&!h(/android/i),y=h(/iP(ad|od|hone)/i),w=h(/chrome/i)&&h(/android/i),O={capture:!1,passive:!1};function x(e,t,n){e.addEventListener(t,n,!m&&O)}function k(e,t,n){e.removeEventListener(t,n,!m&&O)}function S(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function j(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function N(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&S(e,t):S(e,t))||r&&e===n)return e;if(e===n)break}while(e=j(e))}return null}var C,_=/\s+/g;function M(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(_," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(_," ")}}function V(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"===typeof n?"":"px")}}function T(e,t){var n="";if("string"===typeof e)n=e;else do{var r=V(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function E(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function D(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var i,a,s,c,l,u,d;if(e!==window&&e!==D()?(i=e.getBoundingClientRect(),a=i.top,s=i.left,c=i.bottom,l=i.right,u=i.height,d=i.width):(a=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!m))do{if(o&&o.getBoundingClientRect&&("none"!==V(o,"transform")||n&&"static"!==V(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(V(o,"border-top-width")),s-=p.left+parseInt(V(o,"border-left-width")),c=a+i.height,l=s+i.width;break}}while(o=o.parentNode);if(r&&e!==window){var f=T(o||e),h=f&&f.a,v=f&&f.d;f&&(a/=v,s/=h,d/=h,u/=v,c=a+u,l=s+d)}return{top:a,left:s,bottom:c,right:l,width:d,height:u}}}function I(e,t,n){var r=$(e,!0),o=A(e)[t];while(r){var i=A(r)[n],a=void 0;if(a="top"===n||"left"===n?o>=i:o<=i,!a)return r;if(r===D())break;r=$(r,!1)}return!1}function P(e,t,n){var r=0,o=0,i=e.children;while(o<i.length){if("none"!==i[o].style.display&&i[o]!==Ze.ghost&&i[o]!==Ze.dragged&&N(i[o],n.draggable,e,!1)){if(r===t)return i[o];r++}o++}return null}function B(e,t){var n=e.lastElementChild;while(n&&(n===Ze.ghost||"none"===V(n,"display")||t&&!S(n,t)))n=n.previousElementSibling;return n||null}function R(e,t){var n=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ze.clone||t&&!S(e,t)||n++;return n}function L(e){var t=0,n=0,r=D();if(e)do{var o=T(e),i=o.a,a=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function z(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}function $(e,t){if(!e||!e.getBoundingClientRect)return D();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=V(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return D();if(r||t)return n;r=!0}}}while(n=n.parentNode);return D()}function q(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function F(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function H(e,t){return function(){if(!C){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),C=setTimeout((function(){C=void 0}),t)}}}function U(){clearTimeout(C),C=void 0}function W(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function K(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function J(e,t){V(e,"position","absolute"),V(e,"top",t.top),V(e,"left",t.left),V(e,"width",t.width),V(e,"height",t.height)}function G(e){V(e,"position",""),V(e,"top",""),V(e,"left",""),V(e,"width",""),V(e,"height","")}var Y="Sortable"+(new Date).getTime();function X(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==V(e,"display")&&e!==Ze.ghost){t.push({target:e,rect:A(e)});var n=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=T(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(z(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,s=A(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=T(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&F(c,s)&&!F(a,s)&&(u.top-s.top)/(u.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=Q(u,c,l,r.options)),F(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof n&&n()}),i):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){V(e,"transition",""),V(e,"transform","");var o=T(this.el),i=o&&o.a,a=o&&o.d,s=(t.left-n.left)/(i||1),c=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!c,V(e,"transform","translate3d("+s+"px,"+c+"px,0)"),Z(e),V(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),V(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){V(e,"transition",""),V(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}function Z(e){return e.offsetWidth}function Q(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var ee=[],te={initializeByDefault:!0},ne={mount:function(e){for(var t in te)te.hasOwnProperty(t)&&!(t in e)&&(e[t]=te[t]);ee.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";ee.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](a({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](a({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in ee.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,i(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof a&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return ee.forEach((function(r){"function"===typeof r.eventProperties&&i(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return ee.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};function re(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,i=e.cloneEl,s=e.toEl,c=e.fromEl,l=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,p=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[Y],t){var b,y=t.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||m||v?(b=document.createEvent("Event"),b.initEvent(r,!0,!0)):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=c||n,b.item=o||n,b.clone=i,b.oldIndex=l,b.newIndex=u,b.oldDraggableIndex=d,b.newDraggableIndex=p,b.originalEvent=f,b.pullMode=h?h.lastPutMode:void 0;var O=a({},g,ne.getEventProperties(r,t));for(var x in O)b[x]=O[x];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var oe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=c(n,["evt"]);ne.pluginEvent.bind(Ze)(e,t,a({dragEl:ae,parentEl:se,ghostEl:ce,rootEl:le,nextEl:ue,lastDownEl:de,cloneEl:pe,cloneHidden:fe,dragStarted:Ne,putSortable:ye,activeSortable:Ze.active,originalEvent:r,oldIndex:he,oldDraggableIndex:ve,newIndex:me,newDraggableIndex:ge,hideGhostForTarget:Je,unhideGhostForTarget:Ge,cloneNowHidden:function(){fe=!0},cloneNowShown:function(){fe=!1},dispatchSortableEvent:function(e){ie({sortable:t,name:e,originalEvent:r})}},o))};function ie(e){re(a({putSortable:ye,cloneEl:pe,targetEl:ae,rootEl:le,oldIndex:he,oldDraggableIndex:ve,newIndex:me,newDraggableIndex:ge},e))}var ae,se,ce,le,ue,de,pe,fe,he,me,ve,ge,be,ye,we,Oe,xe,ke,Se,je,Ne,Ce,_e,Me,Ve,Te=!1,Ee=!1,De=[],Ae=!1,Ie=!1,Pe=[],Be=!1,Re=[],Le="undefined"!==typeof document,ze=y,$e=v||m?"cssFloat":"float",qe=Le&&!w&&!y&&"draggable"in document.createElement("div"),Fe=function(){if(Le){if(m)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),He=function(e,t){var n=V(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=P(e,0,t),i=P(e,1,t),a=o&&V(o),s=i&&V(i),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+A(o).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a["float"]&&"none"!==a["float"]){var u="left"===a["float"]?"left":"right";return!i||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=r&&"none"===n[$e]||i&&"none"===n[$e]&&c+l>r)?"vertical":"horizontal"},Ue=function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===a||o===s||r+i/2===a+c/2},We=function(e,t){var n;return De.some((function(r){if(!B(r)){var o=A(r),i=r[Y].options.emptyInsertThreshold,a=e>=o.left-i&&e<=o.right+i,s=t>=o.top-i&&t<=o.bottom+i;return i&&a&&s?n=r:void 0}})),n},Ke=function(e){function t(e,n){return function(r,o,i,a){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(r,o,i,a),n)(r,o,i,a);var c=(n?r:o).options.group.name;return!0===e||"string"===typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},o=e.group;o&&"object"==r(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Je=function(){!Fe&&ce&&V(ce,"display","none")},Ge=function(){!Fe&&ce&&V(ce,"display","")};Le&&document.addEventListener("click",(function(e){if(Ee)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ee=!1,!1}),!0);var Ye=function(e){if(ae){e=e.touches?e.touches[0]:e;var t=We(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Y]._onDragOver(n)}}},Xe=function(e){ae&&ae.parentNode[Y]._isOutsideThisEl(e.target)};function Ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[Y]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return He(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ze.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in ne.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in Ke(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&qe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?x(e,"pointerdown",this._onTapStart):(x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),De.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,X())}function Qe(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function et(e,t,n,r,o,i,a,s){var c,l,u=e[Y],d=u.options.onMove;return!window.CustomEvent||m||v?(c=document.createEvent("Event"),c.initEvent("move",!0,!0)):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=o||t,c.relatedRect=i||A(t),c.willInsertAfter=s,c.originalEvent=a,e.dispatchEvent(c),d&&(l=d.call(u,c,a)),l}function tt(e){e.draggable=!1}function nt(){Be=!1}function rt(e,t,n){var r=A(B(n.el,n.options.draggable)),o=10;return t?e.clientX>r.right+o||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+o}function ot(e,t,n,r,o,i,a,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,p=!1;if(!a)if(s&&Me<l*o){if(!Ae&&(1===_e?c>u+l*i/2:c<d-l*i/2)&&(Ae=!0),Ae)p=!0;else if(1===_e?c<u+Me:c>d-Me)return-_e}else if(c>u+l*(1-o)/2&&c<d-l*(1-o)/2)return it(t);return p=p||a,p&&(c<u+l*i/2||c>d-l*i/2)?c>u+l/2?1:-1:0}function it(e){return R(ae)<R(e)?1:-1}function at(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;while(n--)r+=t.charCodeAt(n);return r.toString(36)}function st(e){Re.length=0;var t=e.getElementsByTagName("input"),n=t.length;while(n--){var r=t[n];r.checked&&Re.push(r)}}function ct(e){return setTimeout(e,0)}function lt(e){return clearTimeout(e)}Ze.prototype={constructor:Ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ce=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,ae):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(st(n),!ae&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||r.disabled)&&!c.isContentEditable&&(s=N(s,r.draggable,n,!1),(!s||!s.animated)&&de!==s)){if(he=R(s),ve=R(s,r.draggable),"function"===typeof l){if(l.call(this,e,s,this))return ie({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),oe("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(l&&(l=l.split(",").some((function(r){if(r=N(c,r.trim(),n,!1),r)return ie({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),oe("filter",t,{evt:e}),!0})),l))return void(o&&e.cancelable&&e.preventDefault());r.handle&&!N(c,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,i=o.el,a=o.options,s=i.ownerDocument;if(n&&!ae&&n.parentNode===i){var c=A(n);if(le=i,ae=n,se=ae.parentNode,ue=ae.nextSibling,de=n,be=a.group,Ze.dragged=ae,we={target:ae,clientX:(t||e).clientX,clientY:(t||e).clientY},Se=we.clientX-c.left,je=we.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ae.style["will-change"]="all",r=function(){oe("delayEnded",o,{evt:e}),Ze.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!g&&o.nativeDraggable&&(ae.draggable=!0),o._triggerDragStart(e,t),ie({sortable:o,name:"choose",originalEvent:e}),M(ae,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){E(ae,e.trim(),tt)})),x(s,"dragover",Ye),x(s,"mousemove",Ye),x(s,"touchmove",Ye),x(s,"mouseup",o._onDrop),x(s,"touchend",o._onDrop),x(s,"touchcancel",o._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ae.draggable=!0),oe("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(v||m))r();else{if(Ze.eventCanceled)return void this._onDrop();x(s,"mouseup",o._disableDelayedDrag),x(s,"touchend",o._disableDelayedDrag),x(s,"touchcancel",o._disableDelayedDrag),x(s,"mousemove",o._delayedDragTouchMoveHandler),x(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&x(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ae&&tt(ae),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;k(e,"mouseup",this._disableDelayedDrag),k(e,"touchend",this._disableDelayedDrag),k(e,"touchcancel",this._disableDelayedDrag),k(e,"mousemove",this._delayedDragTouchMoveHandler),k(e,"touchmove",this._delayedDragTouchMoveHandler),k(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,t?"touchmove":"mousemove",this._onTouchMove):(x(ae,"dragend",this),x(le,"dragstart",this._onDragStart));try{document.selection?ct((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Te=!1,le&&ae){oe("dragStarted",this,{evt:t}),this.nativeDraggable&&x(document,"dragover",Xe);var n=this.options;!e&&M(ae,n.dragClass,!1),M(ae,n.ghostClass,!0),Ze.active=this,e&&this._appendGhost(),ie({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Oe){this._lastX=Oe.clientX,this._lastY=Oe.clientY,Je();var e=document.elementFromPoint(Oe.clientX,Oe.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(Oe.clientX,Oe.clientY),e===t)break;t=e}if(ae.parentNode[Y]._isOutsideThisEl(e),t)do{if(t[Y]){var n=void 0;if(n=t[Y]._onDragOver({clientX:Oe.clientX,clientY:Oe.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ge()}},_onTouchMove:function(e){if(we){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=ce&&T(ce,!0),a=ce&&i&&i.a,s=ce&&i&&i.d,c=ze&&Ve&&L(Ve),l=(o.clientX-we.clientX+r.x)/(a||1)+(c?c[0]-Pe[0]:0)/(a||1),u=(o.clientY-we.clientY+r.y)/(s||1)+(c?c[1]-Pe[1]:0)/(s||1);if(!Ze.active&&!Te){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ce){i?(i.e+=l-(xe||0),i.f+=u-(ke||0)):i={a:1,b:0,c:0,d:1,e:l,f:u};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");V(ce,"webkitTransform",d),V(ce,"mozTransform",d),V(ce,"msTransform",d),V(ce,"transform",d),xe=l,ke=u,Oe=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ce){var e=this.options.fallbackOnBody?document.body:le,t=A(ae,!0,ze,!0,e),n=this.options;if(ze){Ve=e;while("static"===V(Ve,"position")&&"none"===V(Ve,"transform")&&Ve!==document)Ve=Ve.parentNode;Ve!==document.body&&Ve!==document.documentElement?(Ve===document&&(Ve=D()),t.top+=Ve.scrollTop,t.left+=Ve.scrollLeft):Ve=D(),Pe=L(Ve)}ce=ae.cloneNode(!0),M(ce,n.ghostClass,!1),M(ce,n.fallbackClass,!0),M(ce,n.dragClass,!0),V(ce,"transition",""),V(ce,"transform",""),V(ce,"box-sizing","border-box"),V(ce,"margin",0),V(ce,"top",t.top),V(ce,"left",t.left),V(ce,"width",t.width),V(ce,"height",t.height),V(ce,"opacity","0.8"),V(ce,"position",ze?"absolute":"fixed"),V(ce,"zIndex","100000"),V(ce,"pointerEvents","none"),Ze.ghost=ce,e.appendChild(ce),V(ce,"transform-origin",Se/parseInt(ce.style.width)*100+"% "+je/parseInt(ce.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;oe("dragStart",this,{evt:e}),Ze.eventCanceled?this._onDrop():(oe("setupClone",this),Ze.eventCanceled||(pe=K(ae),pe.draggable=!1,pe.style["will-change"]="",this._hideClone(),M(pe,this.options.chosenClass,!1),Ze.clone=pe),n.cloneId=ct((function(){oe("clone",n),Ze.eventCanceled||(n.options.removeCloneOnHide||le.insertBefore(pe,ae),n._hideClone(),ie({sortable:n,name:"clone"}))})),!t&&M(ae,o.dragClass,!0),t?(Ee=!0,n._loopId=setInterval(n._emulateDragOver,50)):(k(document,"mouseup",n._onDrop),k(document,"touchend",n._onDrop),k(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,ae)),x(document,"drop",n),V(ae,"transform","translateZ(0)")),Te=!0,n._dragStartId=ct(n._dragStarted.bind(n,t,e)),x(document,"selectstart",n),Ne=!0,b&&V(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,i=this.el,s=e.target,c=this.options,l=c.group,u=Ze.active,d=be===l,p=c.sort,f=ye||u,h=this,m=!1;if(!Be){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=N(s,c.draggable,i,!0),E("dragOver"),Ze.eventCanceled)return m;if(ae.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||h._ignoreWhileAnimating===s)return P(!1);if(Ee=!1,u&&!c.disabled&&(d?p||(r=!le.contains(ae)):ye===this||(this.lastPutMode=be.checkPull(this,u,ae,e))&&l.checkPut(this,u,ae,e))){if(o="vertical"===this._getDirection(e,s),t=A(ae),E("dragOverValid"),Ze.eventCanceled)return m;if(r)return se=le,D(),this._hideClone(),E("revert"),Ze.eventCanceled||(ue?le.insertBefore(ae,ue):le.appendChild(ae)),P(!0);var v=B(i,c.draggable);if(!v||rt(e,o,this)&&!v.animated){if(v===ae)return P(!1);if(v&&i===e.target&&(s=v),s&&(n=A(s)),!1!==et(le,i,ae,t,s,n,e,!!s))return D(),i.appendChild(ae),se=i,L(),P(!0)}else if(s.parentNode===i){n=A(s);var g,b,y=0,w=ae.parentNode!==i,O=!Ue(ae.animated&&ae.toRect||t,s.animated&&s.toRect||n,o),x=o?"top":"left",k=I(s,"top","top")||I(ae,"top","top"),S=k?k.scrollTop:void 0;if(Ce!==s&&(g=n[x],Ae=!1,Ie=!O&&c.invertSwap||w),y=ot(e,s,n,o,O?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,Ie,Ce===s),0!==y){var j=R(ae);do{j-=y,b=se.children[j]}while(b&&("none"===V(b,"display")||b===ce))}if(0===y||b===s)return P(!1);Ce=s,_e=y;var C=s.nextElementSibling,_=!1;_=1===y;var T=et(le,i,ae,t,s,n,e,_);if(!1!==T)return 1!==T&&-1!==T||(_=1===T),Be=!0,setTimeout(nt,30),D(),_&&!C?i.appendChild(ae):s.parentNode.insertBefore(ae,_?C:s),k&&W(k,0,S-k.scrollTop),se=ae.parentNode,void 0===g||Ie||(Me=Math.abs(g-A(s)[x])),L(),P(!0)}if(i.contains(ae))return P(!1)}return!1}function E(c,l){oe(c,h,a({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:p,fromSortable:f,target:s,completed:P,onMove:function(n,r){return et(le,i,ae,t,n,A(n),e,r)},changed:L},l))}function D(){E("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function P(t){return E("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(h),h!==f&&(M(ae,ye?ye.options.ghostClass:u.options.ghostClass,!1),M(ae,c.ghostClass,!0)),ye!==h&&h!==Ze.active?ye=h:h===Ze.active&&ye&&(ye=null),f===h&&(h._ignoreWhileAnimating=s),h.animateAll((function(){E("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(s===ae&&!ae.animated||s===i&&!s.animated)&&(Ce=null),c.dragoverBubble||e.rootEl||s===document||(ae.parentNode[Y]._isOutsideThisEl(e.target),!t&&Ye(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function L(){me=R(ae),ge=R(ae,c.draggable),ie({sortable:h,name:"change",toEl:i,newIndex:me,newDraggableIndex:ge,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){k(document,"mousemove",this._onTouchMove),k(document,"touchmove",this._onTouchMove),k(document,"pointermove",this._onTouchMove),k(document,"dragover",Ye),k(document,"mousemove",Ye),k(document,"touchmove",Ye)},_offUpEvents:function(){var e=this.el.ownerDocument;k(e,"mouseup",this._onDrop),k(e,"touchend",this._onDrop),k(e,"pointerup",this._onDrop),k(e,"touchcancel",this._onDrop),k(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;me=R(ae),ge=R(ae,n.draggable),oe("drop",this,{evt:e}),se=ae&&ae.parentNode,me=R(ae),ge=R(ae,n.draggable),Ze.eventCanceled||(Te=!1,Ie=!1,Ae=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),lt(this.cloneId),lt(this._dragStartId),this.nativeDraggable&&(k(document,"drop",this),k(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),b&&V(document.body,"user-select",""),V(ae,"transform",""),e&&(Ne&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ce&&ce.parentNode&&ce.parentNode.removeChild(ce),(le===se||ye&&"clone"!==ye.lastPutMode)&&pe&&pe.parentNode&&pe.parentNode.removeChild(pe),ae&&(this.nativeDraggable&&k(ae,"dragend",this),tt(ae),ae.style["will-change"]="",Ne&&!Te&&M(ae,ye?ye.options.ghostClass:this.options.ghostClass,!1),M(ae,this.options.chosenClass,!1),ie({sortable:this,name:"unchoose",toEl:se,newIndex:null,newDraggableIndex:null,originalEvent:e}),le!==se?(me>=0&&(ie({rootEl:se,name:"add",toEl:se,fromEl:le,originalEvent:e}),ie({sortable:this,name:"remove",toEl:se,originalEvent:e}),ie({rootEl:se,name:"sort",toEl:se,fromEl:le,originalEvent:e}),ie({sortable:this,name:"sort",toEl:se,originalEvent:e})),ye&&ye.save()):me!==he&&me>=0&&(ie({sortable:this,name:"update",toEl:se,originalEvent:e}),ie({sortable:this,name:"sort",toEl:se,originalEvent:e})),Ze.active&&(null!=me&&-1!==me||(me=he,ge=ve),ie({sortable:this,name:"end",toEl:se,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){oe("nulling",this),le=ae=se=ce=ue=pe=de=fe=we=Oe=Ne=me=ge=he=ve=Ce=_e=ye=be=Ze.dragged=Ze.ghost=Ze.clone=Ze.active=null,Re.forEach((function(e){e.checked=!0})),Re.length=xe=ke=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ae&&(this._onDragOver(e),Qe(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)e=n[r],N(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||at(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var o=n.children[r];N(o,this.options.draggable,n,!1)&&(t[e]=o)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return N(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=ne.modifyOption(this,e,t);n[e]="undefined"!==typeof r?r:t,"group"===e&&Ke(n)},destroy:function(){oe("destroy",this);var e=this.el;e[Y]=null,k(e,"mousedown",this._onTapStart),k(e,"touchstart",this._onTapStart),k(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(k(e,"dragover",this),k(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),De.splice(De.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!fe){if(oe("hideClone",this),Ze.eventCanceled)return;V(pe,"display","none"),this.options.removeCloneOnHide&&pe.parentNode&&pe.parentNode.removeChild(pe),fe=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(fe){if(oe("showClone",this),Ze.eventCanceled)return;le.contains(ae)&&!this.options.group.revertClone?le.insertBefore(pe,ae):ue?le.insertBefore(pe,ue):le.appendChild(pe),this.options.group.revertClone&&this.animate(ae,pe),V(pe,"display",""),fe=!1}}else this._hideClone()}},Le&&x(document,"touchmove",(function(e){(Ze.active||Te)&&e.cancelable&&e.preventDefault()})),Ze.utils={on:x,off:k,css:V,find:E,is:function(e,t){return!!N(e,t,e,!1)},extend:q,throttle:H,closest:N,toggleClass:M,clone:K,index:R,nextTick:ct,cancelNextTick:lt,detectDirection:He,getChild:P},Ze.get=function(e){return e[Y]},Ze.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ze.utils=a({},Ze.utils,e.utils)),ne.mount(e)}))},Ze.create=function(e,t){return new Ze(e,t)},Ze.version=f;var ut,dt,pt,ft,ht,mt,vt=[],gt=!1;function bt(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):(k(document,"pointermove",this._handleFallbackAutoScroll),k(document,"touchmove",this._handleFallbackAutoScroll),k(document,"mousemove",this._handleFallbackAutoScroll)),wt(),yt(),U()},nulling:function(){ht=dt=ut=gt=mt=pt=ft=null,vt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(r,o);if(ht=e,t||v||m||b){xt(e,this.options,i,t);var a=$(i,!0);!gt||mt&&r===pt&&o===ft||(mt&&wt(),mt=setInterval((function(){var i=$(document.elementFromPoint(r,o),!0);i!==a&&(a=i,yt()),xt(e,n.options,i,t)}),10),pt=r,ft=o)}else{if(!this.options.bubbleScroll||$(i,!0)===D())return void yt();xt(e,this.options,$(i,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}function yt(){vt.forEach((function(e){clearInterval(e.pid)})),vt=[]}function wt(){clearInterval(mt)}var Ot,xt=H((function(e,t,n,r){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,c=t.scrollSpeed,l=D(),u=!1;dt!==n&&(dt=n,yt(),ut=t.scroll,o=t.scrollFn,!0===ut&&(ut=$(n,!0)));var d=0,p=ut;do{var f=p,h=A(f),m=h.top,v=h.bottom,g=h.left,b=h.right,y=h.width,w=h.height,O=void 0,x=void 0,k=f.scrollWidth,S=f.scrollHeight,j=V(f),N=f.scrollLeft,C=f.scrollTop;f===l?(O=y<k&&("auto"===j.overflowX||"scroll"===j.overflowX||"visible"===j.overflowX),x=w<S&&("auto"===j.overflowY||"scroll"===j.overflowY||"visible"===j.overflowY)):(O=y<k&&("auto"===j.overflowX||"scroll"===j.overflowX),x=w<S&&("auto"===j.overflowY||"scroll"===j.overflowY));var _=O&&(Math.abs(b-i)<=s&&N+y<k)-(Math.abs(g-i)<=s&&!!N),M=x&&(Math.abs(v-a)<=s&&C+w<S)-(Math.abs(m-a)<=s&&!!C);if(!vt[d])for(var T=0;T<=d;T++)vt[T]||(vt[T]={});vt[d].vx==_&&vt[d].vy==M&&vt[d].el===f||(vt[d].el=f,vt[d].vx=_,vt[d].vy=M,clearInterval(vt[d].pid),0==_&&0==M||(u=!0,vt[d].pid=setInterval(function(){r&&0===this.layer&&Ze.active._onTouchMove(ht);var t=vt[this.layer].vy?vt[this.layer].vy*c:0,n=vt[this.layer].vx?vt[this.layer].vx*c:0;"function"===typeof o&&"continue"!==o.call(Ze.dragged.parentNode[Y],n,t,e,ht,vt[this.layer].el)||W(vt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==l&&(p=$(p,!1)));gt=u}}),30),kt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||o;a();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function St(){}function jt(){}function Nt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;Ot=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,o=e.activeSortable,i=e.changed,a=e.cancel;if(o.options.swap){var s=this.sortable.el,c=this.options;if(n&&n!==s){var l=Ot;!1!==r(n)?(M(n,c.swapClass,!0),Ot=n):Ot=null,l&&l!==Ot&&M(l,c.swapClass,!1)}i(),t(!0),a()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,o=n||this.sortable,i=this.options;Ot&&M(Ot,i.swapClass,!1),Ot&&(i.swap||n&&n.options.swap)&&r!==Ot&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),Ct(r,Ot),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){Ot=null}},i(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Ot}}})}function Ct(e,t){var n,r,o=e.parentNode,i=t.parentNode;o&&i&&!o.isEqualNode(t)&&!i.isEqualNode(e)&&(n=R(e),r=R(t),o.isEqualNode(i)&&n<r&&r++,o.insertBefore(t,o.children[n]),i.insertBefore(e,i.children[r]))}St.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=P(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:kt},i(St,{pluginName:"revertOnSpill"}),jt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:kt},i(jt,{pluginName:"removeOnSpill"});var _t,Mt,Vt,Tt,Et,Dt=[],At=[],It=!1,Pt=!1,Bt=!1;function Rt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?x(document,"pointerup",this._deselectMultiDrag):(x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag)),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";Dt.length&&Mt===e?Dt.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;Vt=t},delayEnded:function(){this.isMultiDrag=~Dt.indexOf(Vt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<Dt.length;r++)At.push(K(Dt[r])),At[r].sortableIndex=Dt[r].sortableIndex,At[r].draggable=!1,At[r].style["will-change"]="",M(At[r],this.options.selectedClass,!1),Dt[r]===Vt&&M(At[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Dt.length&&Mt===t&&(zt(!0,n),r("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(zt(!1,n),At.forEach((function(e){V(e,"display","")})),t(),Et=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(At.forEach((function(e){V(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),Et=!0,r())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&Mt&&Mt.multiDrag._deselectMultiDrag(),Dt.forEach((function(e){e.sortableIndex=R(e)})),Dt=Dt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Bt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Dt.forEach((function(e){e!==Vt&&V(e,"position","absolute")}));var r=A(Vt,!1,!0,!0);Dt.forEach((function(e){e!==Vt&&J(e,r)})),Pt=!0,It=!0}n.animateAll((function(){Pt=!1,It=!1,t.options.animation&&Dt.forEach((function(e){G(e)})),t.options.sort&&$t()}))}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;Pt&&~Dt.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,o=e.dragRect;Dt.length>1&&(Dt.forEach((function(e){r.addAnimationState({target:e,rect:Pt?A(e):o}),G(e),e.fromRect=o,t.removeAnimationState(e)})),Pt=!1,Lt(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,o=e.activeSortable,i=e.parentEl,a=e.putSortable,s=this.options;if(r){if(n&&o._hideClone(),It=!1,s.animation&&Dt.length>1&&(Pt||!n&&!o.options.sort&&!a)){var c=A(Vt,!1,!0,!0);Dt.forEach((function(e){e!==Vt&&(J(e,c),i.appendChild(e))})),Pt=!0}if(!n)if(Pt||$t(),Dt.length>1){var l=Et;o._showClone(t),o.options.animation&&!Et&&l&&At.forEach((function(e){o.addAnimationState({target:e,rect:Tt}),e.fromRect=Tt,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(Dt.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){Tt=i({},t);var o=T(Vt,!0);Tt.top-=o.f,Tt.left-=o.e}},dragOverAnimationComplete:function(){Pt&&(Pt=!1,$t())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,o=e.sortable,i=e.dispatchSortableEvent,a=e.oldIndex,s=e.putSortable,c=s||this.sortable;if(t){var l=this.options,u=r.children;if(!Bt)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),M(Vt,l.selectedClass,!~Dt.indexOf(Vt)),~Dt.indexOf(Vt))Dt.splice(Dt.indexOf(Vt),1),_t=null,re({sortable:o,rootEl:n,name:"deselect",targetEl:Vt,originalEvt:t});else{if(Dt.push(Vt),re({sortable:o,rootEl:n,name:"select",targetEl:Vt,originalEvt:t}),t.shiftKey&&_t&&o.el.contains(_t)){var d,p,f=R(_t),h=R(Vt);if(~f&&~h&&f!==h)for(h>f?(p=f,d=h):(p=h,d=f+1);p<d;p++)~Dt.indexOf(u[p])||(M(u[p],l.selectedClass,!0),Dt.push(u[p]),re({sortable:o,rootEl:n,name:"select",targetEl:u[p],originalEvt:t}))}else _t=Vt;Mt=c}if(Bt&&this.isMultiDrag){if((r[Y].options.sort||r!==n)&&Dt.length>1){var m=A(Vt),v=R(Vt,":not(."+this.options.selectedClass+")");if(!It&&l.animation&&(Vt.thisAnimationDuration=null),c.captureAnimationState(),!It&&(l.animation&&(Vt.fromRect=m,Dt.forEach((function(e){if(e.thisAnimationDuration=null,e!==Vt){var t=Pt?A(e):m;e.fromRect=t,c.addAnimationState({target:e,rect:t})}}))),$t(),Dt.forEach((function(e){u[v]?r.insertBefore(e,u[v]):r.appendChild(e),v++})),a===R(Vt))){var g=!1;Dt.forEach((function(e){e.sortableIndex===R(e)||(g=!0)})),g&&i("update")}Dt.forEach((function(e){G(e)})),c.animateAll()}Mt=c}(n===r||s&&"clone"!==s.lastPutMode)&&At.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Bt=!1,At.length=0},destroyGlobal:function(){this._deselectMultiDrag(),k(document,"pointerup",this._deselectMultiDrag),k(document,"mouseup",this._deselectMultiDrag),k(document,"touchend",this._deselectMultiDrag),k(document,"keydown",this._checkKeyDown),k(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(("undefined"===typeof Bt||!Bt)&&Mt===this.sortable&&(!e||!N(e.target,this.options.draggable,this.sortable.el,!1))&&(!e||0===e.button))while(Dt.length){var t=Dt[0];M(t,this.options.selectedClass,!1),Dt.shift(),re({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Y];t&&t.options.multiDrag&&!~Dt.indexOf(e)&&(Mt&&Mt!==t&&(Mt.multiDrag._deselectMultiDrag(),Mt=t),M(e,t.options.selectedClass,!0),Dt.push(e))},deselect:function(e){var t=e.parentNode[Y],n=Dt.indexOf(e);t&&t.options.multiDrag&&~n&&(M(e,t.options.selectedClass,!1),Dt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return Dt.forEach((function(r){var o;t.push({multiDragElement:r,index:r.sortableIndex}),o=Pt&&r!==Vt?-1:Pt?R(r,":not(."+e.options.selectedClass+")"):R(r),n.push({multiDragElement:r,index:o})})),{items:l(Dt),clones:[].concat(At),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),"ctrl"===e?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Lt(e,t){Dt.forEach((function(n,r){var o=t.children[n.sortableIndex+(e?Number(r):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}function zt(e,t){At.forEach((function(n,r){var o=t.children[n.sortableIndex+(e?Number(r):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}function $t(){Dt.forEach((function(e){e!==Vt&&e.parentNode&&e.parentNode.removeChild(e)}))}Ze.mount(new bt),Ze.mount(jt,St),t["default"]=Ze},"466d":function(e,t,n){"use strict";var r=n("d784"),o=n("825a"),i=n("50c4"),a=n("1d80"),s=n("8aa5"),c=n("14c3");r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=o(e),l=String(this);if(!a.global)return c(a,l);var u=a.unicode;a.lastIndex=0;var d,p=[],f=0;while(null!==(d=c(a,l))){var h=String(d[0]);p[f]=h,""===h&&(a.lastIndex=s(l,i(a.lastIndex),u)),f++}return 0===f?null:p}]}))},"519e":function(e,t,n){},"60c0":function(e,t,n){"use strict";n("9639")},"64d1":function(e,t,n){"use strict";n("e966")},"6f91":function(e,t,n){"use strict";n("3394")},"711b":function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createVNode"])("span",{class:"icon"},[Object(r["createVNode"])("i",{class:"fas fa-chevron-down"})],-1),i={class:"dropdown-content",style:{"max-height":"50vh","overflow-y":"auto"}};function a(e,t,n,a,s,c){var l=Object(r["resolveDirective"])("click-outside");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["dropdown",{"is-active":s.advancedMenu||0==n.valid}],style:{width:"fit-content"}},[Object(r["createVNode"])("div",{id:"advanced_options_control",class:"dropdown-trigger",onClick:t[1]||(t[1]=function(e){return s.advancedMenu=!s.advancedMenu})},[Object(r["createVNode"])("button",{class:["button is-flex is-justify-content-space-between",{"is-danger":!1===n.valid}],type:"button","aria-haspopup":"true","aria-controls":"dropdown_"+s.id},[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(n.text),1),o],10,["aria-controls"])]),Object(r["createVNode"])("div",{id:"dropdown_"+s.id,class:"dropdown-menu",style:[{width:"300px"},n.alignment?"left: -"+n.alignment+"px;":"left: -60px;"]},[Object(r["createVNode"])("div",i,[Object(r["renderSlot"])(e.$slots,"default")])],12,["id"])],2)),[[l,c.onClickOutside]])}var s=n("8264"),c=n.n(s),l={name:"Dropdown",directives:{clickOutside:c.a.directive},props:["text","valid","alignment"],data:function(){return{advancedMenu:!1,id:this.$store.getters.getUid}},methods:{onClickOutside:function(){this.advancedMenu=!1}}};l.render=a;t["a"]=l},"75c6":function(e,t,n){"use strict";var r=n("7a23"),o={class:"level la is-mobile"},i={class:"level-left ca"},a={key:0,class:"loader",style:{width:"30px",height:"30px"}},s={key:1,class:"switch"},c=Object(r["createVNode"])("span",{class:"slider round"},null,-1);function l(e,t,n,l,u,d){var p=this;return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("div",i,[n.loading?(Object(r["openBlock"])(),Object(r["createBlock"])("span",a)):(Object(r["openBlock"])(),Object(r["createBlock"])("label",s,[Object(r["createVNode"])("input",{id:"switch_component_"+u.id,value:n.modelValue,class:{checked:n.modelValue,disabled:n.disabled},disabled:n.disabled,type:"checkbox",onChange:t[1]||(t[1]=function(e){p.$emit("update:modelValue",!p.modelValue)})},null,42,["id","value","disabled"]),c])),n.text&&!n.loading?(Object(r["openBlock"])(),Object(r["createBlock"])("label",{key:2,class:"ml-3 is-unselectable is-clickable",for:"switch_component_"+u.id},Object(r["toDisplayString"])(n.text),9,["for"])):Object(r["createCommentVNode"])("",!0)])])}var u={name:"Switch",props:["modelValue","text","disabled","loading"],data:function(){return{id:this.$store.getters.getUidSeq}}};n("6f91");u.render=l;t["a"]=u},"7a4b":function(e,t,n){"use strict";n("3097")},8264:function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,n="undefined"!=typeof navigator,r=t&&("ontouchstart"in window||n&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],o=function(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)},i=function(t,n){var i=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||r,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(n.value),a=i.handler,s=i.middleware,c=i.detectIframe,l=i.capture;if(i.isActive){if(t[e]=i.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,n=e.event,r=e.handler,i=e.middleware,a=n.path||n.composedPath&&n.composedPath();(a?a.indexOf(t)<0:!t.contains(n.target))&&o({event:n,handler:r,middleware:i})}({el:t,event:e,handler:a,middleware:s})},capture:l}})),c){var u={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,n=e.event,r=e.handler,i=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&o({event:n,handler:r,middleware:i})}),0)}({el:t,event:e,handler:a,middleware:s})},capture:l};t[e]=[].concat(t[e],[u])}t[e].forEach((function(n){var r=n.event,o=n.srcTarget,i=n.handler;return setTimeout((function(){t[e]&&o.addEventListener(r,i,l)}),0)}))}},a=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},s=t?{beforeMount:i,updated:function(e,t){var n=t.value,r=t.oldValue;JSON.stringify(n)!==JSON.stringify(r)&&(a(e),i(e,{value:n}))},unmounted:a}:{};return{install:function(e){e.directive("click-outside",s)},directive:s}}))},9639:function(e,t,n){},"97df":function(e,t,n){},"9c4a":function(e,t,n){"use strict";n("9eff").polyfill()},"9eff":function(e,t,n){"use strict";function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var c=i[a],l=Object.getOwnPropertyDescriptor(o,c);void 0!==l&&l.enumerable&&(n[c]=o[c])}}return n}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}e.exports={assign:r,polyfill:o}},a3ce:function(e,t,n){},a4e7:function(e,t,n){"use strict";n("97df")},b572:function(e,t,n){"use strict";var r=n("7a23"),o={key:0,class:"icon-text mb-2 flex row vca ca",role:"alert","aria-readonly":"true"},i=Object(r["createVNode"])("i",{class:"fas fa-exclamation-triangle"},null,-1),a={style:{"max-width":"70vw",overflow:"auto"}};function s(e,t,n,s,c,l){var u=Object(r["resolveDirective"])("autowidth");return n.valid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("span",{class:["icon is-medium mt-1",{"has-text-danger":c.invalid}]},[i],2),Object(r["createVNode"])("span",a,[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])("input",{key:n.valid,value:n.invalidString,class:["input is-static is-unselectable invalidator",{"has-text-danger":c.invalid}],type:"text",oninvalid:"setCustomValidity('Confirme a informação introduzida.')",pattern:n.valid?void 0:".a",title:n.invalidString,onkeydown:"return false;",draggable:"false",onInvalid:t[1]||(t[1]=function(t){e.$emit("invalid"),c.invalid=!0})},null,42,["value","pattern","title"])),[[u,{comfortZone:0}]])])]))}var c=n("f174"),l=n.n(c),u={name:"FormInvalidator",directives:{autowidth:{beforeMount:l.a.bind,mounted:l.a.inserted,updated:l.a.componentUpdated,unmounted:l.a.unbind}},data:function(){return{invalid:void 0===this.startInvalid}},props:["invalidString","valid","startInvalid"],emits:["invalid"]};u.render=s;t["a"]=u},b76a:function(e,t,n){(function(t,r){e.exports=r(n("7a23"),n("4603"))})("undefined"!==typeof self&&self,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"00ee":function(e,t,n){var r=n("b622"),o=r("toStringTag"),i={};i[o]="z",e.exports="[object z]"===String(i)},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},"057f":function(e,t,n){var r=n("fc6a"),o=n("241c").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},"06cf":function(e,t,n){var r=n("83ab"),o=n("d1e7"),i=n("5c6c"),a=n("fc6a"),s=n("c04e"),c=n("5135"),l=n("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},"0cb2":function(e,t,n){var r=n("7b0b"),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,l,u){var d=n+e.length,p=c.length,f=s;return void 0!==l&&(l=r(l),f=a),i.call(u,f,(function(r,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=l[i.slice(1,-1)];break;default:var s=+i;if(0===s)return r;if(s>p){var u=o(s/10);return 0===u?r:u<=p?void 0===c[u-1]?i.charAt(1):c[u-1]+i.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},"0cfb":function(e,t,n){var r=n("83ab"),o=n("d039"),i=n("cc12");e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"14c3":function(e,t,n){var r=n("c6b6"),o=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"159b":function(e,t,n){var r=n("da84"),o=n("fdbc"),i=n("17c2"),a=n("9112");for(var s in o){var c=r[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{a(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,o=n("a640"),i=o("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),o=r("iterator"),i=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){i=!0}};s[o]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,n){var r=n("d039"),o=n("b622"),i=n("2d00"),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"23cb":function(e,t,n){var r=n("a691"),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},"23e7":function(e,t,n){var r=n("da84"),o=n("06cf").f,i=n("9112"),a=n("6eeb"),s=n("ce4e"),c=n("e893"),l=n("94ca");e.exports=function(e,t){var n,u,d,p,f,h,m=e.target,v=e.global,g=e.stat;if(u=v?r:g?r[m]||s(m,{}):(r[m]||{}).prototype,u)for(d in t){if(f=t[d],e.noTargetGet?(h=o(u,d),p=h&&h.value):p=u[d],n=l(v?d:m+(g?".":"#")+d,e.forced),!n&&void 0!==p){if(typeof f===typeof p)continue;c(f,p)}(e.sham||p&&p.sham)&&i(f,"sham",!0),a(u,d,f,e)}}},"241c":function(e,t,n){var r=n("ca84"),o=n("7839"),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2ca0":function(e,t,n){"use strict";var r=n("23e7"),o=n("06cf").f,i=n("50c4"),a=n("5a34"),s=n("1d80"),c=n("ab13"),l=n("c430"),u="".startsWith,d=Math.min,p=c("startsWith"),f=!l&&!p&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=String(s(this));a(e);var n=i(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return u?u.call(t,r,n):t.slice(n,n+r.length)===r}})},"2d00":function(e,t,n){var r,o,i=n("da84"),a=n("342f"),s=i.process,c=s&&s.versions,l=c&&c.v8;l?(r=l.split("."),o=r[0]<4?1:r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=r[1]))),e.exports=o&&+o},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),o=n("3f8c"),i=n("b622"),a=i("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),o=n("9bf2"),i=n("825a"),a=n("df75");e.exports=r?Object.defineProperties:function(e,t){i(e);var n,r=a(t),s=r.length,c=0;while(s>c)o.f(e,n=r[c++],t[n]);return e}},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,o=n("69f3"),i=n("7dd0"),a="String Iterator",s=o.set,c=o.getterFor(a);i(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},"428f":function(e,t,n){var r=n("da84");e.exports=r},"44ad":function(e,t,n){var r=n("d039"),o=n("c6b6"),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),o=n("7c73"),i=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},"44e7":function(e,t,n){var r=n("861d"),o=n("c6b6"),i=n("b622"),a=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},4930:function(e,t,n){var r=n("2d00"),o=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4d64":function(e,t,n){var r=n("fc6a"),o=n("50c4"),i=n("23cb"),a=function(e){return function(t,n,a){var s,c=r(t),l=o(c.length),u=i(a,l);if(e&&n!=n){while(l>u)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").filter,i=n("1dde"),a=i("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),o=n("7b0b"),i=n("9bdd"),a=n("e95a"),s=n("50c4"),c=n("8418"),l=n("35a1");e.exports=function(e){var t,n,u,d,p,f,h=o(e),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,b=void 0!==g,y=l(h),w=0;if(b&&(g=r(g,v>2?arguments[2]:void 0,2)),void 0==y||m==Array&&a(y))for(t=s(h.length),n=new m(t);t>w;w++)f=b?g(h[w],w):h[w],c(n,w,f);else for(d=y.call(h),p=d.next,n=new m;!(u=p.call(d)).done;w++)f=b?i(d,g,[u.value,w],!0):u.value,c(n,w,f);return n.length=w,n}},"4fad":function(e,t,n){var r=n("23e7"),o=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},"50c4":function(e,t,n){var r=n("a691"),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},5135:function(e,t,n){var r=n("7b0b"),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(r(e),t)}},5319:function(e,t,n){"use strict";var r=n("d784"),o=n("825a"),i=n("50c4"),a=n("a691"),s=n("1d80"),c=n("8aa5"),l=n("0cb2"),u=n("14c3"),d=Math.max,p=Math.min,f=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,v=h?"$":"$0";return[function(n,r){var o=s(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!h&&m||"string"===typeof r&&-1===r.indexOf(v)){var s=n(t,e,this,r);if(s.done)return s.value}var g=o(e),b=String(this),y="function"===typeof r;y||(r=String(r));var w=g.global;if(w){var O=g.unicode;g.lastIndex=0}var x=[];while(1){var k=u(g,b);if(null===k)break;if(x.push(k),!w)break;var S=String(k[0]);""===S&&(g.lastIndex=c(b,i(g.lastIndex),O))}for(var j="",N=0,C=0;C<x.length;C++){k=x[C];for(var _=String(k[0]),M=d(p(a(k.index),b.length),0),V=[],T=1;T<k.length;T++)V.push(f(k[T]));var E=k.groups;if(y){var D=[_].concat(V,M,b);void 0!==E&&D.push(E);var A=String(r.apply(void 0,D))}else A=l(_,b,M,V,E,r);M>=N&&(j+=b.slice(N,M)+A,N=M+_.length)}return j+b.slice(N)}]}))},5692:function(e,t,n){var r=n("c430"),o=n("c6cd");(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.14.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),o=n("241c"),i=n("7418"),a=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5db7":function(e,t,n){"use strict";var r=n("23e7"),o=n("a2bf"),i=n("7b0b"),a=n("50c4"),s=n("1c0b"),c=n("65f0");r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=a(n.length);return s(e),t=c(n,0),t.length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},6547:function(e,t,n){var r=n("a691"),o=n("1d80"),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"65f0":function(e,t,n){var r=n("861d"),o=n("e8b5"),i=n("b622"),a=i("species");e.exports=function(e,t){var n;return o(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"69f3":function(e,t,n){var r,o,i,a=n("7f9a"),s=n("da84"),c=n("861d"),l=n("9112"),u=n("5135"),d=n("c6cd"),p=n("f772"),f=n("d012"),h="Object already initialized",m=s.WeakMap,v=function(e){return i(e)?o(e):r(e,{})},g=function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(a||d.state){var b=d.state||(d.state=new m),y=b.get,w=b.has,O=b.set;r=function(e,t){if(w.call(b,e))throw new TypeError(h);return t.facade=e,O.call(b,e,t),t},o=function(e){return y.call(b,e)||{}},i=function(e){return w.call(b,e)}}else{var x=p("state");f[x]=!0,r=function(e,t){if(u(e,x))throw new TypeError(h);return t.facade=e,l(e,x,t),t},o=function(e){return u(e,x)?e[x]:{}},i=function(e){return u(e,x)}}e.exports={set:r,get:o,has:i,enforce:v,getterFor:g}},"6eeb":function(e,t,n){var r=n("da84"),o=n("9112"),i=n("5135"),a=n("ce4e"),s=n("8925"),c=n("69f3"),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),c=u(n),c.source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(l?!f&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},"6f53":function(e,t,n){var r=n("83ab"),o=n("df75"),i=n("fc6a"),a=n("d1e7").f,s=function(e){return function(t){var n,s=i(t),c=o(s),l=c.length,u=0,d=[];while(l>u)n=c[u++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},"73d9":function(e,t,n){var r=n("44d2");r("flatMap")},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),o=n("5135"),i=n("e538"),a=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,o=n("825a"),i=n("37e8"),a=n("7839"),s=n("d012"),c=n("1be4"),l=n("cc12"),u=n("f772"),d=">",p="<",f="prototype",h="script",m=u("IE_PROTO"),v=function(){},g=function(e){return p+h+d+e+p+"/"+h+d},b=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}w=r?b(r):y();var e=a.length;while(e--)delete w[f][a[e]];return w()};s[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[f]=o(e),n=new v,v[f]=null,n[m]=e):n=w(),void 0===t?n:i(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),o=n("9ed3"),i=n("e163"),a=n("d2bb"),s=n("d44e"),c=n("9112"),l=n("6eeb"),u=n("b622"),d=n("c430"),p=n("3f8c"),f=n("ae93"),h=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,v=u("iterator"),g="keys",b="values",y="entries",w=function(){return this};e.exports=function(e,t,n,u,f,O,x){o(n,t,u);var k,S,j,N=function(e){if(e===f&&T)return T;if(!m&&e in M)return M[e];switch(e){case g:return function(){return new n(this,e)};case b:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",_=!1,M=e.prototype,V=M[v]||M["@@iterator"]||f&&M[f],T=!m&&V||N(f),E="Array"==t&&M.entries||V;if(E&&(k=i(E.call(new e)),h!==Object.prototype&&k.next&&(d||i(k)===h||(a?a(k,h):"function"!=typeof k[v]&&c(k,v,w)),s(k,C,!0,!0),d&&(p[C]=w))),f==b&&V&&V.name!==b&&(_=!0,T=function(){return V.call(this)}),d&&!x||M[v]===T||c(M,v,T),p[t]=T,f)if(S={values:N(b),keys:O?T:N(g),entries:N(y)},x)for(j in S)(m||_||!(j in M))&&l(M,j,S[j]);else r({target:t,proto:!0,forced:m||_},S);return S}},"7f9a":function(e,t,n){var r=n("da84"),o=n("8925"),i=r.WeakMap;e.exports="function"===typeof i&&/native code/.test(o(i))},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("c04e"),o=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8875:function(e,t,n){var r,o,i;(function(n,a){o=[],r=a,i="function"===typeof r?r.apply(t,o):r,void 0===i||(e.exports=i)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var n,r,o,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=i.exec(f.stack)||a.exec(f.stack),c=s&&s[1]||!1,l=s&&s[2]||!1,u=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");c===u&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(r,"$1").trim());for(var p=0;p<d.length;p++){if("interactive"===d[p].readyState)return d[p];if(d[p].src===c)return d[p];if(c===u&&d[p].innerHTML&&d[p].innerHTML.trim()===o)return d[p]}return null}}return e}))},8925:function(e,t,n){var r=n("c6cd"),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8bbf":function(t,n){t.exports=e},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),o=n("9bf2"),i=n("5c6c");e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9263:function(e,t,n){"use strict";var r=n("ad6d"),o=n("9f7f"),i=n("5692"),a=RegExp.prototype.exec,s=i("native-string-replace",String.prototype.replace),c=a,l=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=o.UNSUPPORTED_Y||o.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],p=l||d||u;p&&(c=function(e){var t,n,o,i,c=this,p=u&&c.sticky,f=r.call(c),h=c.source,m=0,v=e;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(e).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==e[c.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,m++),n=new RegExp("^(?:"+h+")",f)),d&&(n=new RegExp("^"+h+"$(?!\\s)",f)),l&&(t=c.lastIndex),o=a.call(p?n:c,v),p?o?(o.input=o.input.slice(m),o[0]=o[0].slice(m),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:l&&o&&(c.lastIndex=c.global?o.index+o[0].length:t),d&&o&&o.length>1&&s.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o}),e.exports=c},"94ca":function(e,t,n){var r=n("d039"),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),a=n("861d"),s=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),h=p("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",g=f>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),b=d("concat"),y=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)},w=!g||!b;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,o,i,a=s(this),d=u(a,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],y(i)){if(o=c(i.length),p+o>m)throw TypeError(v);for(n=0;n<o;n++,p++)n in i&&l(d,p,i[n])}else{if(p>=m)throw TypeError(v);l(d,p++,i)}return d.length=p,d}})},"9bdd":function(e,t,n){var r=n("825a"),o=n("2a62");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){throw o(e),a}}},"9bf2":function(e,t,n){var r=n("83ab"),o=n("0cfb"),i=n("825a"),a=n("c04e"),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,o=n("7c73"),i=n("5c6c"),a=n("d44e"),s=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,l,!1,!0),s[l]=c,e}},"9f7f":function(e,t,n){"use strict";var r=n("d039");function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a2bf:function(e,t,n){"use strict";var r=n("e8b5"),o=n("50c4"),i=n("0366"),a=function(e,t,n,s,c,l,u,d){var p,f=c,h=0,m=!!u&&i(u,d,3);while(h<s){if(h in n){if(p=m?m(n[h],h,t):n[h],l>0&&r(p))f=a(e,t,p,o(p.length),f,l-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}h++}return f};e.exports=a},a352:function(e,n){e.exports=t},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),s=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=u("splice"),p=Math.max,f=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,u,d,v,g,b=s(this),y=a(b.length),w=o(e,y),O=arguments.length;if(0===O?n=r=0:1===O?(n=0,r=y-w):(n=O-2,r=f(p(i(t),0),y-w)),y+n-r>h)throw TypeError(m);for(u=c(b,r),d=0;d<r;d++)v=w+d,v in b&&l(u,d,b[v]);if(u.length=r,n<r){for(d=w;d<y-r;d++)v=d+r,g=d+n,v in b?b[g]=b[v]:delete b[g];for(d=y;d>y-r+n;d--)delete b[d-1]}else if(n>r)for(d=y-r;d>w;d--)v=d+r-1,g=d+n-1,v in b?b[g]=b[v]:delete b[g];for(d=0;d<n;d++)b[d+w]=arguments[d+2];return b.length=y-r+n,u}})},a4d3:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),i=n("d066"),a=n("c430"),s=n("83ab"),c=n("4930"),l=n("fdbf"),u=n("d039"),d=n("5135"),p=n("e8b5"),f=n("861d"),h=n("825a"),m=n("7b0b"),v=n("fc6a"),g=n("c04e"),b=n("5c6c"),y=n("7c73"),w=n("df75"),O=n("241c"),x=n("057f"),k=n("7418"),S=n("06cf"),j=n("9bf2"),N=n("d1e7"),C=n("9112"),_=n("6eeb"),M=n("5692"),V=n("f772"),T=n("d012"),E=n("90e3"),D=n("b622"),A=n("e538"),I=n("746f"),P=n("d44e"),B=n("69f3"),R=n("b727").forEach,L=V("hidden"),z="Symbol",$="prototype",q=D("toPrimitive"),F=B.set,H=B.getterFor(z),U=Object[$],W=o.Symbol,K=i("JSON","stringify"),J=S.f,G=j.f,Y=x.f,X=N.f,Z=M("symbols"),Q=M("op-symbols"),ee=M("string-to-symbol-registry"),te=M("symbol-to-string-registry"),ne=M("wks"),re=o.QObject,oe=!re||!re[$]||!re[$].findChild,ie=s&&u((function(){return 7!=y(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=J(U,t);r&&delete U[t],G(e,t,n),r&&e!==U&&G(U,t,r)}:G,ae=function(e,t){var n=Z[e]=y(W[$]);return F(n,{type:z,tag:e,description:t}),s||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ce=function(e,t,n){e===U&&ce(Q,t,n),h(e);var r=g(t,!0);return h(n),d(Z,r)?(n.enumerable?(d(e,L)&&e[L][r]&&(e[L][r]=!1),n=y(n,{enumerable:b(0,!1)})):(d(e,L)||G(e,L,b(1,{})),e[L][r]=!0),ie(e,r,n)):G(e,r,n)},le=function(e,t){h(e);var n=v(t),r=w(n).concat(he(n));return R(r,(function(t){s&&!de.call(n,t)||ce(e,t,n[t])})),e},ue=function(e,t){return void 0===t?y(e):le(y(e),t)},de=function(e){var t=g(e,!0),n=X.call(this,t);return!(this===U&&d(Z,t)&&!d(Q,t))&&(!(n||!d(this,t)||!d(Z,t)||d(this,L)&&this[L][t])||n)},pe=function(e,t){var n=v(e),r=g(t,!0);if(n!==U||!d(Z,r)||d(Q,r)){var o=J(n,r);return!o||!d(Z,r)||d(n,L)&&n[L][r]||(o.enumerable=!0),o}},fe=function(e){var t=Y(v(e)),n=[];return R(t,(function(e){d(Z,e)||d(T,e)||n.push(e)})),n},he=function(e){var t=e===U,n=Y(t?Q:v(e)),r=[];return R(n,(function(e){!d(Z,e)||t&&!d(U,e)||r.push(Z[e])})),r};if(c||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=E(e),n=function(e){this===U&&n.call(Q,e),d(this,L)&&d(this[L],t)&&(this[L][t]=!1),ie(this,t,b(1,e))};return s&&oe&&ie(U,t,{configurable:!0,set:n}),ae(t,e)},_(W[$],"toString",(function(){return H(this).tag})),_(W,"withoutSetter",(function(e){return ae(E(e),e)})),N.f=de,j.f=ce,S.f=pe,O.f=x.f=fe,k.f=he,A.f=function(e){return ae(D(e),e)},s&&(G(W[$],"description",{configurable:!0,get:function(){return H(this).description}}),a||_(U,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),R(w(ne),(function(e){I(e)})),r({target:z,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var n=W(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:ue,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:pe}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:fe,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:u((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(m(e))}}),K){var me=!c||u((function(){var e=W();return"[null]"!=K([e])||"{}"!=K({a:e})||"{}"!=K(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,o=[e],i=1;while(arguments.length>i)o.push(arguments[i++]);if(r=t,(f(t)||void 0!==e)&&!se(e))return p(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),o[1]=t,K.apply(null,o)}})}W[$][q]||C(W[$],q,W[$].valueOf),P(W,z),T[L]=!0},a630:function(e,t,n){var r=n("23e7"),o=n("4df4"),i=n("1c7e"),a=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:o})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},ab13:function(e,t,n){var r=n("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),o=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae93:function(e,t,n){"use strict";var r,o,i,a=n("d039"),s=n("e163"),c=n("9112"),l=n("5135"),u=n("b622"),d=n("c430"),p=u("iterator"),f=!1,h=function(){return this};[].keys&&(i=[].keys(),"next"in i?(o=s(s(i)),o!==Object.prototype&&(r=o)):f=!0);var m=void 0==r||a((function(){var e={};return r[p].call(e)!==e}));m&&(r={}),d&&!m||l(r,p)||c(r,p,h),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},b041:function(e,t,n){"use strict";var r=n("00ee"),o=n("f5df");e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),o=n("9bf2").f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in i)&&o(i,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},b622:function(e,t,n){var r=n("da84"),o=n("5692"),i=n("5135"),a=n("90e3"),s=n("4930"),c=n("fdbf"),l=o("wks"),u=r.Symbol,d=c?u:u&&u.withoutSetter||a;e.exports=function(e){return i(l,e)&&(s||"string"==typeof l[e])||(s&&i(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},b64b:function(e,t,n){var r=n("23e7"),o=n("7b0b"),i=n("df75"),a=n("d039"),s=a((function(){i(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return i(o(e))}})},b727:function(e,t,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),a=n("50c4"),s=n("65f0"),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,m,v,g){for(var b,y,w=i(h),O=o(w),x=r(m,v,3),k=a(O.length),S=0,j=g||s,N=t?j(h,k):n||p?j(h,0):void 0;k>S;S++)if((f||S in O)&&(b=O[S],y=x(b,S,w),e))if(t)N[S]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:c.call(N,b)}else switch(e){case 4:return!1;case 7:c.call(N,b)}return d?-1:l||u?u:N}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},c04e:function(e,t,n){var r=n("861d");e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),o=n("ce4e"),i="__core-js_shared__",a=r[i]||o(i,{});e.exports=a},c740:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca84:function(e,t,n){var r=n("5135"),o=n("fc6a"),i=n("4d64").indexOf,a=n("d012");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)!r(a,n)&&r(s,n)&&l.push(n);while(t.length>c)r(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},caad:function(e,t,n){"use strict";var r=n("23e7"),o=n("4d64").includes,i=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},cc12:function(e,t,n){var r=n("da84"),o=n("861d"),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},ce4e:function(e,t,n){var r=n("da84"),o=n("9112");e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("428f"),o=n("da84"),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),o=n("6eeb"),i=n("b041");r||o(Object.prototype,"toString",i,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,o=n("5135"),i=n("b622"),a=i("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),o=n("9263"),i=n("d039"),a=n("b622"),s=n("9112"),c=a("species"),l=RegExp.prototype,u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),p=a("replace"),f=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,p){var m=a(e),v=!i((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),g=v&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!v||!g||"replace"===e&&(!u||!d||f)||"split"===e&&!h){var b=/./[m],y=n(m,""[e],(function(e,t,n,r,i){var a=t.exec;return a===o||a===l.exec?v&&!i?{done:!0,value:b.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),w=y[0],O=y[1];r(String.prototype,e,w),r(l,m,2==t?function(e,t){return O.call(e,this,t)}:function(e){return O.call(e,this)})}p&&s(l[m],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,i=n("1dde"),a=i("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),o=n("83ab"),i=n("56ef"),a=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,n,r=a(e),o=s.f,l=i(r),u={},d=0;while(l.length>d)n=o(r,t=l[d++]),void 0!==n&&c(u,t,n);return u}})},dbf1:function(e,t,n){"use strict";(function(e){function r(){return"undefined"!==typeof window?window.console:e.console}n.d(t,"a",(function(){return o}));var o=r()}).call(this,n("c8ba"))},ddb0:function(e,t,n){var r=n("da84"),o=n("fdbc"),i=n("e260"),a=n("9112"),s=n("b622"),c=s("iterator"),l=s("toStringTag"),u=i.values;for(var d in o){var p=r[d],f=p&&p.prototype;if(f){if(f[c]!==u)try{a(f,c,u)}catch(m){f[c]=u}if(f[l]||a(f,l,d),o[d])for(var h in i)if(f[h]!==i[h])try{a(f,h,i[h])}catch(m){f[h]=i[h]}}}},df75:function(e,t,n){var r=n("ca84"),o=n("7839");e.exports=Object.keys||function(e){return r(e,o)}},e01a:function(e,t,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("da84"),a=n("5135"),s=n("861d"),c=n("9bf2").f,l=n("e893"),u=i.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(p,u);var f=p.prototype=u.prototype;f.constructor=p;var h=f.toString,m="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=m?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},e163:function(e,t,n){var r=n("5135"),o=n("7b0b"),i=n("f772"),a=n("e177"),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),o=n("44d2"),i=n("3f8c"),a=n("69f3"),s=n("7dd0"),c="Array Iterator",l=a.set,u=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},e439:function(e,t,n){var r=n("23e7"),o=n("d039"),i=n("fc6a"),a=n("06cf").f,s=n("83ab"),c=o((function(){a(1)})),l=!s||c;r({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e893:function(e,t,n){var r=n("5135"),o=n("56ef"),i=n("06cf"),a=n("9bf2");e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,l=0;l<n.length;l++){var u=n[l];r(e,u)||s(e,u,c(t,u))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e95a:function(e,t,n){var r=n("b622"),o=n("3f8c"),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},f5df:function(e,t,n){var r=n("00ee"),o=n("c6b6"),i=n("b622"),a=i("toStringTag"),s="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),a))?n:s?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},f772:function(e,t,n){var r=n("5692"),o=n("90e3"),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var r=window.document.currentScript,o=n("8875");r=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){if(Array.isArray(e))return e}n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0");function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(i.push(r.value),t&&i.length===t)break}catch(c){s=!0,o=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}return i}}n("fb6a"),n("b0c0"),n("a630");function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return l(e)||u(e,t)||p(e,t)||f()}function m(e){if(Array.isArray(e))return d(e)}function v(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return m(e)||v(e)||p(e)||g()}n("99af"),n("d81d"),n("a434");var y=n("a352"),w=n.n(y);function O(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function x(e,t,n){var r=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,r)}var k=n("dbf1");n("4fad"),n("ac1f"),n("5319");function S(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var j=/-(\w)/g,N=S((function(e){return e.replace(j,(function(e,t){return t.toUpperCase()}))})),C=(n("5db7"),n("73d9"),["Start","Add","Remove","Update","End"]),_=["Choose","Unchoose","Sort","Filter","Clone"],M=["Move"],V=[M,C,_].flatMap((function(e){return e})).map((function(e){return"on".concat(e)})),T={manage:M,manageAndEmit:C,emit:_};function E(e){return-1!==V.indexOf(e)}n("caad"),n("2ca0");var D=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function A(e){return D.includes(e)}function I(e){return["transition-group","TransitionGroup"].includes(e)}function P(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")}function B(e){return e.reduce((function(e,t){var n=h(t,2),r=n[0],o=n[1];return e[r]=o,e}),{})}function R(e){var t=e.$attrs,n=e.componentData,r=void 0===n?{}:n,o=B(Object.entries(t).filter((function(e){var t=h(e,2),n=t[0];t[1];return P(n)})));return c(c({},o),r)}function L(e){var t=e.$attrs,n=e.callBackBuilder,r=B(z(t));Object.entries(n).forEach((function(e){var t=h(e,2),n=t[0],o=t[1];T[n].forEach((function(e){r["on".concat(e)]=o(e)}))}));var o="[data-draggable]".concat(r.draggable||"");return c(c({},r),{},{draggable:o})}function z(e){return Object.entries(e).filter((function(e){var t=h(e,2),n=t[0];t[1];return!P(n)})).map((function(e){var t=h(e,2),n=t[0],r=t[1];return[N(n),r]})).filter((function(e){var t=h(e,2),n=t[0];t[1];return!E(n)}))}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}n("c740");var H=function(e){var t=e.el;return t},U=function(e,t){return e.__draggable_context=t},W=function(e){return e.__draggable_context},K=function(){function e(t){var n=t.nodes,r=n.header,o=n.default,i=n.footer,a=t.root,s=t.realList;$(this,e),this.defaultNodes=o,this.children=[].concat(b(r),b(o),b(i)),this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=s}return F(e,[{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}},{key:"render",value:function(e,t){var n=this.tag,r=this.children,o=this._isRootComponent,i=o?{default:function(){return r}}:r;return e(n,t,i)}},{key:"updated",value:function(){var e=this.defaultNodes,t=this.realList;e.forEach((function(e,n){U(H(e),{element:t[n],index:n})}))}},{key:"getUnderlyingVm",value:function(e){return W(e)}},{key:"getVmIndexFromDomIndex",value:function(e,t){var n=this.defaultNodes,r=n.length,o=t.children,i=o.item(e);if(null===i)return r;var a=W(i);if(a)return a.index;if(0===r)return 0;var s=H(n[0]),c=b(o).findIndex((function(e){return e===s}));return e<c?0:r}}]),e}(),J=n("8bbf");function G(e,t){var n=e[t];return n?n():[]}function Y(e){var t=e.$slots,n=e.realList,r=e.getKey,o=n||[],i=["header","footer"].map((function(e){return G(t,e)})),a=h(i,2),s=a[0],l=a[1],u=t.item;if(!u)throw new Error("draggable element must have an item slot");var d=o.flatMap((function(e,t){return u({element:e,index:t}).map((function(t){return t.key=r(e),t.props=c(c({},t.props||{}),{},{"data-draggable":!0}),t}))}));if(d.length!==o.length)throw new Error("Item slot must have only one child");return{header:s,footer:l,default:d}}function X(e){var t=I(e),n=!A(e)&&!t;return{transition:t,externalComponent:n,tag:n?Object(J["resolveComponent"])(e):t?J["TransitionGroup"]:e}}function Z(e){var t=e.$slots,n=e.tag,r=e.realList,o=e.getKey,i=Y({$slots:t,realList:r,getKey:o}),a=X(n);return new K({nodes:i,root:a,realList:r})}function Q(e,t){var n=this;Object(J["nextTick"])((function(){return n.$emit(e.toLowerCase(),t)}))}function ee(e){var t=this;return function(n,r){if(null!==t.realList)return t["onDrag".concat(e)](n,r)}}function te(e){var t=this,n=ee.call(this,e);return function(r,o){n.call(t,r,o),Q.call(t,e,r)}}var ne=null,re={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(e){return e}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},oe=["update:modelValue","change"].concat(b([].concat(b(T.manageAndEmit),b(T.emit)).map((function(e){return e.toLowerCase()})))),ie=Object(J["defineComponent"])({name:"draggable",inheritAttrs:!1,props:re,emits:oe,data:function(){return{error:!1}},render:function(){try{this.error=!1;var e=this.$slots,t=this.$attrs,n=this.tag,r=this.componentData,o=this.realList,i=this.getKey,a=Z({$slots:e,tag:n,realList:o,getKey:i});this.componentStructure=a;var s=R({$attrs:t,componentData:r});return a.render(J["h"],s)}catch(c){return this.error=!0,Object(J["h"])("pre",{style:{color:"red"}},c.stack)}},created:function(){null!==this.list&&null!==this.modelValue&&k["a"].error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var e=this;if(!this.error){var t=this.$attrs,n=this.$el,r=this.componentStructure;r.updated();var o=L({$attrs:t,callBackBuilder:{manageAndEmit:function(t){return te.call(e,t)},emit:function(t){return Q.bind(e,t)},manage:function(t){return ee.call(e,t)}}}),i=1===n.nodeType?n:n.parentElement;this._sortable=new w.a(i,o),this.targetDomElement=i,i.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{realList:function(){var e=this.list;return e||this.modelValue},getKey:function(){var e=this.itemKey;return"function"===typeof e?e:function(t){return t[e]}}},watch:{$attrs:{handler:function(e){var t=this._sortable;t&&z(e).forEach((function(e){var n=h(e,2),r=n[0],o=n[1];t.option(r,o)}))},deep:!0}},methods:{getUnderlyingVm:function(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent:function(e){return e.__draggable_component__},emitChanges:function(e){var t=this;Object(J["nextTick"])((function(){return t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=b(this.modelValue);e(t),this.$emit("update:modelValue",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,b(e))};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var o=r.realList,i={list:o,component:r};if(t!==n&&o){var a=r.getUnderlyingVm(n)||{};return c(c({},a),i)}return i},getVmIndexFromDomIndex:function(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),ne=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){O(e.item);var n=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(n,0,t);var r={element:t,newIndex:n};this.emitChanges({added:r})}},onDragRemove:function(e){if(x(this.$el,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context,n=t.index,r=t.element;this.spliceList(n,1);var o={element:r,oldIndex:n};this.emitChanges({removed:o})}else O(e.clone)},onDragUpdate:function(e){O(e.item),x(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,n);var r={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:r})},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=b(t.to.children).filter((function(e){return"none"!==e.style["display"]})),r=n.indexOf(t.related),o=e.component.getVmIndexFromDomIndex(r),i=-1!==n.indexOf(ne);return i||!t.willInsertAfter?o:o+1},onDragMove:function(e,t){var n=this.move,r=this.realList;if(!n||!r)return!0;var o=this.getRelatedContextFromMoveEvent(e),i=this.computeFutureIndex(o,e),a=c(c({},this.context),{},{futureIndex:i}),s=c(c({},e),{},{relatedContext:o,draggedContext:a});return n(s,t)},onDragEnd:function(){ne=null}}}),ae=ie;t["default"]=ae},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("861d"),i=n("e8b5"),a=n("23cb"),s=n("50c4"),c=n("fc6a"),l=n("8418"),u=n("b622"),d=n("1dde"),p=d("slice"),f=u("species"),h=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(e,t){var n,r,u,d=c(this),p=s(d.length),v=a(e,p),g=a(void 0===t?p:t,p);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?o(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,v,g);for(r=new(void 0===n?Array:n)(m(g-v,0)),u=0;v<g;v++,u++)v in d&&l(r,u,d[v]);return r.length=u,r}})},fc6a:function(e,t,n){var r=n("44ad"),o=n("1d80");e.exports=function(e){return r(o(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})["default"]}))},cc56:function(e,t,n){"use strict";n("519e")},dd5c:function(e,t,n){"use strict";n("a3ce")},e966:function(e,t,n){},f174:function(e,t,n){"use strict";function r(e,t){var n=document.querySelector(".vue-input-autowidth-mirror-".concat(e.dataset.uuid)),r={maxWidth:"none",minWidth:"none",comfortZone:0},o=Object.assign({},r,t.value);e.style.maxWidth=o.maxWidth,e.style.minWidth=o.minWidth;var i=e.value;i||(i=e.placeholder||"");while(n.childNodes.length)n.removeChild(n.childNodes[0]);n.appendChild(document.createTextNode(i));var a=n.scrollWidth+o.comfortZone+2;a!=e.scrollWidth&&(e.style.width="".concat(a,"px"))}n("9c4a");var o={bind:function(e){if("INPUT"!==e.tagName.toLocaleUpperCase())throw new Error("v-input-autowidth can only be used on input elements.");e.dataset.uuid=Math.random().toString(36).slice(-5),e.style.boxSizing="content-box"},inserted:function(e,t){var n=window.getComputedStyle(e);e.mirror=document.createElement("span"),Object.assign(e.mirror.style,{position:"absolute",top:"0",left:"0",visibility:"hidden",height:"0",overflow:"hidden",whiteSpace:"pre",fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontStyle:n.fontStyle,letterSpacing:n.letterSpacing,textTransform:n.textTransform}),e.mirror.classList.add("vue-input-autowidth-mirror-".concat(e.dataset.uuid)),e.mirror.setAttribute("aria-hidden","true"),document.body.appendChild(e.mirror),r(e,t)},componentUpdated:function(e,t){r(e,t)},unbind:function(e){document.body.removeChild(e.mirror)}},i=function(e){e.directive("autowidth",o)};"undefined"!==typeof window&&window.Vue&&window.Vue.use(i),o.install=i,e.exports=o},f944:function(e,t,n){},ff42:function(e,t,n){"use strict";n("f944")}}]);
//# sourceMappingURL=chunk-3ed13fca.f5a6fed7.js.map