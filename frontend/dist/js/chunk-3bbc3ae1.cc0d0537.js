(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bbc3ae1"],{1995:function(e,t,i){"use strict";var c=i("7a23"),a={class:"field is-grouped is-grouped-centered"},n={class:"control"},o={key:0,class:"control"},r={key:1,class:"control"},s={key:2,class:"control"};function l(e,t,i,l,d,u){var m=this,b=Object(c["resolveComponent"])("Notification");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[i.error?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:["flex row ca snackbar ontop",i.floatBottom?"bottom":"top"]},[Object(c["createVNode"])(b,{message:i.errorMessage,duration:i.errorDuration,bottom:i.floatBottom,class:"is-danger subtitle",onDeleted:t[1]||(t[1]=function(t){return e.$emit("dismissed")})},null,8,["message","duration","bottom"])],2)):i.successMessage?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:1,class:["flex row ca snackbar ontop",i.floatBottom?"bottom":"top"]},[Object(c["createVNode"])(b,{message:i.successMessage,bottom:i.floatBottom,duration:i.successDuration,class:"is-success is-light",onDeleted:t[2]||(t[2]=function(t){return e.$emit("dismissed")})},null,8,["message","bottom","duration"])],2)):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(c["Transition"],{name:"slide-fade-bottom",mode:"out-in"},{default:Object(c["withCtx"])((function(){return[i.hide?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:["flex row ca",{"snackbar bottom":i.floatBottom}]},[Object(c["createVNode"])("div",{class:{"box has-background-link-dark":i.floatBottom}},[d.confirmingCancel?(Object(c["openBlock"])(),Object(c["createBlock"])("span",{key:0,class:["level",{"has-text-light":i.floatBottom}],innerHTML:i.cancelConfirmation},null,10,["innerHTML"])):Object(c["createCommentVNode"])("",!0),d.confirmingSubmit?(Object(c["openBlock"])(),Object(c["createBlock"])("span",{key:1,class:["level",{"has-text-light":i.floatBottom}],innerHTML:i.submitConfirmation},null,10,["innerHTML"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",a,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("button",{type:"button",class:["button",{"is-loading":!0===i.loading,"is-link is-light":!i.redGreen,"is-danger is-light":i.redGreen}],onClick:t[3]||(t[3]=function(e){return u.cancel()})},Object(c["toDisplayString"])(void 0===i.cancelText||d.confirmingCancel?"Cancelar":i.cancelText),3)]),d.confirmingCancel?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("button",{type:"button",class:["button is-danger",{"is-loading":!0===i.loading}],onClick:t[4]||(t[4]=function(e){d.confirmingCancel=!1,m.$emit("leave")})},Object(c["toDisplayString"])(void 0!==i.cancelConfButton?i.cancelConfButton:"Confirmar"),3)])):d.confirmingSubmit?(Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])("button",{type:"submit",class:["button is-success",{"is-loading":!0===i.loading}]},Object(c["toDisplayString"])(void 0!==i.submitConfButton?i.submitConfButton:"Confirmar"),3)])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[Object(c["createVNode"])("button",{type:i.submitConfirmation?"button":"submit",class:["button",{"is-loading":!0===i.loading,"is-link":!i.redGreen,"is-success is-light":i.redGreen}],onClick:t[5]||(t[5]=function(e){return u.submit()})},Object(c["toDisplayString"])(void 0!==i.submitText?i.submitText:"Submeter"),11,["type"])]))])],2)],2))]})),_:1})])}var d=i("2b9d"),u={components:{Notification:d["a"]},name:"Submit",data:function(){return{confirmingCancel:!1,confirmingSubmit:!1}},props:["error","errorMessage","errorDuration","loading","successMessage","successDuration","submitText","cancelText","redGreen","hide","floatBottom","cancelConfirmation","submitConfirmation","cancelConfButton","submitConfButton"],methods:{cancel:function(){this.cancelConfirmation?this.confirmingCancel?this.confirmingCancel=!1:this.confirmingSubmit?this.confirmingSubmit=!1:this.confirmingCancel=!0:this.$emit("leave")},submit:function(){this.submitConfirmation&&(this.confirmingSubmit=!0)}},watch:{error:{immediate:!0,handler:function(){this.confirmingCancel=!1,this.confirmingSubmit=!1}},successMessage:{immediate:!0,handler:function(){this.confirmingCancel=!1,this.confirmingSubmit=!1}}}};u.render=l;t["a"]=u},"2b9d":function(e,t,i){"use strict";var c=i("7a23");function a(e,t,i,a,n,o){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Transition"],{name:i.bottom?"slide-fade-bottom":"slide-fade",class:"box notification",mode:"out-in"},{default:Object(c["withCtx"])((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("span",null,[Object(c["createVNode"])("button",{type:"button",class:"delete",onClick:t[1]||(t[1]=function(e){return o.deactivate()})}),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(i.message),1)],512),[[c["vShow"],n.active]])]})),_:1},8,["name"])}var n=i("1da1"),o=(i("96cf"),i("d3b7"),{name:"Notification",props:["message","duration","bottom"],emits:["deleted"],data:function(){return{active:!1}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.active=!0,!e.duration){t.next=5;break}return t.next=4,new Promise((function(t){return setTimeout(t,e.duration)}));case 4:e.deactivate();case 5:case"end":return t.stop()}}),t)})))()},methods:{deactivate:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.active=!1,t.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:e.$emit("deleted");case 4:case"end":return t.stop()}}),t)})))()}}});o.render=a;t["a"]=o},"6f12":function(e,t,i){},"883d":function(e,t,i){"use strict";i("6f12")},"8e8b":function(e,t,i){},a602:function(e,t,i){"use strict";i("8e8b")},b4f9:function(e,t,i){"use strict";i.r(t);var c=i("7a23"),a=i("8616"),n=i.n(a),o={class:"box"},r={class:"flex row ra"},s=Object(c["createVNode"])("span",{class:"icon"},[Object(c["createVNode"])("i",{class:"fas fa-upload"})],-1),l=Object(c["createVNode"])("span",null,"Emitir",-1),d=Object(c["createVNode"])("span",{class:"icon"},[Object(c["createVNode"])("i",{class:"fas fa-download"})],-1),u=Object(c["createVNode"])("span",null,"Cancelar emissão",-1),m=Object(c["createVNode"])("button",{class:"button is-primary",type:"button",onclick:"window.print()"},[Object(c["createVNode"])("span",{class:"icon"},[Object(c["createVNode"])("i",{class:"fas fa-print"})]),Object(c["createVNode"])("span",null,"Pré-visualizar")],-1),b={class:"flex my-column sb"},f={class:"flex my-column vca"},p=Object(c["createVNode"])("div",{id:"header-area",class:"flex row sb width-100"},[Object(c["createVNode"])("div",{style:{width:"120px"},class:"is-hidden"}),Object(c["createVNode"])("img",{src:n.a,style:{width:"100mm"}})],-1),g=Object(c["createVNode"])("div",{class:"spacer"},null,-1),h={class:"is-size-2"},O=Object(c["createVNode"])("div",{class:"half-spacer"},null,-1),v={class:"is-size-4"},j=Object(c["createVNode"])("h1",{class:"is-size-3"}," Nome do participante ",-1),V=Object(c["createVNode"])("div",{class:"half-spacer"},null,-1),N={style:{width:"500px","max-width":"100%"}},y={class:"flex my-column vca date"},k=Object(c["createVNode"])("div",{class:"spacer"},null,-1),x={class:"flex row sa",style:{width:"100%"}},C={id:"printarea"},w={class:"flex my-column sb"},B={class:"flex my-column vca"},S={id:"header-area",class:"flex row sb width-100"},D=Object(c["createVNode"])("div",{style:{width:"120px"},class:"is-hidden"},null,-1),T=Object(c["createVNode"])("img",{src:n.a,style:{width:"100mm"}},null,-1),I={id:"qrcode",class:"flex my-column ca vca is-hidden"},$=Object(c["createVNode"])("span",{style:{"max-width":"120px"},class:"is-size-7"},"Autenticar Certificado",-1),M=Object(c["createVNode"])("div",{class:"spacer"},null,-1),R={class:"is-size-2"},_=Object(c["createVNode"])("div",{class:"half-spacer"},null,-1),P={class:"is-size-4"},z=Object(c["createVNode"])("h1",{class:"is-size-3"}," Nome do participante ",-1),U=Object(c["createVNode"])("div",{class:"half-spacer"},null,-1),G={class:"flex my-column vca date"},q=Object(c["createVNode"])("div",{class:"spacer"},null,-1),H={class:"flex row sa",style:{width:"100%"}},L={key:0,class:"flex my-column vca"},A={key:1,class:"flex my-column"};function J(e,t,i,a,n,J){var E=this,F=Object(c["resolveComponent"])("Input"),X=Object(c["resolveComponent"])("Submit"),Q=Object(c["resolveComponent"])("vue-qrcode");return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",r,[n.certificate.id&&!n.certificate.available?(Object(c["openBlock"])(),Object(c["createBlock"])("button",{key:0,class:["button is-link mr-3",{"is-loading":n.loading_publish}],type:"button",disabled:0!=n.changes,title:0!=n.changes?"Deve guardar o certificado antes de o emitir":"Um certificado emitido fica automáticamente disponível para todos os participantes presentes e participantes que futuramente façam registo de presença.",onClick:t[1]||(t[1]=function(e){return J.activate()})},[s,l],10,["disabled","title"])):Object(c["createCommentVNode"])("",!0),n.certificate.id&&n.certificate.available?(Object(c["openBlock"])(),Object(c["createBlock"])("button",{key:1,class:["button is-link mr-3",{"is-loading":n.loading_publish}],type:"button",disabled:0!=n.changes,title:0!=n.changes?"Deve guardar o certificado antes de o emitir":"Um certificado cuja emissão é cancelada passa a estar indisponível para impressão e confirmação de validade, mas se for emitido novamente os códigos de validação mantém-se.",onClick:t[2]||(t[2]=function(e){J.activate()})},[d,u],10,["disabled","title"])):Object(c["createCommentVNode"])("",!0),m]),Object(c["createVNode"])("form",{id:"editarea",ref:"form",onSubmit:t[18]||(t[18]=Object(c["withModifiers"])((function(e){return J.submit()}),["prevent"]))},[Object(c["createVNode"])("div",b,[Object(c["createVNode"])("div",f,[p,g,Object(c["createVNode"])("h1",h,[Object(c["createVNode"])(F,{modelValue:n.certificate.title,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.certificate.title=e}),type:"text",maxlength:"128",class:"is-large display-edit",placeholder:"Título",style:{"text-align":"center"},required:"",onInput:t[4]||(t[4]=function(e){return n.changes++})},null,8,["modelValue"])]),O,Object(c["createVNode"])("h2",v,[Object(c["createVNode"])(F,{modelValue:n.certificate.subtitle,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.certificate.subtitle=e}),type:"text",maxlength:"128",class:"is-medium display-edit",placeholder:"Subtítulo",style:{"text-align":"center"},required:"",onInput:t[6]||(t[6]=function(e){return n.changes++})},null,8,["modelValue"])]),j,V,Object(c["createVNode"])("div",N,[Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{ref:"input","onUpdate:modelValue":t[7]||(t[7]=function(e){return n.certificate.text=e}),class:["textarea",{"is-warning":!n.invalid&&!n.validity_valid,"is-danger":n.invalid&&!n.validity_valid}],placeholder:"Descrição do evento",style:{"text-align":"center"},maxlength:"256",required:"",onInput:t[8]||(t[8]=function(e){J.updateValidity(),n.changes++}),onInvalid:t[9]||(t[9]=function(e){J.updateValidity(),n.invalid=!0})},null,34),[[c["vModelText"],n.certificate.text]])])]),Object(c["createVNode"])("div",y,[Object(c["createVNode"])("span",null,[Object(c["createVNode"])(F,{modelValue:n.certificate.date,"onUpdate:modelValue":t[10]||(t[10]=function(e){return n.certificate.date=e}),type:"text",maxlength:"128",placeholder:"Data",style:{"text-align":"center"},onInput:t[11]||(t[11]=function(e){return n.changes++})},null,8,["modelValue"])]),k,Object(c["createVNode"])("div",x,[Object(c["createVNode"])("div",{class:[{"display-edit":!(n.certificate.signature1||n.certificate.signatureImage1)},"flex my-column vca"]},[Object(c["createVNode"])("img",{src:n.certificate.signatureImage1,style:{height:"3cm"}},null,8,["src"]),Object(c["createVNode"])(F,{modelValue:n.certificate.signature1,"onUpdate:modelValue":t[12]||(t[12]=function(e){return n.certificate.signature1=e}),class:"display-edit",type:"text",maxlength:"64",placeholder:"Assinatura",style:{"text-align":"center"},onInput:t[13]||(t[13]=function(e){return n.changes++})},null,8,["modelValue"])],2),Object(c["createVNode"])("div",{class:[{"display-edit":!(n.certificate.signature2||n.certificate.signatureImage2)},"flex my-column"]},[Object(c["createVNode"])("img",{src:n.certificate.signatureImage2,style:{height:"3cm"}},null,8,["src"]),Object(c["createVNode"])(F,{modelValue:n.certificate.signature2,"onUpdate:modelValue":t[14]||(t[14]=function(e){return n.certificate.signature2=e}),class:"display-edit",type:"text",maxlength:"64",placeholder:"Assinatura",style:{"text-align":"center"},onInput:t[15]||(t[15]=function(e){return n.changes++})},null,8,["modelValue"])],2)])])]),Object(c["createVNode"])(X,{style:{width:"fit-content"},hide:0==n.changes,"float-bottom":"true",error:n.response&&void 0===n.response.id,"error-message":"Houve um erro na submissão do certificado.","success-duration":"3000","success-message":n.success,loading:n.loading,"submit-text":"Guardar","red-green":"true","cancel-confirmation":"Pretende eliminar as suas alterações?","submit-confirmation":"Pretende guardar as suas alterações?","cancel-conf-button":"Eliminar","submit-conf-button":"Guardar",onLeave:t[16]||(t[16]=function(e){return J.cancel()}),onDismissed:t[17]||(t[17]=function(e){E.response=void 0,E.success=void 0})},null,8,["hide","error","success-message","loading"])],544),Object(c["createVNode"])("div",C,[Object(c["createVNode"])("div",w,[Object(c["createVNode"])("div",B,[Object(c["createVNode"])("div",S,[D,T,Object(c["createVNode"])("div",I,[Object(c["createVNode"])(Q,{value:"Apenas um exemplo, não pode ser usado para certificação",options:{width:120}}),$])]),M,Object(c["createVNode"])("h1",R,Object(c["toDisplayString"])(n.certificate.title),1),_,Object(c["createVNode"])("h2",P,Object(c["toDisplayString"])(n.certificate.subtitle),1),z,U,Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(n.certificate.text),1)]),Object(c["createVNode"])("div",G,[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(n.certificate.date),1),q,Object(c["createVNode"])("div",H,[n.certificate.signature1||n.certificate.signatureImage1?(Object(c["openBlock"])(),Object(c["createBlock"])("div",L,[Object(c["createVNode"])("img",{src:n.certificate.signatureImage1,style:{height:"3cm"}},null,8,["src"]),Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(n.certificate.signature1),1)])):Object(c["createCommentVNode"])("",!0),n.certificate.signature2||n.certificate.signatureImage2?(Object(c["openBlock"])(),Object(c["createBlock"])("div",A,[Object(c["createVNode"])("img",{src:n.certificate.signatureImage2,style:{height:"3cm"}},null,8,["src"]),Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(n.certificate.signature2),1)])):Object(c["createCommentVNode"])("",!0)])])])])])}var E=i("1da1"),F=(i("96cf"),i("99af"),i("1270")),X=i("1995"),Q=i("69d9"),K=i("c427"),W=i("d56f"),Y={name:"CreateCertificate",components:{VueQrcode:W["a"],Input:F["a"],Submit:X["a"]},data:function(){return{certificate:{event:this.$route.params.id},response:void 0,success:void 0,changes:0,loading:void 0,invalid:!1,validity_valid:!0,loading_publish:!1}},created:function(){var e=this;document.title="Criar Certificado de Participação",K["a"].get("certificate/?event=".concat(this.$route.params.id)).then((function(t){t.data[0]&&(e.certificate=t.data[0],document.title="Editar Certificado de Participação")})).catch()},methods:{cancel:function(){var e=this;this.loading=!0,this.$route.params.id?K["a"].get("certificate/?event=".concat(this.$route.params.id)).then((function(t){e.certificate=t.data[0],e.changes=0,e.loading=void 0})):this.$router.back()},submit:function(){this.$refs.form.checkValidity()&&(this.loading=!0,setTimeout(this.postSubmission.bind(this),0))},activate:function(){var e,t,i,c=this;this.loading_publish=!0,e="patch",t="/certificate/".concat(this.certificate.id).concat("/"),i="O certificado foi "+(this.certificate.available?"desativado":"emitido")+" com sucesso. Pode continuar a editar.";var a={method:e,url:t,headers:{"X-CSRFToken":Object(Q["b"])("csrftoken")},data:{available:!this.certificate.available},transformResponse:[function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.loading=void 0;try{c.response=JSON.parse(t),c.certificate=c.response,c.success=i,c.loading_publish=!1}catch(a){c.response=t}return e.abrupt("return",c.response);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]};Object(K["a"])(a)},postSubmission:function(){var e,t,i,c=this;void 0===this.certificate.id?(e="post",t="/certificate/",i="O certificado foi criado com sucesso. Pode continuar a editar."):(e="put",t="/certificate/".concat(this.certificate.id).concat("/"),i="O certificado foi editado com sucesso. Pode continuar a editar.");var a={method:e,url:t,headers:{"X-CSRFToken":Object(Q["b"])("csrftoken")},data:this.certificate,transformResponse:[function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.loading=void 0;try{c.response=JSON.parse(t),c.certificate=c.response,c.success=i,c.changes=0}catch(a){c.response=t}return e.abrupt("return",c.response);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]};Object(K["a"])(a)},valid:function(){return!this.invalid||this.$refs["input"].validity.valid},updateValidity:function(){this.validity_valid=this.$refs["input"].validity.valid}}};i("883d"),i("a602");Y.render=J;t["default"]=Y}}]);
//# sourceMappingURL=chunk-3bbc3ae1.cc0d0537.js.map