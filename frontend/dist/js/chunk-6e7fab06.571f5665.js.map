{"version":3,"sources":["webpack:///./src/views/MyEvents.vue?7f3c","webpack:///./src/views/MyEvents.vue?572a","webpack:///./src/views/MyEvents.vue?7931"],"names":["id","class","style","colspan","align","form_responses","event","eventSearch","type","placeholder","statusSearch","length","filteredResponses","response","responseIndex","key","eventName","statuses","loading_status","answerStatuses","name","href","form","status","components","data","undefined","displayed_sections","user","interval","created","document","title","queryString","get","then","this","getStatuses","methods","changeStatus","answer","setTimeout","patchStatus","bind","options","method","url","headers","transformResponse","catch","error","console","log","allFalse","i","result","filter","x","timeSince","render"],"mappings":"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","file":"js/chunk-6e7fab06.571f5665.js","sourcesContent":["<template>\r\n  <div\r\n    v-if=\"form_responses\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">Os meus eventos</span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Estado\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Gestão\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado (Submetida / Validada)\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th />\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"form_responses\">\r\n        <tr v-if=\"form_responses.length == 0\">\r\n          <td\r\n            colspan=\"3\"\r\n            class=\"subtitle\"\r\n            align=\"center\"\r\n          >\r\n            Não tem nenhum evento aprovado.\r\n          </td>\r\n        </tr>\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td\r\n            v-if=\"statuses\"\r\n            style=\"vertical-align: middle;\"\r\n            align=\"center\"\r\n          >\r\n            <span\r\n              v-if=\"loading_status[response.id] === 'error'\"\r\n              class=\"is-danger connection-error\"\r\n            >\r\n              Houve um erro de conexão. Por favor recarregue a página.\r\n            </span>\r\n            <div\r\n              v-else\r\n              class=\"flex column vca p-0\"\r\n            >\r\n              <a\r\n                v-if=\"statuses?.[answerStatuses[response.id]].name=='Cancelada'\"\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n                :href=\"'/forms/respond/'+response.form+'?event='+response.event\"\r\n              >Cancelada (Editar)</a>\r\n              <span\r\n                v-else\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n              ><span class=\"mr-2\">{{ statuses?.[answerStatuses[response.id]].name }}</span>\r\n              </span>\r\n            </div>\r\n          </td>\r\n          <td v-else>\r\n            A carregar...\r\n          </td>\r\n          <td align=\"center\">\r\n            <a\r\n              v-if=\"response.status == 2\" \r\n              class=\"button is-primary\"\r\n              :href=\"'/forms/chooseForm/'+response.event\"\r\n            >Gerir Formulários e Modelos</a>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { getCookie, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      form_responses: undefined,\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: undefined,\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {}\r\n    };\r\n  },\r\n  created() {\r\n    document.title = \"Os meus eventos\"\r\n    var queryString = \"myEvents/?type=2\";\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n          this.form_responses = response.data\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n    //this.interval = setInterval(() => this.getStatuses(), 10000);\r\n  },\r\n  methods: {\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import '@/styles/flex-styles.scss';\r\n  @import '@/styles/global-styles.scss';\r\n</style>","import { render } from \"./MyEvents.vue?vue&type=template&id=87e385fe\"\nimport script from \"./MyEvents.vue?vue&type=script&lang=js\"\nexport * from \"./MyEvents.vue?vue&type=script&lang=js\"\n\nimport \"./MyEvents.vue?vue&type=style&index=0&id=87e385fe&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MyEvents.vue?vue&type=style&index=0&id=87e385fe&lang=scss\""],"sourceRoot":""}