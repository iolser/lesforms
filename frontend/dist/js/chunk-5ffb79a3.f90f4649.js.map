{"version":3,"sources":["webpack:///./src/views/MyParticipations.vue?69d2","webpack:///./src/views/MyParticipations.vue?bff2","webpack:///./src/views/MyParticipations.vue?54f2"],"names":["id","class","style","colspan","align","form_responses","event","eventSearch","type","placeholder","statusSearch","length","filteredResponses","response","responseIndex","key","eventName","statuses","loading_status","answerStatuses","name","href","form","cancelSignup","status","ticketAvailable","certificateAvailable","feedbackForm","components","data","undefined","displayed_sections","user","interval","created","document","title","queryString","get","then","this","getStatuses","methods","printCanceled","console","log","confirm","patchStatus","changeStatus","answer","setTimeout","bind","options","method","url","headers","transformResponse","catch","error","allFalse","i","result","filter","x","timeSince","render"],"mappings":"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","file":"js/chunk-5ffb79a3.f90f4649.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MyParticipations.vue?vue&type=style&index=0&id=40989c4d&lang=scss\"","<template>\r\n  <div\r\n    v-if=\"form_responses\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">As minhas inscrições</span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Estado\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Bilhete\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Certificado\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Feedback\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado (Submetida / Validada / Cancelada / Presente)\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th />\r\n          <th />\r\n          <th />\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"form_responses\">\r\n        <tr v-if=\"form_responses.length == 0\">\r\n          <td\r\n            colspan=\"5\"\r\n            class=\"subtitle\"\r\n            align=\"center\"\r\n          >\r\n            Não propôs nenhum evento.\r\n          </td>\r\n        </tr>\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td\r\n            v-if=\"statuses\"\r\n            style=\"vertical-align: middle;\"\r\n            align=\"center\"\r\n          >\r\n            <span\r\n              v-if=\"loading_status[response.id] === 'error'\"\r\n              class=\"is-danger connection-error\"\r\n            >\r\n              Houve um erro de conexão. Por favor recarregue a página.\r\n            </span>\r\n            <div\r\n              v-else\r\n              class=\"flex column vca p-0\"\r\n            >\r\n              <a\r\n                v-if=\"statuses?.[answerStatuses[response.id]].name=='Cancelada'\"\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n                :href=\"'/forms/respond/'+response.form+'?event='+response.event\"\r\n              >Cancelada (Editar)</a>\r\n              <a\r\n                v-else-if=\"statuses?.[answerStatuses[response.id]].name=='Submetida'\"\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n                @click=\"cancelSignup(response.id)\"\r\n              >Submetida (Cancelar)</a>\r\n              <span\r\n                v-else\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n              ><span class=\"mr-2\">{{ statuses?.[answerStatuses[response.id]].name }}</span>\r\n              </span>\r\n            </div>\r\n          </td>\r\n          <td v-else>\r\n            A carregar...\r\n          </td>\r\n          <td align=\"center\">\r\n            <a\r\n              v-if=\"(response.status == 2 || response.status == 4) && response.ticketAvailable\"\r\n              class=\"button is-primary\"\r\n              :href=\"'/forms/ticket/?event='+response.event\"\r\n            >Bilhete</a>\r\n          </td>\r\n          <td align=\"center\">\r\n            <a\r\n              v-if=\"response.status == 4 && response.certificateAvailable\"\r\n              class=\"button is-primary\"\r\n              :href=\"'/forms/certificate/?event='+response.event\"\r\n            >Certificado</a>\r\n          </td>\r\n          <td align=\"center\">\r\n            <a\r\n              v-if=\"response.status == 4 && response.feedbackForm\"\r\n              class=\"button is-primary\"\r\n              :href=\"'/forms/respond/'+response.feedbackForm+'?event='+response.event\"\r\n            >Submeter feedback</a>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { getCookie, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      form_responses: undefined,\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: undefined,\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {}\r\n    };\r\n  },\r\n  created() {\r\n    document.title = \"As minhas inscrições\"\r\n    var queryString = \"myEvents/?type=1\";\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n          this.form_responses = response.data\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n  },\r\n  methods: {\r\n    printCanceled() {\r\n      console.log(\"Não cancelou a sua inscrição\");\r\n    },\r\n    cancelSignup(id) {\r\n       if (confirm('Deseja cancelar a sua inscrição?')) {\r\n        this.patchStatus(id, 3);\r\n        this.answerStatuses[id] = 3;\r\n       }\r\n    },\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import '@/styles/flex-styles.scss';\r\n  @import '@/styles/global-styles.scss';\r\n</style>","import { render } from \"./MyParticipations.vue?vue&type=template&id=40989c4d\"\nimport script from \"./MyParticipations.vue?vue&type=script&lang=js\"\nexport * from \"./MyParticipations.vue?vue&type=script&lang=js\"\n\nimport \"./MyParticipations.vue?vue&type=style&index=0&id=40989c4d&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}