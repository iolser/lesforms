(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c43bbd9a"],{"1e9c":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("d3b7");var a=c("7a23"),o={key:0,id:"responses",class:"table-container box"},n={class:"table is-striped is-hoverable is-fullwidth",style:{border:"1px solid #dbdbdb"}},s={class:"mb-0 p-2"},r={class:"title"},i=Object(a["createVNode"])("br",null,null,-1),l={class:"subtitle"},d=Object(a["createTextVNode"])("Respostas "),b=Object(a["createVNode"])("th",{style:{"text-align":"center","vertical-align":"middle"}}," Resposta ",-1),u={key:0,style:{"text-align":"center","vertical-align":"middle"}},j=Object(a["createVNode"])("th",{style:{"text-align":"center","vertical-align":"middle"}}," Estado ",-1),O={class:"p-0"},p={class:"field"},m={class:"control has-icons-left"},f=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),k={key:0,class:"p-0"},h={class:"field"},V={class:"control has-icons-left"},N=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),v={class:"p-0"},g={class:"field"},y={class:"control has-icons-left"},B=Object(a["createVNode"])("span",{class:"icon is-small is-left"},[Object(a["createVNode"])("i",{class:"fas fa-search"})],-1),S={key:0},_={key:0},w=Object(a["createVNode"])("td",{colspan:"3",class:"subtitle",align:"center"}," Não existem respostas para validar. ",-1),x={class:"author"},C=Object(a["createTextVNode"])(" Anónimo "),D=Object(a["createVNode"])("br",null,null,-1),F={key:0},T={key:1,style:{"vertical-align":"middle"},align:"center"},q={key:0,class:"is-danger connection-error"},A={key:1,class:"flex column vca p-0"},R={class:"mr-2"},L=Object(a["createVNode"])("span",{class:"icon flex row vca",style:{"margin-top":"2px"}},[Object(a["createVNode"])("i",{class:"fas fa-eye"})],-1),z={class:"modal-card"},P={class:"modal-card-head"},$={class:"modal-card-title"},E={class:"modal-card-body"},M={class:"title"},U=Object(a["createVNode"])("hr",{class:"mt-0"},null,-1),J={class:"subtitle is-bold mb-2"},H=Object(a["createVNode"])("b",null," Resposta: ",-1),I=Object(a["createTextVNode"])(" Sem resposta "),X={class:"modal-card-foot flex row ca"},G={key:2},K={key:1},Q={style:{height:"50px"}},W=Object(a["createVNode"])("td",null,null,-1),Y={key:0},Z=Object(a["createVNode"])("td",null,null,-1),ee={style:{height:"50px"}},te=Object(a["createVNode"])("td",null,null,-1),ce={key:0},ae=Object(a["createVNode"])("td",null,null,-1),oe={style:{height:"50px"}},ne=Object(a["createVNode"])("td",null,null,-1),se={key:0},re=Object(a["createVNode"])("td",null,null,-1),ie={style:{height:"50px"}},le=Object(a["createVNode"])("td",null,null,-1),de={key:0},be=Object(a["createVNode"])("td",null,null,-1);function ue(e,t,c,ue,je,Oe){return je.api_data?(Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("table",n,[Object(a["createVNode"])("caption",s,[Object(a["createVNode"])("span",r,Object(a["toDisplayString"])(je.api_data.title),1),i,Object(a["createVNode"])("span",l,[d,je.event?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(" para "+Object(a["toDisplayString"])(je.event),1)],64)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[b,je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("th",u," Evento ")),j]),Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",O,[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",m,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return je.authorSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por autor"},null,512),[[a["vModelText"],je.authorSearch]]),f])])]),je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("th",k,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("div",V,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return je.eventSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por evento"},null,512),[[a["vModelText"],je.eventSearch]]),N])])])),Object(a["createVNode"])("th",v,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",y,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return je.statusSearch=e}),type:"text",class:"input is-info is-small m-0",placeholder:"Pesquisar por estado (Validada / Presente)"},null,512),[[a["vModelText"],je.statusSearch]]),B])])])])]),je.form_responses?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",S,[0==je.form_responses.length?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",_,[w])):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Oe.filteredResponses(),(function(e,t){var c;return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t},[Object(a["createVNode"])("td",x,[e.author?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,href:"/profile/"+e.answerer},Object(a["toDisplayString"])(e.author),9,["href"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[C],64)),Object(a["createVNode"])("span",{title:new Date(e.created_at).toLocaleString()},", há "+Object(a["toDisplayString"])(Oe.timeSince(e.created_at)),9,["title"]),e.created_at!=e.updated_at?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:2,class:e.created_at!=e.updated_at?"edited":"",title:"Editado por "+(e.editor?e.editor:"Anónimo")+" há "+Oe.timeSince(e.updated_at)+" ("+new Date(e.updated_at).toLocaleString()+")"},"*",10,["title"])):Object(a["createCommentVNode"])("",!0),D]),je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",F,Object(a["toDisplayString"])(e.eventName),1)),je.statuses?(Object(a["openBlock"])(),Object(a["createBlock"])("td",T,["error"===je.loading_status[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("span",q," Houve um erro de conexão. Por favor recarregue a página. ")):(Object(a["openBlock"])(),Object(a["createBlock"])("div",A,[Object(a["createVNode"])("a",{class:"mb-2 is-size-5 flex row vca",onClick:function(t){return je.modal_open[e.id]=!0}},[Object(a["createVNode"])("span",R,Object(a["toDisplayString"])(null===(c=je.statuses)||void 0===c?void 0:c[je.answerStatuses[e.id]].name),1),L],8,["onClick"]),Object(a["createVNode"])("div",{class:["modal",{"is-active":je.modal_open[e.id]}]},[Object(a["createVNode"])("div",{class:"modal-background",onClick:function(t){return je.modal_open[e.id]=void 0}},null,8,["onClick"]),Object(a["createVNode"])("div",z,[Object(a["createVNode"])("header",P,[Object(a["createVNode"])("p",$," Resposta de "+Object(a["toDisplayString"])(e.author),1),Object(a["createVNode"])("button",{class:"delete","aria-label":"close",onClick:function(t){return je.modal_open[e.id]=void 0}},null,8,["onClick"])]),Object(a["createVNode"])("section",E,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.content.sections,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,style:{display:"contents"}},[Object(a["createVNode"])("span",M,[je.api_data.form.hide_section_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t+1)+". ",1)],64)),Object(a["createTextVNode"])(Object(a["toDisplayString"])(je.api_data.form.sections[t].section_name),1)]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:c,class:"flex column"},["text_exposition"!=e.field_type?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[U,Object(a["createVNode"])("span",J,[je.api_data.form.hide_section_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t+1)+".",1)],64)),je.api_data.form.hide_question_numbers?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c+1)+".",1)],64)),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(je.api_data.form.sections[t].questions[c].question),1)]),Object(a["createVNode"])("span",null,[H,void 0!==e.answer?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},["[object Array]"===Object.prototype.toString.call(e.answer)?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(e.answer,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},Object(a["toDisplayString"])(e),1)})),128)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.answer),1)],64))],64)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[I],64))])],64)):Object(a["createCommentVNode"])("",!0)])})),128))])})),128))]),Object(a["createVNode"])("footer",X,[1==je.answerStatuses[e.id]||2==je.answerStatuses[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,class:[{"is-loading":"loading"===je.loading_status[e.id]},"button is-danger"],type:"button",onClick:function(t){je.answerStatuses[e.id]=3,Oe.changeStatus(e.id,je.answerStatuses[e.id])}}," Invalidar ",10,["onClick"])):Object(a["createCommentVNode"])("",!0),1==je.answerStatuses[e.id]||3==je.answerStatuses[e.id]?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:1,class:[{"is-loading":"loading"===je.loading_status[e.id]},"button is-success"],type:"button",onClick:function(t){je.answerStatuses[e.id]=2,Oe.changeStatus(e.id,je.answerStatuses[e.id])}}," Validar ",10,["onClick"])):Object(a["createCommentVNode"])("",!0)])])],2)]))])):(Object(a["openBlock"])(),Object(a["createBlock"])("td",G," A carregar... "))])})),128))])):(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",K,[Object(a["createVNode"])("tr",Q,[W,je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",Y)),Z]),Object(a["createVNode"])("tr",ee,[te,je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",ce)),ae]),Object(a["createVNode"])("tr",oe,[ne,je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",se)),re]),Object(a["createVNode"])("tr",ie,[le,je.event?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("td",de)),be])]))])])):Object(a["createCommentVNode"])("",!0)}var je=c("1da1"),Oe=(c("96cf"),c("99af"),c("a434"),c("4de4"),c("3f6f")),pe=c("c427"),me=c("69d9"),fe={name:"ViewAllResponses",components:Oe,data:function(){return{api_data:void 0,form_responses:void 0,displayed_sections:[],event:void 0,user:void 0,statuses:void 0,authorSearch:"",eventSearch:"",statusSearch:"",answerStatuses:[],interval:void 0,loading_status:{},modal_open:{}}},created:function(){var e=this;document.title="Validação de registos";var t=pe["a"].get("form/".concat(this.$route.params.id)).then((function(t){return e.initializeData(t)})),c="formAnswer/?form=".concat(this.$route.params.id).concat("&status=1,2");void 0!==this.$route.query.event&&(c=c.concat("&event=").concat(this.$route.query.event),pe["a"].get("event/".concat(this.$route.query.event)).then((function(t){return e.event=t.data.name}))),pe["a"].get(c).then(function(){var c=Object(je["a"])(regeneratorRuntime.mark((function c(a){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,t;case 2:e.initializeAnswers(a);case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()),pe["a"].get("answerStatus/").then((function(t){e.statuses=t.data})),this.getStatuses()},methods:{getStatuses:function(){var e=this;pe["a"].get("formAnswerStatus/").then((function(t){e.answerStatuses=t.data}))},changeStatus:function(e,t){this.loading_status[e]="loading",setTimeout(this.patchStatus.bind(this,e,t),0)},patchStatus:function(e,t){var c=this,a={method:"patch",url:"/formAnswerStatus/"+e+"/",headers:{"X-CSRFToken":Object(me["b"])("csrftoken")},data:{status:t},transformResponse:[function(e){return c.response=e,e}]};Object(pe["a"])(a).then((function(){return c.loading_status[e]=void 0})).catch((function(t){console.log(t),c.loading_status[e]="error",c.answerStatuses[e]="error"}))},initializeData:function(e){this.api_data=e.data;for(var t=0;t<this.api_data.form.sections.length;)this.api_data.form.sections[t].questions.length>0?this.displayed_sections[t++]=!0:this.api_data.form.sections.splice(t,1)},initializeAnswers:function(e){this.form_responses=Object(me["a"])(e.data,this.api_data)},allFalse:function(){for(var e=0;e<this.displayed_sections.length;e++)if(1==this.displayed_sections[e])return!1;return!0},filteredResponses:function(){var e=this,t=this.form_responses;""!=this.authorSearch&&(t=t.filter((function(t){return Object(me["e"])(void 0===t.author?"Anónimo":t.author,e.authorSearch)}))),""!=this.eventSearch&&(t=t.filter((function(t){return!!t.eventName&&Object(me["e"])(t.eventName,e.eventSearch)}))),""!=this.statusSearch&&(t=t.filter((function(t){return Object(me["e"])(e.statuses[e.answerStatuses[t.id]].name,e.statusSearch)})));for(var c=0;c<this.api_data.form.sections.length;c++)if(this.displayed_sections[c])for(var a=this.api_data.form.sections[c],o=0;o<a.questions.length;o++){var n=a.questions[o];n.filter&&""!=n.filter&&(t=t.filter((function(e){return Object(me["e"])(String(e.content.sections[c][o].answer),n.filter)})))}return t},timeSince:me["f"]}};c("f513");fe.render=ue;t["default"]=fe},f3f2:function(e,t,c){},f513:function(e,t,c){"use strict";c("f3f2")}}]);
//# sourceMappingURL=chunk-c43bbd9a.da51b3b7.js.map