{"version":3,"sources":["webpack:///./src/views/ViewAllResponses.vue?3896","webpack:///./src/views/ViewAllResponses.vue?f3b1","webpack:///./src/views/ViewAllResponses.vue?5d9e"],"names":["id","class","style","rowspan","value","unselectable","api_data","title","event","form","sections","section","sectionIndex","key","colspan","displayed_sections","questions","length","section_name","question","questionIndex","authorSearch","type","placeholder","eventSearch","statusSearch","filter","filteredResponses","response","responseIndex","author","href","answerer","Date","created_at","toLocaleString","timeSince","updated_at","editor","status","eventName","loading_status","answerStatuses","statuses","color","disabled","changeStatus","name","content","answer","answerIndex","field_type","includes","undefined","Object","prototype","toString","call","option","optionIndex","components","data","form_responses","user","interval","created","document","get","concat","this","$route","params","then","initializeData","queryString","query","catch","error","console","log","initializeAnswers","getStatuses","methods","setTimeout","patchStatus","bind","options","method","url","headers","transformResponse","i","splice","allFalse","result","x","String","render"],"mappings":"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","file":"js/chunk-90bd9a70.be5fca96.js","sourcesContent":["<template>\r\n  <div\r\n    v-if=\"api_data\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">{{ api_data.title }}</span><br><span class=\"subtitle\">Respostas</span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Autor da Resposta\r\n          </th>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            rowspan=\"3\"\r\n          >\r\n            Estado\r\n          </th>\r\n          <th\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n            :colspan=\"displayed_sections[sectionIndex] == true ? section.questions.length : 1\"\r\n            :rowspan=\"displayed_sections[sectionIndex] == true ? 1 : 1\"\r\n            class=\"section-first section-last\"\r\n          >\r\n            {{ section.section_name }}\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\" \r\n            v-show=\"displayed_sections[sectionIndex] == true\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <th\r\n              v-for=\"(question, questionIndex) in section.questions\"\r\n              :key=\"questionIndex\"\r\n              :class=\"{ 'section-first' : questionIndex === 0, 'section-last' : questionIndex === section.questions.length-1}\"\r\n            >\r\n              {{ question.question }}\r\n            </th>\r\n          </div>\r\n        </tr>\r\n        <tr>\r\n          <th\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            class=\"p-0\"\r\n            :class=\"displayed_sections[sectionIndex] ? 'section-first section-last' : ''\"\r\n            :colspan=\"displayed_sections[sectionIndex] ? section.questions.length : 1\"\r\n            :rowspan=\"displayed_sections[sectionIndex] == true ? 1 : 1\"\r\n          >\r\n            <div \r\n              class=\"button is-info is-fullwidth\"\r\n              :class=\"displayed_sections[sectionIndex] ? 'is-light' : 'm-1px'\"\r\n              @click=\"displayed_sections[sectionIndex] = !displayed_sections[sectionIndex];\"\r\n            >\r\n              {{ displayed_sections[sectionIndex] ? 'Esconder secção' : 'Ver secção' }}\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"authorSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por autor\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in api_data.form.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <div\r\n              v-show=\"displayed_sections[sectionIndex]\"\r\n              style=\"display: contents;\"\r\n            >\r\n              <th \r\n                v-for=\"(question, questionIndex) in section.questions\"\r\n                :key=\"questionIndex\"\r\n                class=\"p-0 field\"\r\n                :class=\"{ 'section-first' : questionIndex === 0, 'section-last' : questionIndex === section.questions.length-1}\"\r\n              >\r\n                <div class=\"field\">\r\n                  <div class=\"control has-icons-left\">\r\n                    <input\r\n                      v-model=\"question.filter\"\r\n                      type=\"text\"\r\n                      class=\"input is-info is-small m-0\"\r\n                      :placeholder=\"'Pesquisar por ' + question.question\"\r\n                      @input=\"filter\"\r\n                    >\r\n                    <span class=\"icon is-small is-left\">\r\n                      <i class=\"fas fa-search\" />\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </th>\r\n            </div>\r\n            <div\r\n              v-show=\"!displayed_sections[sectionIndex]\"\r\n              style=\"display: contents;\"\r\n            >\r\n              <th class=\"has-background-grey-lighter\" />\r\n            </div>\r\n          </div>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td class=\"author\">\r\n            <span\r\n              v-if=\"response.author\"\r\n              :href=\"'/profile/'+response.answerer\"\r\n            >{{ response.author }}</span>\r\n            <template v-else>\r\n              Anónimo\r\n            </template><span\r\n              :title=\"new Date(response.created_at).toLocaleString()\"\r\n            >, há {{ timeSince(response.created_at) }}</span><span\r\n              v-if=\"response.created_at != response.updated_at\"\r\n              :class=\"response.created_at != response.updated_at ? 'edited' : ''\"\r\n              :title=\"'Editado por ' + (!response.editor ? 'Anónimo' : response.editor) + ' há ' + timeSince(response.updated_at) + ' (' + new Date(response.updated_at).toLocaleString() + ')'\"\r\n            >*</span><br>\r\n            <a\r\n              v-if=\"response.status == 3\"\r\n              :href=\"'/forms/respond/' + response.form + '?event=' + response.event + '&edit=' + response.id\"\r\n            >Editar Resposta</a>\r\n            <span v-else>Editar Resposta</span>\r\n          </td>\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td style=\"vertical-align: middle; min-width: 160px;\">\r\n            <div \r\n              class=\"select is-rounded is-fullwidth\" \r\n              :class=\"{'is-loading' : loading_status[response.id] === 'loading', 'is-danger connection-error' : loading_status[response.id] === 'error'}\"\r\n            >\r\n              <select\r\n                v-model=\"answerStatuses[response.id]\"\r\n                style=\"border-width: 2.5px;\"\r\n                :style=\"{borderColor: loading_status[response.id] !== 'error' ? statuses[answerStatuses[response.id]].color : ''}\"\r\n                disabled\r\n                @change=\"changeStatus(response.id, answerStatuses[response.id])\"\r\n              >\r\n                <option \r\n                  v-if=\"loading_status[response.id] === 'error'\" \r\n                  value=\"error\" \r\n                  unselectable\r\n                >\r\n                  Erro de conexão\r\n                </option>\r\n                <option\r\n                  v-for=\"(status, key) in statuses\"\r\n                  :key=\"key\"\r\n                  :value=\"key\"\r\n                >\r\n                  {{ status.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </td>\r\n          <div\r\n            v-for=\"(section, sectionIndex) in response.content.sections\"\r\n            :key=\"sectionIndex\"\r\n            style=\"display: contents;\"\r\n          >\r\n            <div\r\n              v-show=\"displayed_sections[sectionIndex]\"\r\n              style=\"display:contents;\"\r\n            >\r\n              <template v-for=\"(answer, answerIndex) in section\" :key=\"answerIndex\">\r\n                <td\r\n                  v-if=\"!answer.field_type.includes('exposition')\"\r\n                  :style=\"answer.answer === undefined ? 'background-color: rgba(0, 0, 0, 0.25);' : ''\"\r\n                  :class=\"{ 'section-first' : answerIndex === 0, 'section-last' : answerIndex === section.length-1}\"\r\n                >\r\n                  <template v-if=\"answer.answer !== undefined\">\r\n                    <template v-if=\"Object.prototype.toString.call( answer.answer ) === '[object Array]'\">\r\n                      <li\r\n                        v-for=\"(option, optionIndex) in answer.answer\"\r\n                        :key=\"optionIndex\"\r\n                      >\r\n                        {{ option }}\r\n                      </li>\r\n                    </template>\r\n                    <template v-else>\r\n                      {{ answer.answer }}\r\n                    </template>\r\n                  </template>\r\n                  <template v-else>\r\n                    Sem resposta\r\n                  </template>\r\n                </td>\r\n              </template>\r\n            </div>\r\n            <td\r\n              v-show=\"displayed_sections[sectionIndex] == false\"\r\n              class=\"has-background-grey-lighter\"\r\n            />\r\n          </div>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { decodeSections, getCookie, removeExpositionSections, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      api_data: undefined,\r\n      form_responses: [],\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: {},\r\n      authorSearch: \"\",\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {}\r\n    };\r\n  },\r\n  created() {\r\n    document.title = \"Respostas de Formulário\"\r\n    const form = API.get(\"form/\".concat(this.$route.params.id))\r\n      .then((response) => \r\n        this.initializeData(response)\r\n      )\r\n    var queryString = \"formAnswer/?form=\".concat(this.$route.params.id);\r\n    if (this.$route.query.event !== undefined) {\r\n      queryString = queryString.concat(\"&event=\").concat(this.$route.query.event)\r\n      API.get(\"event/\".concat(this.$route.query.event))\r\n       .then(response => this.event = response.data.name)\r\n       .catch((error) => console.log(error.response));\r\n    }\r\n    if (this.$route.query.user !== undefined) {\r\n      queryString = queryString.concat(\"&user=\").concat(this.$route.query.user)\r\n      // API.get(\"user/\".concat(this.$route.query.user))\r\n      //  .then(response => this.user = response.data.username);\r\n    }\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n        await form;\r\n        this.initializeAnswers(response)\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n    //this.interval = setInterval(() => this.getStatuses(), 10000);\r\n  },\r\n  methods: {\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    initializeData(response) {\r\n      this.api_data = removeExpositionSections(response.data);\r\n      for (var i = 0; i < this.api_data.form.sections.length; /*do nothing*/) {\r\n        if (this.api_data.form.sections[i].questions.length > 0)\r\n          this.displayed_sections[i++] = true;\r\n        else\r\n          this.api_data.form.sections.splice(i, 1);\r\n      }\r\n    },\r\n    initializeAnswers(response) {\r\n      this.form_responses = decodeSections(response.data, this.api_data);\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.authorSearch != \"\")\r\n        result = result.filter(x => stringIn(x.author === undefined ? \"Anónimo\" : x.author, this.authorSearch));\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      for (var sectionIndex = 0; sectionIndex < this.api_data.form.sections.length; sectionIndex++) {\r\n        if (this.displayed_sections[sectionIndex]) {\r\n          var section = this.api_data.form.sections[sectionIndex];\r\n          for (var questionIndex = 0; questionIndex < section.questions.length; questionIndex++) {\r\n            var question = section.questions[questionIndex]\r\n            if (question.filter && question.filter != \"\")\r\n              result = result.filter(x => stringIn(String(x.content.sections[sectionIndex][questionIndex].answer), question.filter));\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import '@/styles/flex-styles.scss';\r\n  @import '@/styles/global-styles.scss';\r\n</style>","import { render } from \"./ViewAllResponses.vue?vue&type=template&id=1abd12e4\"\nimport script from \"./ViewAllResponses.vue?vue&type=script&lang=js\"\nexport * from \"./ViewAllResponses.vue?vue&type=script&lang=js\"\n\nimport \"./ViewAllResponses.vue?vue&type=style&index=0&id=1abd12e4&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ViewAllResponses.vue?vue&type=style&index=0&id=1abd12e4&lang=scss\""],"sourceRoot":""}