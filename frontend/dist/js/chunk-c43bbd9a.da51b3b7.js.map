{"version":3,"sources":["webpack:///./src/views/ValidateSignup.vue?1e9c","webpack:///./src/views/ValidateSignup.vue?b12b","webpack:///./src/views/ValidateSignup.vue?5800"],"names":["id","class","style","colspan","align","api_data","title","event","authorSearch","type","placeholder","eventSearch","statusSearch","form_responses","length","filteredResponses","response","responseIndex","key","author","href","answerer","Date","created_at","toLocaleString","timeSince","updated_at","editor","eventName","statuses","loading_status","modal_open","answerStatuses","name","undefined","aria-label","content","sections","section","sectionIndex","form","hide_section_numbers","section_name","answer","answerIndex","field_type","hide_question_numbers","questions","question","Object","prototype","toString","call","option","optionIndex","changeStatus","components","data","displayed_sections","user","interval","created","document","get","concat","this","$route","params","then","initializeData","queryString","query","initializeAnswers","getStatuses","methods","status","setTimeout","patchStatus","bind","options","method","url","headers","transformResponse","catch","error","console","log","i","splice","allFalse","result","filter","x","questionIndex","String","render"],"mappings":"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","file":"js/chunk-c43bbd9a.da51b3b7.js","sourcesContent":["<template>\r\n  <div\r\n    v-if=\"api_data\"\r\n    id=\"responses\"\r\n    class=\"table-container box\"\r\n  >\r\n    <table \r\n      class=\"table is-striped is-hoverable is-fullwidth\" \r\n      style=\"border: 1px solid #dbdbdb;\"\r\n    >\r\n      <caption class=\"mb-0 p-2\">\r\n        <span class=\"title\">{{ api_data.title }}</span><br><span class=\"subtitle\">Respostas\r\n          <template v-if=\"event\">\r\n            para {{ event }}\r\n          </template>\r\n        </span>\r\n      </caption>\r\n      <thead>\r\n        <tr>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Resposta\r\n          </th>\r\n          <th\r\n            v-if=\"!event\"\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Evento\r\n          </th>\r\n          <th\r\n            style=\"text-align: center; vertical-align: middle;\"\r\n          >\r\n            Estado\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"authorSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por autor\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th \r\n            v-if=\"!event\" \r\n            class=\"p-0\"\r\n          >\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"eventSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por evento\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n          <th class=\"p-0\">\r\n            <div class=\"field\">\r\n              <div class=\"control has-icons-left\">\r\n                <input\r\n                  v-model=\"statusSearch\"\r\n                  type=\"text\"\r\n                  class=\"input is-info is-small m-0\"\r\n                  placeholder=\"Pesquisar por estado (Validada / Presente)\"\r\n                >\r\n                <span class=\"icon is-small is-left\">\r\n                  <i class=\"fas fa-search\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"form_responses\">\r\n        <tr v-if=\"form_responses.length == 0\">\r\n          <td\r\n            colspan=\"3\"\r\n            class=\"subtitle\"\r\n            align=\"center\"\r\n          >\r\n            Não existem respostas para validar.\r\n          </td>\r\n        </tr>\r\n        <tr\r\n          v-for=\"(response, responseIndex) in filteredResponses()\"\r\n          :key=\"responseIndex\"\r\n        >\r\n          <td class=\"author\">\r\n            <span\r\n              v-if=\"response.author\"\r\n              :href=\"'/profile/'+response.answerer\"\r\n            >{{ response.author }}</span>\r\n            <template v-else>\r\n              Anónimo\r\n            </template><span\r\n              :title=\"new Date(response.created_at).toLocaleString()\"\r\n            >, há {{ timeSince(response.created_at) }}</span><span\r\n              v-if=\"response.created_at != response.updated_at\"\r\n              :class=\"response.created_at != response.updated_at ? 'edited' : ''\"\r\n              :title=\"'Editado por ' + (!response.editor ? 'Anónimo' : response.editor) + ' há ' + timeSince(response.updated_at) + ' (' + new Date(response.updated_at).toLocaleString() + ')'\"\r\n            >*</span><br>\r\n          </td>\r\n          <td v-if=\"!event\">\r\n            {{ response.eventName }}\r\n          </td>\r\n          <td\r\n            v-if=\"statuses\"\r\n            style=\"vertical-align: middle;\"\r\n            align=\"center\"\r\n          >\r\n            <span\r\n              v-if=\"loading_status[response.id] === 'error'\"\r\n              class=\"is-danger connection-error\"\r\n            >\r\n              Houve um erro de conexão. Por favor recarregue a página.\r\n            </span>\r\n            <div\r\n              v-else\r\n              class=\"flex column vca p-0\"\r\n            >\r\n              <a\r\n                class=\"mb-2 is-size-5 flex row vca\"\r\n                @click=\"modal_open[response.id] = true\"\r\n              ><span class=\"mr-2\">{{ statuses?.[answerStatuses[response.id]].name }}</span>\r\n                <span\r\n                  class=\"icon flex row vca\"\r\n                  style=\"margin-top: 2px;\"\r\n                ><i class=\"fas fa-eye\" /></span>\r\n              </a>\r\n              <div\r\n                class=\"modal\"\r\n                :class=\"{'is-active' : modal_open[response.id]}\"\r\n              >\r\n                <div\r\n                  class=\"modal-background\" \r\n                  @click=\"modal_open[response.id] = undefined\"\r\n                />\r\n                <div\r\n                  class=\"modal-card\"\r\n                >\r\n                  <header class=\"modal-card-head\">\r\n                    <p class=\"modal-card-title\">\r\n                      Resposta de {{ response.author }}\r\n                    </p>\r\n                    <button\r\n                      class=\"delete\"\r\n                      aria-label=\"close\"\r\n                      @click=\"modal_open[response.id] = undefined\"\r\n                    />\r\n                  </header>\r\n                  <section class=\"modal-card-body\">  \r\n                    <div\r\n                      v-for=\"(section, sectionIndex) in response.content.sections\"\r\n                      :key=\"sectionIndex\"\r\n                      style=\"display: contents;\"\r\n                    >\r\n                      <span class=\"title\"><template v-if=\"!api_data.form.hide_section_numbers\">\r\n                        {{ sectionIndex+1 }}. </template>{{ api_data.form.sections[sectionIndex].section_name }}\r\n                      </span>\r\n                      <div\r\n                        v-for=\"(answer, answerIndex) in section\"\r\n                        :key=\"answerIndex\"\r\n                        class=\"flex column\"\r\n                      >\r\n                        <template v-if=\"answer.field_type != 'text_exposition'\">\r\n                          <hr class=\"mt-0\">\r\n                          <span class=\"subtitle is-bold mb-2\">\r\n                            <template v-if=\"!api_data.form.hide_section_numbers\">\r\n                              {{ sectionIndex+1 }}.</template>\r\n                            <template v-if=\"!api_data.form.hide_question_numbers\">\r\n                              {{ answerIndex+1 }}.</template> {{ api_data.form.sections[sectionIndex].questions[answerIndex].question }}\r\n                          </span>\r\n                          <span>\r\n                            <b>\r\n                              Resposta: \r\n                            </b>\r\n                            <template v-if=\"answer.answer !== undefined\">\r\n                              <template v-if=\"Object.prototype.toString.call( answer.answer ) === '[object Array]'\">\r\n                                <li\r\n                                  v-for=\"(option, optionIndex) in answer.answer\"\r\n                                  :key=\"optionIndex\"\r\n                                >\r\n                                  {{ option }}\r\n                                </li>\r\n                              </template>\r\n                              <template v-else>\r\n                                {{ answer.answer }}\r\n                              </template>\r\n                            </template>\r\n                            <template v-else>\r\n                              Sem resposta\r\n                            </template>\r\n                          </span>\r\n                        </template>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                  <footer class=\"modal-card-foot flex row ca\">\r\n                    <button\r\n                      v-if=\"answerStatuses[response.id] == 1 || answerStatuses[response.id] == 2\"\r\n                      :class=\"{'is-loading' : loading_status[response.id] === 'loading'}\"\r\n                      type=\"button\"\r\n                      class=\"button is-danger\"\r\n                      @click=\"answerStatuses[response.id] = 3; changeStatus(response.id, answerStatuses[response.id])\"\r\n                    >\r\n                      Invalidar\r\n                    </button>\r\n                    <button\r\n                      v-if=\"answerStatuses[response.id] == 1 || answerStatuses[response.id] == 3\"\r\n                      :class=\"{'is-loading' : loading_status[response.id] === 'loading'}\"\r\n                      type=\"button\"\r\n                      class=\"button is-success\"\r\n                      @click=\"answerStatuses[response.id] = 2; changeStatus(response.id, answerStatuses[response.id])\"\r\n                    >\r\n                      Validar\r\n                    </button>\r\n                  </footer>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </td>\r\n          <td v-else>\r\n            A carregar...\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody v-else>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n        <tr style=\"height: 50px;\">\r\n          <td />\r\n          <td v-if=\"!event\" />\r\n          <td />\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as components from \"@/fields\";\r\nimport { API } from \"@/http-common\";\r\nimport { decodeSections, getCookie, timeSince, stringIn } from \"@/common\";\r\nexport default {\r\n  name: \"ViewAllResponses\",\r\n  components,\r\n  data() {\r\n    return {\r\n      api_data: undefined,\r\n      form_responses: undefined,\r\n      displayed_sections: [],\r\n      event: undefined,\r\n      user: undefined,\r\n      statuses: undefined,\r\n      authorSearch: \"\",\r\n      eventSearch: \"\",\r\n      statusSearch: \"\",\r\n      answerStatuses: [],\r\n      interval : undefined,\r\n      loading_status : {},\r\n      modal_open : {}\r\n    };\r\n  },\r\n  created() {\r\n    document.title = \"Validação de registos\"\r\n    const form = API.get(\"form/\".concat(this.$route.params.id))\r\n      .then((response) => \r\n        this.initializeData(response)\r\n      )\r\n    var queryString = \"formAnswer/?form=\".concat(this.$route.params.id).concat(\"&status=1,2\");\r\n    if (this.$route.query.event !== undefined) {\r\n      queryString = queryString.concat(\"&event=\").concat(this.$route.query.event)\r\n      API.get(\"event/\".concat(this.$route.query.event))\r\n       .then(response => this.event = response.data.name)\r\n    }\r\n    // if (this.$route.query.user !== undefined) {\r\n    //   queryString = queryString.concat(\"&user=\").concat(this.$route.query.user)\r\n    //   API.get(\"user/\".concat(this.$route.query.user))\r\n    //    .then(response => this.user = response.data.username);\r\n    // }\r\n    API.get(queryString)\r\n      .then(async (response) => {\r\n          await form;\r\n          this.initializeAnswers(response)\r\n        }\r\n      );\r\n\r\n    API.get(\"answerStatus/\")\r\n      .then((response) => {\r\n        this.statuses = response.data;\r\n      });\r\n    this.getStatuses();\r\n    //this.interval = setInterval(() => this.getStatuses(), 10000);\r\n  },\r\n  methods: {\r\n    getStatuses() {\r\n      API.get(\"formAnswerStatus/\")\r\n      .then((response) => {\r\n        this.answerStatuses = response.data;\r\n      });\r\n    },\r\n    changeStatus(answer, status) {\r\n      this.loading_status[answer] = 'loading';\r\n      setTimeout(this.patchStatus.bind(this, answer, status), 0);\r\n    },\r\n    patchStatus(answer, status) {\r\n      const options = {\r\n        method: \"patch\",\r\n        url: \"/formAnswerStatus/\" + answer + \"/\",\r\n        headers: {\r\n          \"X-CSRFToken\": getCookie(\"csrftoken\"),\r\n        },\r\n        data: {\r\n          \"status\": status\r\n        },\r\n        transformResponse: [\r\n          (data) => {\r\n            this.response = data;\r\n            return data;\r\n          },\r\n        ],\r\n      };\r\n      API(options)\r\n        .then(() => this.loading_status[answer] = undefined)\r\n        .catch((error) => {\r\n          console.log(error); \r\n          this.loading_status[answer] = 'error';\r\n          this.answerStatuses[answer] = 'error';\r\n        });\r\n    },\r\n    initializeData(response) {\r\n      this.api_data = response.data;\r\n      for (var i = 0; i < this.api_data.form.sections.length; /*do nothing*/) {\r\n        if (this.api_data.form.sections[i].questions.length > 0)\r\n          this.displayed_sections[i++] = true;\r\n        else\r\n          this.api_data.form.sections.splice(i, 1);\r\n      }\r\n    },\r\n    initializeAnswers(response) {\r\n      this.form_responses = decodeSections(response.data, this.api_data);\r\n    },\r\n    allFalse() {\r\n      for (var i = 0; i < this.displayed_sections.length; i++)\r\n        if (this.displayed_sections[i] == true)\r\n          return false;\r\n      return true;\r\n    },\r\n    filteredResponses() {\r\n      var result = this.form_responses;\r\n      if (this.authorSearch != \"\")\r\n        result = result.filter(x => stringIn(x.author === undefined ? \"Anónimo\" : x.author, this.authorSearch));\r\n      if (this.eventSearch != \"\")\r\n        result = result.filter(x => {return x.eventName ? stringIn(x.eventName, this.eventSearch) : false});\r\n      if (this.statusSearch != \"\")\r\n        result = result.filter(x => stringIn(this.statuses[this.answerStatuses[x.id]].name, this.statusSearch));\r\n      for (var sectionIndex = 0; sectionIndex < this.api_data.form.sections.length; sectionIndex++) {\r\n        if (this.displayed_sections[sectionIndex]) {\r\n          var section = this.api_data.form.sections[sectionIndex];\r\n          for (var questionIndex = 0; questionIndex < section.questions.length; questionIndex++) {\r\n            var question = section.questions[questionIndex]\r\n            if (question.filter && question.filter != \"\")\r\n              result = result.filter(x => stringIn(String(x.content.sections[sectionIndex][questionIndex].answer), question.filter));\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    timeSince: timeSince\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import '@/styles/flex-styles.scss';\r\n  @import '@/styles/global-styles.scss';\r\n</style>","import { render } from \"./ValidateSignup.vue?vue&type=template&id=218b1e86\"\nimport script from \"./ValidateSignup.vue?vue&type=script&lang=js\"\nexport * from \"./ValidateSignup.vue?vue&type=script&lang=js\"\n\nimport \"./ValidateSignup.vue?vue&type=style&index=0&id=218b1e86&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ValidateSignup.vue?vue&type=style&index=0&id=218b1e86&lang=scss\""],"sourceRoot":""}